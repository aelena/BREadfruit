; TESTGEN : DEFAULTS=2, ACTIONS=1, RULES=1, TRIGGERS=1
Entity frmSearch is Form
	with defaults
		visible true

	with actions
		; TODO: this property has to be populated by framework, it is an ambient property that precedes the form
		; if the property is present and has a value it means the user opened an existing request from the BP HOME
		; then it remais to determine the final syntax for accessing this property from the rules
		; or either, hardcode the rule in xtml
		load data from DATASOURCE.W4E_GetUserInfo with arguments {UserAccount : REQUEST.USER_ACCOUNT} with output {HF_UserCostLocationUnit.Value : CostLocationUnit, HF_UserCountry: UserCountry}

	with triggers
		this loads
; ----------------------------------------------------------------------------	

; ----------------------------------------------------------------------------	
; BEGIN HIDDEN FIELDS DEFINITION
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_UserCountry is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_UserCostLocationUnit is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_UserAccount is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_CurrentRole is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_RequestState is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_RequestType is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_RegionalCountry is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_CompanyCode is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_SalesOrg is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_DistributionChannel is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_Division is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_VendorCountry is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_CustomerCountry is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_AccountGroup is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_RegionIsMandatory is CheckBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_Language is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_IsEU is CheckBox in frmMain 
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_MandatoryIBAN is CheckBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_IsTaxHeaven is CheckBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_TaxCode1Mandatory is CheckBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_TaxCode2Mandatory is CheckBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_VATMandatory is CheckBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_FlagUserCanSearch is CheckBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_FlagSearchCriteriaIncomplete is CheckBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_RiskClassification is TextBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_MandatoryAttachment is CheckBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
; TESTGEN : DEFAULTS=3
Entity HF_MandatoryComment is CheckBox in frmMain
	with defaults
		enabled false
		visible false
		hiddenfield
; ----------------------------------------------------------------------------	
;     END OF HIDDEN FIELDS DEFINITION
; ----------------------------------------------------------------------------	


; TESTGEN : DEFAULTS=2, ACTIONS=1, RULES=1, TRIGGERS=1
Entity frmMain is Form
	with defaults
		; TODO: when application starts, this is hidden, except when coming from choosing an existing request in BP HOme page
		visible false

	with actions
		; TODO: this property has to be populated by framework, it is an ambient property that precedes the form
		; if the property is present and has a value it means the user opened an existing request from the BP HOME
		; then it remais to determine the final syntax for accessing this property from the rules
		; or either, hardcode the rule in xtml
		load data from DATASOURCE.W4E_GetUserInfo with arguments {UserAccount : REQUEST.USER_ACCOUNT} with output {HF_UserCostLocationUnit.Value : CostLocationUnit, HF_UserCountry: UserCountry}

	with rules
		; TODO: this property has to be populated by framework, it is an ambient property that precedes the form
		; if the property is present and has a value it means the user opened an existing request from the BP HOME
		; then it remais to determine the final syntax for accessing this property from the rules
		; or either, hardcode the rule in xtml
		REQUEST.REQUEST_ID is not empty then
			load data from DATASOURCE.MDMC3_GetBasicRequestData with arguments {RequestID : REQUEST.REQUEST_ID} with output {HF_CurrentRole.Value : CurrentRole, HF_RequestState.Value : RequestState, HF_RequestType.Value : RequestType, HF_RegionalCountry.Value : RegionalCountry, HF_CompanyCode.Value : CompanyCode, HF_SalesOrg.Value : SalesOrg, HF_CustomerCountry.Value : CustomerCountry}
			load data from DATASOURCE.MDMC3_GetCountryData with arguments {CountryCode : REQUEST.REGIONAL_COUNTRY } with output {HF_RiskClassification.Value : RiskClassification, HF_AccountGroup.Value : AccountGroup, HF_Language.Value : DefaultLanguage, HF_MandatoryIBAN.Value : MandatoryIBAN, HF_IsTaxHeaven.Value : TaxHeavenBlackList_Source, HF_RegionIsMandatory.Value : Region_IsMandatory, HF_TaxCode1Mandatory.Value : TaxCode1IsMandatory, HF_TaxCode2Mandatory.Value : TaxCode2IsMandatory, HF_VATMandatory.Value : VATIsMandatory, HF_IsEU.Value : IsEU }
		else
			load data from DATASOURCE.MDMC3_GetCountryData with arguments {CountryCode : DDLCDCountry.Value } with output {HF_RiskClassification.Value : RiskClassification, HF_AccountGroup.Value : AccountGroup, HF_Language.Value : DefaultLanguage, HF_MandatoryIBAN.Value : MandatoryIBAN, HF_IsTaxHeaven.Value : TaxHeavenBlackList_Source, HF_RegionIsMandatory.Value : Region_IsMandatory, HF_TaxCode1Mandatory.Value : TaxCode1IsMandatory, HF_TaxCode2Mandatory.Value : TaxCode2IsMandatory, HF_VATMandatory.Value : VATIsMandatory, HF_IsEU.Value : IsEU }

	with triggers
		this loads

; ----------------------------------------------------------------------------	
; ----------------------------------------------------------------------------
  -- LIST OF ALL ENTITIES FOUND 
; ----------------------------------------------------------------------------




;	TBCustomerName
;	TBCustomerCity
;	TBCustomerNumber
;	TBCustomerIFA
;	DDLDCountry
;	TBCustomerVAT
;	DDLCDCountry
;	DDLCDCompany
;	DDLCDSalesOrg
;	DDLCDDistribChannel
;	DDLCDivision
;	btnSearch
;	btnCreateCustomer
;	LBLSearchResultMessage


; ----------------------------------------------------------------------------

; TESTGEN : DEFAULTS=4
Entity rbSpiridon is RadioButton in frmSearch
	with defaults
		enabled false
		label 'Spiridon'
		value true				; means checked

; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=4
Entity rbEPass is RadioButton in frmSearch
	with defaults
		enabled false
		label 'Epass'
		value false				; means unchecked

; ----------------------------------------------------------------------------

; TESTGEN : DEFAULTS=4, ACTIONS=3, RULES=0, TRIGGERS=1
Entity TBCustomerName is TextBox in frmSearch
	with defaults
		label LABELS.labCustomerName
		value   ''

	with actions
		hide btnCreateCustomer
		clear CustomerSearchResultGrid
		set hidden CustomerSearchResultGrid

	with rules
		
	with triggers
		TBCustomerName.Value changes
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, ACTIONS=3, RULES=0, TRIGGERS=1
Entity TBCustomerCity is TextBox in frmSearch

	with defaults
		label LABELS.labCustomerCity
		value  ''

	with actions
		hide btnCreateCustomer
		set hidden CustomerSearchResultGrid
		clear CustomerSearchResultGrid

	with rules
		
	with triggers
		this changes
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=7, ACTIONS=3, RULES=2, TRIGGERS=1
Entity TBCustomerNumber is TextBox in frmSearch

	with defaults
		label LABELS.labCustomerNumber
		value   ''
		min length 10
		max length 10
		validation ^[0-9]{10}$

	with actions
		hide btnCreateCustomer
		hide CustomerSearchResultGrid
		clear CustomerSearchResultGrid

	with rules
		; show this message 'This partner is not managed by Madam. Please contact GSS master data team.' if starting with 0
		TBCustomerNumber.text starts with '0' then
			set value MESSAGES.ERRPartnerNotManaged in MESSAGE_POPUP
		TBCustomerNumber.text not starts with '0' then
			set value '' in MESSAGE_POPUP

	with triggers
		this.Value changes

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, ACTIONS=3, RULES=2, TRIGGERS=1
Entity TBCustomerIFA is TextBox in frmSearch

	with defaults
		label LABELS.labCustomerIFA

	with actions
		hide btnCreateCustomer
		hide CustomerSearchResultGrid
		clear CustomerSearchResultGrid
	
	with rules
		TBCustomerIFA.Value is not empty then 
			DDLDCountry mandatory false
		else
			DDLDCountry mandatory true

	with triggers
		this.Value changes

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=7, ACTIONS=5, RULES=4, TRIGGERS=1
Entity DDLDCountry is DropDownList in frmSearch

	with defaults
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_Countries with arguments {FlagActive : true}
		value HF_UserCountry.Value		; preselect user country if there is data in SCD for this user
		label LABELS.labCountry

	with actions
		set value '' in MESSAGE_POPUP
		hide CustomerSearchResultGrid
		hide btnCreateCustomer
		clear CustomerSearchResultGrid

	with rules
		DDLCDCountry.Value in {'FR','GF','GP','RE','MQ','YT','NC','PF','PM','WF','MC','TF'} then label LABELS.labSIRET in TBCustomerVAT
		DDLCDCountry.Value in {'PT','ES'} then label LABELS.labNIF in TBCustomerVAT
		DDLCDCountry.Value is 'IT' then label LABELS.labPartitaIVA in TBCustomerVAT
		DDLCDCountry.Value not in {'PT','ES','IT','FR','GF','GP','RE','MQ','YT','NC','PF','PM','WF','MC'} then label LABELS.labVAT in TBCustomerVAT
	
	with triggers
		this.Value changes 

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, ACTIONS=3, RULES=0, TRIGGERS=1
Entity TBCustomerVAT is TextBox in frmSearch

	with defaults
		value ''
		label LABELS.labCustomerVAT

	with actions
		hide btnCreateCustomer
		hide CustomerSearchResultGrid
		clear CustomerSearchResultGrid

	with triggers
		this.Value changes

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=8, ACTIONS=5, RULES=0, TRIGGERS=1
Entity DDLCDCountry is DropDownList in frmSearch

	with defaults
		data field DisplayName
		value field Code
		label LABELS.labCountry
		load data from DATASOURCE.MDMC3_ClusterCountries
		value HF_UserCountry.Value		; preselect user country if there is data in SCD for this user
		mandatory true

	with actions
		; load active companies for this country
		load data from DATASOURCE.MDMC3_ClusterCompanies with arguments {CountryCode : this.Value} in DDLCDCompany
		; purge the data in this dropdownlist
		clear DDLCDSalesOrg
		hide CustomerSearchResultGrid
		clear CustomerSearchResultGrid
		hide btnCreateCustomer


	with triggers
		this.Value changes

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, ACTIONS=5, RULES=0, TRIGGERS=1
Entity DDLCDCompany is DropDownList in frmSearch

	with defaults
		label LABELS.labCompany
		mandatory true
		data field DisplayName
		value field Code

	with actions
		; load active companies for this country
		load data from DATASOURCE.MDMC3_ClusterSalesOrganizations with arguments {ClusterCompanyCode: DDLCDCompany.Value} in DDLCDSalesOrg 
		set value HF_UserCostLocationUnit.Value in DDLCDCompany			; another data constant
		hide CustomerSearchResultGrid
		clear CustomerSearchResultGrid
		hide btnCreateCustomer

	with triggers
		this.Value changes

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=7, ACTIONS=4, RULES=1, TRIGGERS=1
Entity DDLCDSalesOrg is DropDownList in frmSearch

	with defaults
		label LABELS.labSalesOrg
		value ''
		mandatory true
		data field DisplayName
		value field Code

	with actions
		; load active companies for this country
		; this means the current ìmplementation needs to change a bit...
		load data from DATASOURCE.SelectDistributionChannels with arguments {countrycode : DDLCDCountry.Value, companycode :DDLCDCompany.Value, salesorgcode :DDLCDSalesOrg.Value} in DDLCDDistribChannel
		hide CustomerSearchResultGrid
		clear CustomerSearchResultGrid
		hide btnCreateCustomer

	with rules
		DDLCDDistribChannel.Items.Count is true then
			DDLCDDistribChannel visible true

	with triggers
		this.Value changes

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=5, ACTIONS=3, RULES=2, TRIGGERS=1
Entity DDLCDDistribChannel is DropDownList in frmSearch

	with defaults
		label LABELS.labDistribChannel
		data field DisplayName
		value field Code
		visible false
		
	with actions
		hide CustomerSearchResultGrid
		clear CustomerSearchResultGrid
		hide btnCreateCustomer

	with rules
		DDLCDDistribChannel.Items.Count > 0 then
			DDLCDDistribChannel visible true
		else
			DDLCDDistribChannel visible false

		DDLCDDistribChannel is visible and DDLCDivision is empty then
			DDLCDDistribChannel mandatory

	with triggers
		this.Value changes
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, ACTIONS=0, RULES=2, TRIGGERS=0
Entity DDLCDivision is DropDownList in frmSearch

	with defaults
		visible false
		label LABELS.labDivision
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_Divisions with arguments {ClusterCountryCode: DDLCDCountry.Value, ClusterCompanyCode : DDLCDCompany.Value, ClusterSalesOrganization : DDLCDSalesOrg.Value, FlagActive : true }

	with rules
		DDLCDivision.Items.Count > 0 then
			this visible true
		else
			this visible false

		DDLCDivision is visible and DDLCDivision is empty then
			DDLCDivision mandatory
		
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, ACTIONS=1, RULES=1, TRIGGERS=1
Entity btnSearch is Button in frmSearch

	with defaults
		label LABELS.btnSearch

	with actions
		; always perform this conditionless action when the button is clicked
		; arguments might vary from search to search so it makes sense to run it everytime
		load data from DATASOURCE.IsUserInROLE with arguments { UserAccount : HF_UserAccount.Value, RoleCode : USER.CURRENT_ROLE, ClusterCountryCode : DDLCDCountry.Value, ClusterCompanyCode : DDLCDCompany.Value, ClusterPOCode : DDLCDSalesOrg.Value } in HF_FlagUserCanSearch

	with rules

		; if hidden field’s value, which is a checkbox is false, then show no auth message
		HF_FlagUserCanSearch.Value is false then 
			set value MESSAGES.ERRauthCCPO in MESSAGE_POPUP

        ; since we cannot exit rule block we need to involve the flag in every successive rule as a guard for all of them
		HF_FlagUserCanSearch.Value is true and TBCustomerNumber.text starts with '0' then
				set value MESSAGES.ERRPartnerNotManaged in MESSAGE_POPUP
				; missing mandatory parameters for search, so set to true this second flag
				set value true in HF_FlagSearchCriteriaIncomplete

		HF_FlagUserCanSearch.Value is true and DDLCDCountry is empty then
				set value MESSAGES.ERRfieldVCountry in MESSAGE_POPUP
				set value true in HF_FlagSearchCriteriaIncomplete

		HF_FlagUserCanSearch.Value is true and DDLCDivision is visible and DDLCDivision is empty then
				; show this message : Fill the field of Division Country
				set value MESSAGES.ERRfieldDivisionCountry in MESSAGE_POPUP
				set value true in HF_FlagSearchCriteriaIncomplete

		HF_FlagUserCanSearch.Value is true and TBCustomerNumber.Length is not 10 then
				set value MESSAGES.ERRfieldCNumer_10 in MESSAGE_POPUP
				set value true in HF_FlagSearchCriteriaIncomplete

		HF_FlagUserCanSearch.Value is true and DDLDCountry is empty and TBCustomerIFA is empty then
				set value MESSAGES.ERRfieldVCountry in MESSAGE_POPUP
				set value true in HF_FlagSearchCriteriaIncomplete

		HF_FlagUserCanSearch.Value is true and TBCustomerVAT is not empty and DDLDCountry is empty then
				set value MESSAGES.ERRfieldCCountry in MESSAGE_POPUP
				set value true in HF_FlagSearchCriteriaIncomplete
		
		HF_FlagUserCanSearch.Value is true and TBCustomerVAT is empty and TBCustomerVAT is empty and TBCustomerName is empty and TBCustomerCity is empty and TBCustomerIFA is empty then
				set value MESSAGES.ERRKeyTaxIFACountryCity in MESSAGE_POPUP
				set value true in HF_FlagSearchCriteriaIncomplete

		HF_FlagUserCanSearch.Value is true and TBCustomerVAT is empty and TBCustomerVAT is empty and DDLDCountry is empty then
				set value MESSAGES.ERRfieldCCountry in MESSAGE_POPUP
				set value true in HF_FlagSearchCriteriaIncomplete
				
		; HF_FlagUserCanSearch.Value is true and TBCustomerName is empty and TBCustomerCity is not empty and TBCustomerName is empty and TBCustomerIFA is empty and DDLDCountry is empty and TBCustomerVAT is empty then
			; 	set value MESSAGES.VALIDATIONS.SEARCH.FILL01 in MESSAGE_POPUP
			;	set value true in HF_FlagSearchCriteriaIncomplete
	
		HF_FlagUserCanSearch.Value is true and DDLCDCountry is empty or DDLCDCompany is empty or DDLCDSalesOrg is empty then
				set value MESSAGES.ERRSOfieldCCS in MESSAGE_POPUP
				set value true in HF_FlagSearchCriteriaIncomplete
		
		HF_FlagUserCanSearch.Value is true and HF_FlagSearchCriteriaIncomplete.Value is false then
				load data from WEBSERVICE.CUSTOMER_SEARCH_SERVICE with arguments {CustomerName:TBCustomerName.Value, CustomerCity:TBCustomerCity, CustomerNumber:TBCustomerNumber.Value, CustomerCountry:DDLVDCountry.Value,TaxCode1:TBCustomerVAT.Value,TaxCode4:TBCustomerIFA.Value, Country:DDLDCountry.Value, CompanyCode:DDLCDCompany.Value, SalesOrganization:DDLCDSalesOrg.Value, Division:DDLCDivision } in CustomerSearchResultGrid

		HF_FlagUserCanSearch.Value is true and HF_FlagSearchCriteriaIncomplete.Value is false and customerSearchResultGrid.Items.Count = 0 then
			set value MESSAGES.MSGNoValuesFound in MESSAGE_POPUP
			btnCreateCustomer visible true
			customerSearchResultGrid_ visible false

		HF_FlagUserCanSearch.Value is true and HF_FlagSearchCriteriaIncomplete.Value is false and customerSearchResultGrid.Items.Count > 0 then
			btnCreateCustomer visible false
			customerSearchResultGrid_ visible true

	with triggers
		this on click	

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, ACTIONS=9, RULES=0, TRIGGERS=1
Entity btnCreateCustomer is Button in frmSearch

	with defaults
		label LABELS.btnCreateCustomer

	with actions
		
		; populate hidden fields with the data put in search controls
		set value DDLCDCountry.Value in HF_RegionalCountry
		set value DDLCDCompany.Value in HF_CompanyCode
		set value DDLCDSalesOrg.Value in HF_SalesOrg
		set value DDLCDDistribChannel.Value in HF_DistributionChannel
		set value DDLCDivision.Value in HF_Division
		set value DDLDCountry.Value in HF_CustomerCountry
		set value TBCustomerName.Value in GD_Adr_Name
		
		frmMain visible true
		frmSearch visible false


	with triggers
		this click
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3
Entity customerSearchResultGrid_ is Div in frmSearch
	with defaults
		visible false
		label LABELS.lblResult

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=27, RULES=0, TRIGGERS=0
Entity CustomerSearchResultGrid is Grid in frmSearch
	with defaults
		visible false
		define column Customer with arguments {  DataField: Customer, Header : LABELS.lblCustomer, Visible : true }
		define column Vendor with arguments {  DataField: Vendor, Header : LABELS.lblVendor, Visible : true }  
		define column name1 with arguments {  DataField: Name1, Header : LABELS.lblName, Visible : true }  
		define column name3 with arguments {  DataField: Name3, Header : LABELS.lblComment, Visible : true }  
		define column Street with arguments {  DataField: Street, Header : LABELS.lblStreet, Visible : true }  
		define column City with arguments {  DataField: City, Header : LABELS.lblCity, Visible : true }  
		define column Country with arguments {  DataField: Country, Header : LABELS.lblCountry, Visible : true }
		define column Taxcode with arguments {  DataField: Taxcode, Header : LABELS.lblLocal_Tax_Code, Visible : true }  
		define column VAT with arguments {  DataField: VAT, Header : LABELS.lblEU_Registration_Nr, Visible : true }  
		define column NaturalPerson with arguments {  DataField: IsNaturalPerson, Header : LABELS.labGD_Ctr_IsNaturalPerson, Visible : true }
		define column Risk with arguments {  DataField: Risk, Header : LABELS.lblRiskClass, Visible : true }
		define column KNA1_SPERR with arguments {  DataField: HasCentralPostingBlock, Header : LABELS.lblCentralPostingBlock , Visible : true }
		define column KNA1_AUFSD with arguments {  DataField: HasCentralOrderBlock, Header : LABELS.lblCentralOrderBlock   , Visible : true }
		define column KNA1_LIFSD with arguments {  DataField: HasCentralDeliveryBlock, Header : LABELS.lblCentralDelBlock, Visible : true }  
		define column KNA1_FAKSD with arguments {  DataField: HasCentralBillingBlock, Header : LABELS.lblCentralBillingBlock, Visible : true } 
		define column Company with arguments {  DataField: Company, Header : LABELS.Company   , Visible : true }
		define column KNB1_FRGRP with arguments {  DataField: ReleaseGroup, Header : LABELS.lblBusinessPartnerClass  , Visible : true }
		define column KNB1_ZTERM with arguments {  DataField: TermsOfPaymentKeyAtCompanyCodeLevel, Header : LABELS.lblPaymentTerms  , Visible : true }
		define column KNB1_SPERR with arguments {  DataField: HasPostingBlockForCompanyCode, Header : LABELS.lblPosting_Block  	, Visible : true }
		define column SO with arguments {  DataField: SalesOrganization, Header : LABELS.lblSalesOrganiz, Visible : true }
		define column DistChannel with arguments {  DataField: DistChannel, Header : LABELS.lblChannel , Visible : true }
		define column KNVV_ZTERM with arguments {  DataField: TermsOfPaymentKeyAtSOLevel, Header : LABELS.lblPaymentTermsSO  , Visible : true }
		define column KNVV_AUFSD with arguments {  DataField: HasOrderBlockForSalesArea, Header : LABELS.Sales_Org_Order_Block  , Visible : true }
		define column KNVV_LIFSD with arguments {  DataField: SalesOrganizationDeliveryBlock, Header : LABELS.lblSales_Org_Delivery_Block , Visible : true } 
		define column KNVV_FAKSD with arguments {  DataField: HasBillingBlockForSalesArea, Header : LABELS.lblSales_Org_Billing_Block  , Visible : true }
		; button columns
		define column CreateButton with arguments { DisplayAs : Button, Header : LABELS.lblAction, Text: LABELS.lblCreate, Visible: false}
		define column ModifyButton with arguments { DisplayAs : Button, Header : LABELS.lblAction, Text: LABELS.lblModify, Visible: false}
		define column BlockButton with arguments {  DisplayAs : Button, Header : LABELS.lblAction, Text: LABELS.lblBlock, Visible: false}

	with rules

		; these rules have to be applied row by row of course
		; to be hardcoded in the rule
		; Company.Value is empty then
		; 	CreateButton visible true
		; 	set value LABELS.lblToBeCreated in Company

		; PO.Value is empty then
		; 	CreateButton visible true
		; 	set value LABELS.lblToBeCreated in PO
			
		; Company.Value is not empty and PO.Value is not empty then
		; 	ModifyButton visible true
		; 	BlockButton visible true
;	with triggers
;		this loads

; ----------------------------------------------------------------------------	
;     END OF SEARCH FORM DEFINITION
; ----------------------------------------------------------------------------	



; ----------------------------------------------------------------------------	
; BEGIN MAIN FORM CONTROL DEFINITION
; ----------------------------------------------------------------------------	

; ----------------------------------------------------------------------------
;  -- LIST OF ALL ENTITIES FOUND in MDMC main FORM
; ----------------------------------------------------------------------------

;	labOpInfoCustomer
;	labOpInfoCountry
;	labOpInfoCC
;	labOpInfoSO
;	labOpInfoDC
;	GD_Adr_Name
;	GD_Adr_Name2
;	GD_Adr_Name3
;	GD_Adr_Name4
;	GD_Adr_Search
;	GD_Com_Comment
;	GD_Adr_Street
;	GD_Adr_Street2
;	GD_Adr_Street3
;	GD_Adr_Street4
;	GD_Adr_Street5
;	GD_Adr_CountryGD
;	GD_Adr_Region
;	GD_Adr_City
;	GD_Adr_City2
;	GD_Adr_PostalCode
;	GD_Adr_POBox
;	GD_Adr_POBoxPostalCode
;	GD_Adr_POBoxLoc
;	GD_Com_LanguageCode
;	GD_Com_Telebox
;	GD_Com_DataLine
;	GD_Ctr_CustomerNumber
;	GD_Ctr_Industry
;	GD_Ctr_UnsubscribeCMD
;	GD_Ctr_GFORM
;	GD_Ctr_PIVA
;	GD_Ctr_CF
;	GD_Ctr_VendorNumber
;	GD_Ctr_IFANumber
;	GD_Ctr_TaxCode1
;	GD_Ctr_TaxCode2
;	GD_Ctr_VATRegistrationNumber
;	labGD_MainlyMilitary
;	labGD_MainlyCivilian
;	GD_Nuclear
;	labGD_FreeZone
;	labGD_Embassy
;	GD_Nat_NaturalPerson
;	GD_Nat_BirthDate
;	GD_Nat_PlaceOfBirth
;	GD_Nat_Profession
;	GD_Nat_Sex
;	CC_CO_ReconAccount
;	CC_PT_PaymentTerms
;	CC_PT_PaymentMethods
;	CC_PT_ClearingWithCustomer
;	CC_PT_IndividualPayment
;	CC_CO_AccountingClerk
;	CC_DD_DunningProcedure
;	CC_DD_DunningArea
;	CC_AR_PledgeIndicator
;	KNVV_BZIRK
;	SO_CustomerGroup
;	SO_SalesOffice
;	KNVV_EIKTO
;	KNVV_VKGRP
;	SO_SalesOrderCurrency
;	KNVV_KONDA
;	KNVV_PLTYP
;	SO_CustPricingProc
;	SO_CustomerStatsGroup
;	SO_CustomerShippingConditions
;	KNVV_VWERK
;	KNVV_AUTLF
;	KNVV_ANTLF
;	KNVV_LPRIO
;	KNVV_KZTLF
;	KNVV_PRFRE
;	SO_Incoterms
;	SO_IncotermsPart2
;	SO_TermsOfPaymentKey
;	KNVV_KTGRD
;	SO_TaxClassification
;	KNKK_SBGRP
;	KNVV_KVGR1
;	KNVV_KVGR2
;	KNVV_KVGR3
;	KNVV_KVGR4
;	KNVV_KVGR5
;	KNKK_KNKLI
;	KNKK_KLIMK
;	KNKK_CTLPC
;	KNKK_DTREV
;	KNKK_NXTRV
;	KNKK_KRAUS
;	KNKK_DBRTG
;	KNKK_REVDB
;	KNKK_DBEKR
;	btnBlockAll
;	btnUnblockAll
;	BLK_GD_Ctr_UnsubscribeCMD
;	labCentralPostingBlock
;	BLK_CentralPostingBlock
;	labPostBlockingForCompanyCode
;	BLK_PostingBlockForCC
;	BLK_CentralSalesOrderBlock
;	BLK_OrdersBlockAtSalesArea
;	BLK_CentralDeliveriesBlock
;	BLK_DeliveriesBlockAtSalesArea
;	BLK_CentralBillingBlock
;	BLK_BillingBlockAtSalesArea
;	labCentralSalesSupportBlock
;	BLK_CentralSalesSupportBlock
;	labCentralSalesSupportBlockAtThisSalesArea
;	BLK_CentralSalesSupportBlockAtSalesArea
;	labCentralDelMasterRecord
;	BLK_CentralDeletionFlagMasterRecord
;	labDelFlagMasterCompanyCode
;	BLK_DeletionFlagMasterRecordCC
;	labDelFlagAtThisSalesArea
;	BLK_DeletionFlagMasterRecordSA
;	labCentralDelBlockMaster
;	BLK_CentralDeletionBlockMasterRecord
;	labDelBlockMasterCompany
;	BLK_DeletionBlockMasterRecordCC
;	TS_IsUrgentRequest
;	CostCenter
;	DDLDCReqAction
;	GD_SAPNumber
;	labNextRole
;	labNextAction
;	DDLDCComment
;	btnSubmit
;	btnClose
;	MADAM_MESSAGE_POPUP
;	GD_Ctr_RiskClassification
;	GD_Adr_Country
;	GD_Ctr_CustomerClassification
;	CC_AM_BPClassification
;	GD_Damex
;	GD_Ctr_IsNaturalPerson
;	labGD_DamexNote
;	ATTACHMENT
;	AttachHistory
;	SAP_Message
;	CostCenter
;	DDLDCReqAction
;	GD_SAPNumber
;	labNextRole
;	labNextAction
;	DDLDCComment
;	btnSCClose
;	SCMessage
;	lbFMRelevantFor
;	lbOtherDependencies
;	HF_RelevantForSUS
;	HF_MandatoryAttachment
;	HF_MandatoryComment
;	HF_RelevantForCO
;	HF_RelevantForClusterRCO
;	txbNextRole
;	SR_Comments
;	btnBack2
;	btnSave
;	btnCloseFinal
;	SummaryMESSAGE_POPUP



; TODO: SOME HIDDEN FIELDS - CC_AM_CashManagementGroup <-- HAS TO BE INCLUDED IN WEB SERVICES PROBABLY - REVIEW RULES THERE
; CC_CO_AuthorizationGroup same for this one


; ----------------------------------------------------------------------------


; TESTGEN : DEFAULTS=8, RULES=4, ACTIONS=0, TRIGGERS=2
Entity GD_Ctr_RiskClassification is DropDownList in frmMain

	with defaults
		enabled true
		visible true
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_RiskClassifications
		label LABELS.labGD_Ctr_RiskClassification
		value '00'
		mandatory true
	with rules
		
		GD_Ctr_RiskClassification.Value is empty then
			GD_Ctr_RiskClassification enabled true

		CC_AM_BPClassification is enabled then
			GD_Ctr_RiskClassification enabled true

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_RCO', 'MDMC3_CLERK'} then 
			this enabled true
		else
			this enabled false

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value is 'MDMC3_SUS' or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	

	with triggers
		this changes
		this loads

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=8, RULES=2, ACTIONS=0, TRIGGERS=3
Entity GD_Adr_Country is DropDownList in frmMain
	with defaults
		data field DisplayName
		value field Code
		visible true
		enabled false					; this control is always disabled
		load data from DATASOURCE.MDMC3_Countries
		value HF_CustomerCountry.Value
		mandatory true
		label LABELS.labGD_Adr_Country

	with rules
		GD_Adr_Country.Value is 'ES' and GD_Ctr_CustomerClassification is not 'G' and GD_Ctr_TaxCode1.Value starts with {'P','Q','S'} and HF_CurrentRole.Value is 'MDMC3_ENQ'  and HF_RequestType.Value is 'CC' then
			set value 'G' in GD_Ctr_CustomerClassification
		
		GD_Adr_Country.Value is 'ES' and GD_Ctr_CustomerClassification is not 'G' and GD_Ctr_TaxCode1.Value starts with {'P','Q','S'} and HF_CurrentRole.Value is 'MDMC3_ENQ'  and HF_RequestType.Value is not 'CC' and GD_Ctr_CustomerClassification.OldDisplayValue is not empty then
			set value 'G' in GD_Ctr_CustomerClassification

	with triggers
		this loads
		GD_Ctr_CustomerClassification changes
		GD_Ctr_TaxCode1 changes
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=8, RULES=4, ACTIONS=2, TRIGGERS=2
Entity GD_Ctr_CustomerClassification is DropDownList in frmMain

	with defaults
		data field DisplayName
		value field Code
		label LABELS.labGD_Ctr_CustomerClassification
		mandatory true
		visible true
		enabled true
		load data from DATASOURCE.MDMC3_PartnerClassification
		value 'NG'

	with rules

		HF_CustomerCountry.Value is 'ES' and GD_Ctr_TaxCode1.Text starts with {'P','Q','S'} then 
			set value 'G' in GD_Ctr_CustomerClassification
		HF_CustomerCountry.Value is 'ES' and GD_Ctr_TaxCode1.Text starts with 'G' then 
			set value 'NG' in GD_Ctr_CustomerClassification

		; TODO: RULE FOR 'FR' - LEGAL FORM - REVIEW THIS
		; For customer country France the value is set due to legal form selection, see sheet 'Legal form(France)'  meaning what??????
		
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS','MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	

		HF_CurrentRole.Value is 'MDMC3_RCO' and HF_RegionalCountry.Value in {'IT', 'GR'} then this enabled 

	with actions
		ATTACHMENT mandatory  true  
		set value true in HF_MandatoryAttachment
		; DDLDCComment mandatory  false
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=8, RULES=5, ACTIONS=1, TRIGGERS=2
Entity CC_AM_BPClassification is DropDownList in frmMain

	with defaults
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_ReleaseGroups
		visible true
		enabled true
		value 'NORM'
		mandatory true
		label LABELS.labCC_AM_BPClassification
	
	with rules

		HF_RegionalCountry.Value in {'BE','IT','PT'} then			; NOTE: not in fieldmapping
			this mandatory false
				
		HF_RequestType.Value is 'CM_BLK' then			; NOTE: not in fieldmapping
			this mandatory false	
		
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_RCO', 'MDMC3_CLERK'} then 
			this enabled true
		else
			this enable false

		CC_AM_BPClassification.Value in {'BPHR', 'BPMR'} then ATTACHMENT mandatory 
		
		; TODO: CHECK THIS WITH SEB 
		REQUEST.CC_AM_BPClassification is not empty then
			set value REQUEST.CC_AM_BPClassification in CC_AM_BPClassification

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	with actions
		; ATTACHMENT mandatory  false
		; DDLDCComment mandatory  false
	
	with triggers 
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=5, RULES=4, ACTIONS=4, TRIGGERS=2
Entity GD_Adr_Name is TextBox in frmMain

	with defaults
		label LABELS.labName
		mandatory true
		max length 35
	with rules
		HF_AccountGroup.Value in {'YCT1','YCT2'} then
			max length 32
		HF_AccountGroup.Value is 'YCT3' then				; NOTE: not in fieldmapping
			max length 28
		HF_RegionalCountry.Value is 'GR' and HF_RequestType.Value not in {'CC','CC_CC'} then		; NOTE: not in fieldmapping
			this mandatory false
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		ATTACHMENT mandatory  true  
		set value true in HF_MandatoryAttachment
		; DDLDCComment mandatory  false
		set value SUBSTRING(GD_Adr_Name.Value,20) in GD_Adr_Search
		set value GD_Adr_Name.Value in B_GD_VB_AccountHolder
	with triggers 
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=3, ACTIONS=2, TRIGGERS=2
Entity GD_Adr_Name2 is TextBox in frmMain

	with defaults
		max length 32

	with rules
		HF_AccountGroup.Value in {'YCT1','YCT2'} then
			max length 32
		HF_AccountGroup.Value is 'YCT3' then
			max length 28
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		set value true in HF_MandatoryAttachment
		ATTACHMENT mandatory  true  
		; DDLDCComment mandatory  false
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=4, ACTIONS=0, TRIGGERS=1
Entity GD_Adr_Name3 is TextBox in frmMain

	with defaults
		max length 32

	with rules
		HF_AccountGroup.Value in {'YCT7',''YVT7''} then
			this mandatory true
		HF_CurrentRole.Value is 'MDMC3_CLERK' then
			this mandatory true
		; NOTE: not in fieldmapping
		HF_RegionalCountry.Value is 'GR' and HF_RequestType.Value in {'CC','CC_CC'} then
			this mandatory true
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=4, TRIGGERS=1
Entity GD_Adr_Name4 is TextBox in frmMain

	with defaults
		max length 32
	with rules
		HF_AccountGroup.Value in {'YCT7','YVT7'} then
			this mandatory true
		HF_CurrentRole.Value is 'MDMC3_CLERK' then
			this mandatory true
			; NOTE: not in fieldmapping
		HF_RegionalCountry.Value is 'GR' and HF_RequestType.Value in {'CC','CC_CC'} then
			this mandatory true
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=5, RULES=2, TRIGGERS=1
Entity GD_Adr_Search is TextBox in frmMain

	with defaults
		label LABELS.Search
		max length 20
		; put here the first 20 characters of the name (which in creations comes from search screen)
		value GD_Adr_Name.Value
	with rules

		HF_AccountGroup.Value in {'YCT6', 'YCT9'} then
			max length 5			
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, RULES=1, TRIGGERS=1
Entity GD_Com_Comment is TextBox in frmMain

	with defaults
		label LABELS.labComment
		max length 35
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=5, RULES=3, ACTIONS=2, TRIGGERS=2
Entity GD_Adr_Street is TextBox in frmMain

	with defaults
		label LABELS.labHouseNumber
		mandatory true
		max length 32
	with rules
		; NOTE: not in fieldmapping
		HF_AccountGroup.Value in {'YCT1','YCT2'} then
			max length 32
		; NOTE: not in fieldmapping
		HF_AccountGroup.Value is 'YCT3' then
			max length 28
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	

	with actions
		; ATTACHMENT mandatory  false
		set value true in HF_MandatoryComment
		DDLDCComment mandatory  true  
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=4, ACTIONS=2, TRIGGERS=2
Entity GD_Adr_Street2 is TextBox in frmMain

	with defaults
		max length 32

	with rules
		HF_RegionalCountry.Value is 'FR' then 
			this not visible
		HF_AccountGroup.Value in {'YCT1','YCT2'} then
			max length 32
		HF_AccountGroup.Value is 'YCT3' then
			max length 28
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		ATTACHMENT mandatory  true  
		set value true in HF_MandatoryAttachment
		; DDLDCComment mandatory  false
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=4, ACTIONS=2, TRIGGERS=2
Entity GD_Adr_Street3 is TextBox in frmMain

	with defaults
		max length 32

	with rules
		HF_RegionalCountry.Value is 'FR' then 
			this not visible
		HF_AccountGroup.Value in {'YCT1','YCT2'} then
			max length 32
		HF_AccountGroup.Value is 'YCT3' then
			max length 28
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		set value true in HF_MandatoryAttachment
		ATTACHMENT mandatory  true  
		; DDLDCComment mandatory  false
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=4, ACTIONS=2, TRIGGERS=2
Entity GD_Adr_Street4 is TextBox in frmMain

	with defaults
		max length 32

	with rules
		HF_RegionalCountry.Value is 'FR' then 
			this not visible
		HF_AccountGroup.Value in {'YCT1','YCT2'} then
			max length 32
		HF_AccountGroup.Value is 'YCT3' then
			max length 28
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		ATTACHMENT mandatory  true  
		set value true in HF_MandatoryAttachment
		; DDLDCComment mandatory  false
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=2, ACTIONS=2, TRIGGERS=2
Entity GD_Adr_Street5 is TextBox in frmMain

	with defaults
		max length 32

	with rules
		HF_RegionalCountry.Value is 'FR' then 
			this not visible
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		ATTACHMENT mandatory  true  
		set value true in HF_MandatoryAttachment
		; DDLDCComment mandatory  false
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=8
Entity GD_Adr_CountryGD is DropDownList in frmMain

	with defaults
		label LABELS.labCountry
		mandatory true
		enable false
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_Countries
		value HF_CustomerCountry
		

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=10, ACTIONS=1, TRIGGERS=2
Entity GD_Adr_Region is DropDownList in frmMain

	with defaults
		label LABELS.labRegion
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_Regions with arguments {FlagActive : true, CountryCode : HF_CustomerCountry.Value }

	with actions
		load data from DATASOURCE.MDMC3_CreditControlGroups with arguments { CountryCode : HF_RegionalCountry.Value, CompanyCode : HF_CompanyCode.Value, RegionCode : GD_Adr_Region.Value} in KNKK_SBGRP
		
	with rules
		HF_RegionIsMandatory.Value is true and HF_RequestType.Value is 'CC' then
			GD_Adr_Region mandatory true
		
		; NOTE: yct1 and yct2 in code, not in fieldmapping
		HF_AccountGroup.Value in {'YCT1', 'YCT2', 'YCT6', 'YCT9'} and HF_RequestType.Value is 'CC' then
			GD_Adr_Region mandatory true

		HF_AccountGroup.Value is 'YCT1' and GD_Adr_Region.Value is '01' then
			set value NL in GD_Com_Language

		HF_AccountGroup.Value is 'YCT1' and GD_Adr_Region.Value in {'02', '03'} then
			set value 'FR' in GD_Com_Language

		HF_AccountGroup.Value in {'YCT6', 'YCT9'} and GD_Adr_Region.Value is 2A then
			set value '20' in GD_Adr_PostalCode

		HF_AccountGroup.Value in {'YCT6','YCT9'} and HF_RegionIsMandatory.Value and REQUEST.TYPE is 'CC' then
			this mandatory true

		HF_RegionalCountry.Value is 'FR' then
			this mandatory true

		HF_RegionalCountry.Value is 'BE' and GD_Adr_Region.Value is 01 then
			set value 'NL' in GD_Com_LanguageCode

		HF_RegionalCountry.Value is 'BE' and GD_Adr_Region.Value is not 01 then
			set value 'FR' in GD_Com_LanguageCode

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
			
	with triggers
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=5, RULES=1, ACTIONS=2, TRIGGERS=2
Entity GD_Adr_City is TextBox in frmMain

	with defaults
		label LABELS.labCity
		mandatory true
		max length 35

	with rules
		HF_AccountGroup.Value in {'YCT7','YVT7'} then
			this mandatory true
		HF_CurrentRole.Value is 'MDMC3_CLERK' then
			this mandatory true
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		ATTACHMENT mandatory  true  
		set value true in HF_MandatoryAttachment
		; DDLDCComment mandatory  false
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, RULES=3, ACTIONS=0, TRIGGERS=1
Entity GD_Adr_City2 is TextBox in frmMain

	with defaults
		visible false
		label LABELS.labDistrict
		max length 35

	with rules
		HF_CustomerCountry.Value is 'GR' or HF_RegionalCountry.Value is 'GR' then
			GD_Adr_City2 visible true
		; NOTE: not in fieldmapping
		HF_RegionalCountry.Value is 'GR' and HF_CustomerCountry.Value is not 'GR' and HF_RequestType.Value is not 'CM_BLK' then
			GD_Adr_City2 visible true
			GD_Adr_City2 mandatory true
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=5, RULES=15, ACTIONS=0, TRIGGERS=2
Entity GD_Adr_PostalCode is TextBox in frmMain

	with defaults
		label LABELS.labPostalCode
		mandatory true
		max length 10

	with rules

		HF_AccountGroup.Value in {'YCT1', 'YCT2'} then
			max length 4
			validation ^[0-9]{4}$

		HF_AccountGroup.Value in {'YCT3', 'YCT5', 'YCT7'} then
			max length 5
			validation ^[0-9]{5}$

		HF_AccountGroup.Value is 'YCT4' then
			max length 8
			validation ^[0-9]{4}-[0-9]{3}$

		HF_CustomerCountry.Value in {'IT', 'GR'} then
			max length 5

		HF_CustomerCountry.Value is 'ES' then
			max length 5
			validation ^[0-5]{1}[1-2]{1}[0-9]{3}$

		; post code must be >=1500 and <=3999 OR >=8000 and <=9999
		; the regular expression covers the ranges
		HF_CustomerCountry.Value is 'BE' and GD_Adr_Region is '01' then
			max length 4
			validation ^(1[5-9][0-9]{2}){1}|((2|3)[0-9]{3}){1}|((8|9)[0-9]{3})$
		
		; post code must be >=1300 and <=1499 OR >=4000 and <=7999
		HF_CustomerCountry.Value is 'BE' and GD_Adr_Region is 02 then
			max length 4
			validation ^(1[3-4][0-9]{2}){1}|([4-7][0-9]{3})$

		; post code must be >=1000 and <=1299
		HF_CustomerCountry.Value is 'BE' and GD_Adr_Region is '03' then
			max length 4
			validation ^(1[0-2][0-9]{2})$

		HF_CustomerCountry.Value in {'FR', 'GF', 'GP', 'MC', 'MQ', 'NC', 'PF', 'PM', 'RE', 'WF', 'YT'} then
			max length 5
			validation ^[0-9]{5}$
			set value substring(GD_Adr_PostalCode,2) in GD_Adr_Region

		HF_AccountGroup.Value in {'YCT6','YCT9'} then
			max length 5
			mandatory true 

		GD_Adr_CountryGD.Value is 'ES' then
			tooltip MESSAGES.ERRSpanishPC5

		GD_Adr_CountryGD.Value is 'PT' then
			tooltip MESSAGES.ERRPortuguesePCFormat

		GD_Adr_CountryGD.Value is 'IT' then
			tooltip MESSAGES.ERRItalianPC5

		HF_CustomerCountry.Value in {'ES','AD'} and HF_RequestType.Value in {'CC','CC_CC'} and GD_Adr_PostalCode.Value.Length >= 2 then
			load data from DATASOURCES.SelectAccountingClerkByPostCodeAndSalesArea in CC_CO_AccountingClerk

		; TODO: PUT THIS VALIDATION IN BTNSAVE 
		; HF_AccountGroup.Value in {'YCT6', 'YCT9'} then
		; make sure then that first two digits are same as value in Region combo	

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
		
	with triggers
		this changes
		this loads
; ---------------------------------------------------------------------------- 


; TESTGEN : DEFAULTS=4, RULES=8, ACTIONS=0, TRIGGERS=2
Entity GD_Adr_POBox is TextBox in frmMain

	with defaults
		label LABELS.labPOBox
		max length 10

	with rules
			
		HF_CustomerCountry.Value in {'FR','GF','GP','MC','MQ','NC','PF','PM','RE','WF','YT'} and GD_Adr_POBox is not empty then
			GD_Adr_POBoxPostalCode mandatory true
			GD_Adr_POBoxLoc mandatory true
			GD_Adr_POBox mandatory true

		HF_CustomerCountry.Value in {'FR','GF','GP','MC','MQ','NC','PF','PM','RE','WF','YT'} and GD_Adr_POBox is empty or GD_Adr_POBox.Value is '.' then
			GD_Adr_POBoxPostalCode mandatory false
			GD_Adr_POBoxLoc mandatory false
			GD_Adr_POBox mandatory false

		HF_AccountGroup.Value in {'YVT7','YCT7'} then
			max length 5

		HF_AccountGroup.Value in {'YCT6','YCT9'} and GD_Adr_POBoxLoc.Value is not empty then
			this mandatory true

		HF_RegionalCountry.Value is 'FR' then 
			max length 10

		; NOTE: not in FM
		HF_AccountGroup.Value in {'YCT6','YCT9'} and GD_Adr_POBoxLoc is not empty and GD_Adr_POBox is empty then
			set value '.' in GD_Adr_POBox

		; NOTE: not in FM
		HF_AccountGroup.Value in {'YCT6','YCT9'} and GD_Adr_POBoxPostalCode is not empty and GD_Adr_POBox is empty then
			set value '.' in GD_Adr_POBox

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	

	with triggers
		this changes
		this loads
; ---------------------------------------------------------------------------- 


; TESTGEN : DEFAULTS=4, RULES=8, ACTIONS=0, TRIGGERS=1
Entity GD_Adr_POBoxPostalCode is TextBox in frmMain

	with defaults
		label LABELS.labBoxPostalCode
		max length 10

	with rules
		HF_CustomerCountry.Value in {'FR','GF','GP','MC','MQ','NC','PF','PM','RE','WF','YT'} and GD_Adr_POBox is not empty then
			GD_Adr_POBoxPostalCode mandatory true
			GD_Adr_POBoxLoc mandatory true
			GD_Adr_POBox mandatory true

		HF_CustomerCountry.Value in {'FR','GF','GP','MC','MQ','NC','PF','PM','RE','WF','YT'} and GD_Adr_POBox is empty or GD_Adr_POBox.Value is '.' then
			GD_Adr_POBoxPostalCode mandatory false
			GD_Adr_POBoxLoc mandatory false
			GD_Adr_POBox mandatory false

		HF_AccountGroup.Value in {'YVT7','YCT7'} then
			max length 5

		; NOTE: not in FM
		HF_AccountGroup.Value in {'YCT6','YCT9'} and GD_Adr_POBoxLoc is not empty and GD_Adr_POBox is empty then
			set value '.' in GD_Adr_POBox

		; NOTE: not in FM
		HF_AccountGroup.Value in {'YCT6','YCT9'} and GD_Adr_POBoxPostalCode is not empty and GD_Adr_POBox is empty then
			set value '.' in GD_Adr_POBox

		HF_AccountGroup.Value in {'YCT6','YCT9'} and GD_Adr_POBoxLoc.Value is not empty then
			this mandatory true
			max length 5

		HF_AccountGroup.Value in {'YCT6','YCT9'} and GD_Adr_POBoxLoc.Value is not empty then
			this mandatory true

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=5, RULES=6, TRIGGERS=3
Entity GD_Adr_POBoxLoc is TextBox in frmMain

	with defaults
		label LABELS.labPoBoxLoc
		max length 100

	with rules
		
		HF_CustomerCountry.Value in {'FR','GF','GP','MC','MQ','NC','PF','PM','RE','WF','YT'} and GD_Adr_POBox is not empty and GD_Adr_POBox.Value is not '.' then
			GD_Adr_POBoxPostalCode mandatory true
			GD_Adr_POBoxLoc mandatory true
			GD_Adr_POBox mandatory true

		HF_CustomerCountry.Value in {'FR','GF','GP','MC','MQ','NC','PF','PM','RE','WF','YT'} and GD_Adr_POBox is empty or GD_Adr_POBox.Value is '.' and GD_Adr_POBoxPostalCode is not empty then
			GD_Adr_POBoxLoc mandatory true

		HF_CustomerCountry.Value in {'FR','GF','GP','MC','MQ','NC','PF','PM','RE','WF','YT'} and GD_Adr_POBox is empty or GD_Adr_POBox.Value is '.' and GD_Adr_POBoxLoc is not empty then
			GD_Adr_POBoxPostalCode mandatory true
			GD_Adr_POBoxLoc mandatory true

		HF_CustomerCountry.Value in {'FR','GF','GP','MC','MQ','NC','PF','PM','RE','WF','YT'} and GD_Adr_POBox is empty or GD_Adr_POBox.Value is '.' then
			GD_Adr_POBoxPostalCode mandatory false
			GD_Adr_POBoxLoc mandatory false
			GD_Adr_POBox mandatory false

		HF_RegionalCountry.Value is 'FR' then
			max length 40

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	with triggers
		this loads
		GD_Adr_POBox changes
		GD_Adr_POBoxPostalCode changes
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=8, RULES=5, ACTIONS=0, TRIGGERS=1
Entity GD_Com_LanguageCode is DropDownList in frmMain

	with defaults
		label LABELS.labLanguages
		mandatory true
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_Languages with arguments {FlagActive : true}	
		value EN		; default is English

	with rules
		
		HF_CustomerCountry.Value in {'FR','GF','GP','MC','MQ','NC','PF','PM','RE','WF','YT'} then
			set value 'FR' in GD_Com_LanguageCode

		HF_AccountGroup.Value is 'YCT1' and GD_Adr_Region is '01' then
			set value NL in GD_Com_LanguageCode
	
		HF_AccountGroup.Value is 'YCT1' and GD_Adr_Region in {'02', '03'} then
			set value 'FR' in GD_Com_LanguageCode

		; this should come from the MODEL (from the MDMC3_Countries table) where 'country configuration' is set
		HF_Language.Value is not empty then
			set value HF_Language.Value in GD_Com_LanguageCode

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=8, RULES=2, ACTIONS=0, TRIGGERS=1
Entity GD_Com_Telebox is DropDownList in frmMain
	with defaults
		label LABELS.labTelebox
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_Telebox with arguments {FlagActive : true, AccountGroup : HF_AccountGroup.Value}
		mandatory true
		value 'PRT'
	with rules
		HF_RequestType.Value is 'CC' then
			set value 'PRT' in GD_Com_Telebox
			this enable false
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, RULES=1, ACTIONS=0, TRIGGERS=1
Entity GD_Com_DataLine is TextBox in frmMain
	with defaults
		label LABELS.labDataLine
		max length 14
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=7, RULES=0, ACTIONS=1, TRIGGERS=1
Entity GD_VT_Country is DropDownList in GD_VT_Grid
	with defaults
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_Countries
		value HF_CustomerCountry
		mandatory true
		
	with actions
		load data from DATASOURCE.MDMC3_CountryTelephonePrefixes with arguments {Code : GD_VT_Country.Value } in GD_VT_CountryCode
	with triggers
		this changes

; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=3, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VT_CountryCode is TextBox in GD_VT_Grid

	with defaults
		label LABELS.labGD_VT_CountryCode
		enable false
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VT_Number is TextBox in GD_VT_Grid
	with defaults
		max length 30
		label LABELS.labGD_VT_Number
		mandatory true
		; seems enough to allow things like +(34) 123-4567
		validation ^[0-9\-\.()\+\s]+
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=4, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VT_Extension is TextBox in GD_VT_Grid
	with defaults
		max length 10
		label LABELS.lablabGD_VT_Extension
		; should we include a validation?
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=4, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VT_Notes is TextBox in GD_VT_Grid
	with defaults
		max length 50
		label LABELS.labGD_VT_Notes
				
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=4, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VT_Default is CheckBox in GD_VT_Grid
	with defaults
		; by defaults appears checked and disabled
		value true
		label LABELS.labP_GD_VT_Default
		enabled false
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=3, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VT_ConsNumber is TextBox in GD_VT_Grid

	with defaults
		visible false
		label LABELS.labGD_VT_ConsNumber
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=3, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VT_btnInsert is Button in GD_VT_Grid
	with defaults
		label LABELS.btnInsert

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=9, RULES=1, ACTIONS=0, TRIGGERS=1
Entity GD_VT_Grid is Grid in frmMain
	with defaults
		define column GRID_GD_VT_Country		with arguments {ControlID : GD_VT_Country, DataField : GD_VT_Country, Header : LABELS.labCountry,  Visible : true}
		define column GRID_GD_VT_CountryCode	with arguments {ControlID : GD_VT_CountryCode,		DataField : GD_VT_CountryCode, Header : LABELS.labPrefix, Enabled : false, Visible : true}
		define column GRID_GD_VT_Number		with arguments {	ControlID : GD_VT_Number,	DataField : GD_VT_Number, Header : LABELS.labNumber, Visible : true}
		define column GRID_GD_VT_Extension	with arguments {	ControlID : GD_VT_Extension,	DataField : GD_VT_Extension, Header : LABELS.labExtension, Visible : true}
		define column GRID_GD_VT_Notes		with arguments {	ControlID : GD_VT_Notes,	DataField : GD_VT_Notes, Header : LABELS.labNotes, Visible : true}
		define column GRID_GD_VT_Default		with arguments {ControlID : GD_VT_Default,		DataField : GD_VT_Default, Header : LABELS.labDefault, Visible : true}
		define column GRID_GD_VT_ConsNumber	with arguments {	ControlID : GD_VT_ConsNumber,	DataField : GD_VT_ConsNumber, Visible : false}

	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers
		; on row inserted
		; on row deleted
		; on row updated
		this loads

; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=6, RULES=0, ACTIONS=1, TRIGGERS=1
Entity GD_VF_Country is DropDownList in GD_VF_Grid
	with defaults
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_Countries
		value HF_CustomerCountry

	with actions
		load data from DATASOURCE.MDMC3_CountryTelephonePrefixes with arguments {Code : GD_VF_Country.Value } in GD_VF_CountryCode

	with triggers
		this changes

; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=3, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VF_CountryCode is TextBox in GD_VF_Grid
	with defaults
		label LABELS.labGD_VF_CountryCode
		enable false
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=5, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VF_Number is TextBox in GD_VF_Grid
	with defaults
		max length 30
		validation ^[0-9\-\.()\+\s]+
		label LABELS.labGD_VF_Number
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=3, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VF_Extension is TextBox in GD_VF_Grid
	with defaults
		label LABELS.labGD_VF_Extension
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=4, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VF_Notes is TextBox in GD_VF_Grid
	with defaults
		max length 50
		label LABELS.labGD_VF_Notes

; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=3, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VF_ConsNumber is TextBox in GD_VF_Grid
	with defaults
		visible false
		label LABELS.labGD_VF_ConsNumber

; ----------------------------------------------------------------------------

; TESTGEN : DEFAULTS=4, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VF_Default is CheckBox in GD_VF_Grid
	with defaults
		value false
		label LABELS.labGD_VF_Default
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=3, RULES=1, ACTIONS=0, TRIGGERS=0
Entity GD_VF_btnInsert is Button in GD_VF_Grid
	with defaults
		label LABELS.btnInsert

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=9, RULES=1, ACTIONS=0, TRIGGERS=1
Entity GD_VF_Grid is Grid in frmMain
	with defaults
		define column GRID_GD_VF_Country		with arguments {ControlID : GD_VF_Country,DataField : GD_VF_Country, Header : LABELS.labCountry,  Visible : true}
		define column GRID_GD_VF_CountryCode	with arguments {ControlID : GD_VF_CountryCode,		DataField : GD_VF_CountryCode, Header : LABELS.labPrefix, Enabled : false, Visible : true}
		define column GRID_GD_VF_Number		with arguments {	ControlID : GD_VF_Number,	DataField : GD_VF_Number, Header : LABELS.labNumber, Visible : true}
		define column GRID_GD_VF_Extension	with arguments {	ControlID : GD_VF_Extension,	DataField : GD_VF_Extension, Header : LABELS.labExtension, Visible : true}
		define column GRID_GD_VF_Notes		with arguments {	ControlID : GD_VF_Notes,	DataField : GD_VF_Notes, Header : LABELS.labNotes, Visible : true}
		define column GRID_GD_VF_Default		with arguments {ControlID : GD_VF_Default,		DataField : GD_VF_Default, Header : LABELS.labDefault, Visible : true}
		define column GRID_GD_VF_ConsNumber	with arguments {	ControlID : GD_VF_ConsNumber,	DataField : GD_VF_ConsNumber, Visible : false}

	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	with triggers
		; on row inserted
		; on row deleted
		; on row updated
		this loads
; ----------------------------------------------------------------------------
	
; TESTGEN : DEFAULTS=6, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VE_SmtpAddr is TextBox in GD_VE_Grid
	with defaults
		tooltip MESSAGES.MSGEmailSupplier
		label LABELS.labGD_VE_SmtpAddr
		max length 241
		mandatory true
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=4, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VE_Notes is TextBox in GD_VE_Grid
	with defaults
		max length 50
		label LABELS.labGD_VE_Notes
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=4, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VE_Default is CheckBox in GD_VE_Grid
	with defaults
		value false
		label LABELS.labGD_VE_Default
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=3, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VE_ConsNumber is TextBox in GD_VE_Grid
 	with defaults
 		visible false
 		label LABELS.labGD_VE_ConsNumber
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=0, ACTIONS=0, TRIGGERS=0
Entity GD_VE_btnInsert is Button in GD_VE_Grid
	with defaults
		label LABELS.labInsert
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=1, ACTIONS=0, TRIGGERS=1
Entity GD_VE_Grid is Grid in frmMain
	with defaults
		; TODO: how to define or set the controls inside? the row definition?
		define column GRID_GD_VE_SmtpAddr		with arguments {ControlID : GD_VE_SmtpAddr,		DataField : GD_VE_SmtpAddr, Header : LABELS.labNumber, Visible : true}
		define column GRID_GD_VE_Notes		with arguments {	ControlID : GD_VE_Notes,	DataField : GD_VE_Notes, Header : LABELS.labNotes, Visible : true}
		define column GRID_GD_VE_Default		with arguments {ControlID : GD_VE_Default,		DataField : GD_VE_Default, Header : LABELS.labDefault, Visible : true}
		define column GRID_GD_VE_ConsNumber	with arguments {	ControlID : GD_VE_ConsNumber,	DataField : GD_VE_ConsNumber, Visible : false}

	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	with triggers
		; on row inserted
		; on row deleted
		; on row updated
		this loads

; ----------------------------------------------------------------------------	

;	TODO: DO THIS SOMEWHERE ELSE - CHECK WITH SEB TOO
;	TODO: 24-07-2014(RG): 1) before send data to SAP to create/modify supplier ->
;	search if vendor exists with the same taxcode (STCD1), 
;	if exists get the number to send to SAP in KNA1.LIFNR. If it appears more than one code, 
;	select the first one and send a warning message to GSS Master Data stating that 'there are multiple partners' 
;	if there are more than one code 

; TESTGEN : DEFAULTS=4, RULES=1, ACTIONS=0, TRIGGERS=1
Entity GD_Ctr_VendorNumber is TextBox in frmMain
	with defaults
		label LABELS.labCustomerNumber
		max length 10
	with rules
		HF_RequestType.Value is 'CC' then
			this visible false
		else
			this visible true
	with triggers
		this loads
; ---------------------------------------------------------------------------- 


;	field visible for all roles.
;	2) field mandatory for  MD clerk in case account group 'YCT6'. 
;		(See APE list in sheet ''Other documents'' to display DDL to select the legal activity and translate from ISIC code in SAP). 
;	3) for account group 'YCT5', use DDL the excel file attached called ''ISIC italian convertion''. 
;		the DDL shown to the 'MDMC3_ENQ' is the collumn C and should then insert specific data in field KNA1-BRSCH and KNA1-BRAN1

; TESTGEN : DEFAULTS=7, RULES=2, ACTIONS=1, TRIGGERS=2
Entity GD_Ctr_Industry is DropDownList in frmMain
	with defaults
		mandatory true
		visible true
		label LABELS.labIndustries
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_Industries with arguments {FlagActive: true, Country : HF_RegionalCountry.Value}

	with actions
		; put the return of this search operation which should return only one value in control GD_Ctr_IindustryCode
		load data from DATASOURCE.MDMC3_ItalyIndustries with output {GD_Ctr_IndustryCode.Value : KNA1_BRAN1}
		

	with rules
		
		; HF_AccountGroup.Value in {'YCT6', 'YVT6'} then
		; 	load data from DATASOURCE.MDMC3_Industries with arguments {FlagActive: true, Country : 'FR'}
		; 	; this equals to this line in original code
		; 	; TODO: WHY? this.m_mdmSessionInfo.IndustryCountry = Business.Constants.Countries.France;
		; 	; most likely unneeded?
		; 	; set value 'FR' in REQUEST.INDUSTRY_COUNTRY

		HF_AccountGroup.Value in {'YCT6', 'YVT6'} and HF_CurrentRole.Value is 'MDMC3_RCO' then
			this mandatory true

		; HF_AccountGroup.Value in {'YCT9', 'YVT9'} then
		; 	load data from DATASOURCE.MDMC3_Industries with arguments {FlagActive: true, Country : 'EN'}
		; 	; this.m_mdmSessionInfo.IndustryCountry = Business.Constants.Countries.France;
		; 	; set value 'EN' in REQUEST.INDUSTRY_COUNTRY
		; 	mandatory false
		
		; DONE with a updating of the table MDMC3_INdustries - NO NEED TO DO THIS FOR BRSCH, ONLY FOR BRAN1
		; HF_RegionalCountry.Value is 'IT' and GD_Ctr_Industry is not empty then
		; 	;	3) for account group 'YCT5', use DDL the excel file attached called ''ISIC italian convertion''. 
		; 	;		the DDL shown to the 'MDMC3_ENQ' is the collumn C and should then insert specific data in field KNA1-BRSCH and KNA1-BRAN1
		; 	load data from DATASOURCE.MDMC3_ItalyIndustries with arguments {FlagActive: true, Code:GD_Ctr_Industry.Value} with output {GD_Ctr_IndustryCode.Value : KNA1_BRAN1} 
		
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value is 'MDMC3_SUS' or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	

	with triggers
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=1, ACTIONS=0, TRIGGERS=1
Entity GD_Ctr_IndustryCode is DropDownList in frmMain
	; always like this except for Italy
	with defaults
		enabled false
		visible false
		label LABELS.lblIndustryCode
		data field DisplayValue
		value field KNA1_BRSCH
		load data from DATASOURCE.MDMC3_ItalyIndustries

	with rules
		HF_RegionalCountry.Value is 'IT' then
			this visible true
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=2, ACTIONS=1, TRIGGERS=2
Entity GD_Ctr_UnsubscribeCMD is DropDownList in frmMain

	with defaults
		label LABELS.labUnsubscribeCMD
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_UnsubscribeOptions
	with actions
		set value GD_Ctr_UnsubscribeCMD.Value in BLK_GD_Ctr_UnsubscribeCMD
	with rules
		HF_RequestType.Value is 'CC' then
			this enable false
			this visile false
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	with triggers
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=0, ACTIONS=0, TRIGGERS=0
Entity V_Country is DropDownList in V_Grid

	with defaults
		data field DisplayName
		value field Code
		label LABELS.labCountry
		load data from DATASOURCE.MDMC3_Countries
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=0, ACTIONS=0, TRIGGERS=0
Entity V_VATNumber is TextBox in V_Grid
	with defaults
		label LABELS.labNumber
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=3, RULES=0, ACTIONS=0, TRIGGERS=0
Entity V_btnInsert is Button in V_Grid
	with defaults
		label LABELS.labInsert
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=4, RULES=1, ACTIONS=0, TRIGGERS=1
Entity V_Grid is Grid in frmMain
	with defaults
		define column GRID_V_Country		with arguments {ControlID : V_Country, DataField : V_Country, Header : LABELS.labCountry,  Visible : true}
		define column GRID_V_VATNumber		with arguments {ControlID : V_VATNumber, 		DataField : V_VATNumber, Header : LABELS.labVATNumber, Visible : true}
		
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	with triggers
		; on row inserted
		; on row deleted
		; on row updated
		this loads

; ----------------------------------------------------------------------------	


; TESTGEN : DEFAULTS=7, RULES=1, ACTIONS=2, TRIGGERS=2
Entity GD_VB_Country is DropDownList in GD_VB_Grid

	with defaults
		data field DisplayName
		value field Code
		label LABELS.labCountry
		load data from DATASOURCE.MDMC3_Countries
		mandatory true
	with rules
		; call SP to find out if selected value is Tax Haven
		DATASOURCE.MDMC3_IsCountryATaxHaven with arguments {CountryCode: B_GD_VB_Country.Value} is true then
			set value '09' in GD_Ctr_RiskClassification

	with actions
		ATTACHMENT mandatory  true  
		set value true in HF_MandatoryAttachment
		; DDLDCComment mandatory  false
	with triggers 
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, RULES=1, ACTIONS=2, TRIGGERS=3
Entity GD_VB_BankKey is TextBox in GD_VB_Grid
	with defaults
		label LABELS.labGD_VD_BankKey
	with rules
		HF_AccountGroup.Value in {'YCT6','YCT9','YVT6','YVT9'} then
			max length 10
		else
			max length 15
	with actions
		ATTACHMENT mandatory  true  
		set value true in HF_MandatoryAttachment
		; DDLDCComment mandatory  false
	with triggers 
		this changes
		GD_VB_Country changes
		this loads

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, RULES=2, ACTIONS=2, TRIGGERS=3
Entity GD_VB_BankAccount is TextBox in GD_VB_Grid

	with defaults
		label LABELS.labGD_VD_BankAccount
	with rules
		HF_AccountGroup.Value in {'YCT6','YCT9','YVT6','YVT9'} then
			max length 11
		else
			max length 18
		B_GD_VB_Country.Value is 'BE' and GD_VB_BankAccount.Value.Length >= 3 then
			set value SUBSTRING(GD_VB_BankKey,0,3) in GD_VB_BankKey
	with actions
		ATTACHMENT mandatory  true  
		set value true in HF_MandatoryAttachment
		; DDLDCComment mandatory  false
	with triggers 
		on change
		B_GD_VB_Country changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, ACTIONS=2, TRIGGERS=1
Entity GD_VB_BankControlKey is TextBox in GD_VB_Grid

	with defaults
		max length 2
		label LABELS.labGD_VD_BankControlKey
	with actions
		ATTACHMENT mandatory  true  
		set value true in HF_MandatoryAttachment
		; DDLDCComment mandatory  false
	with triggers 
		on change	
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=2, ACTIONS=1, TRIGGERS=3
Entity GD_VB_IBAN is TextBox in GD_VB_Grid
	with defaults
		label LABELS.labGD_VD_IBAN
	with actions
		; TODO: POPULATION FOR THE UNDERLYING TABLE HAS TO 'BE' FINISHED
		load data from DATASOURCE.MDMC3_GetIBANConfigurationForCountry with arguments {CountryCode:B_GD_VB_Country.Value, IBAN:B_GD_VB_IBAN.Value} with output {B_GD_VB_BankKey:BankKey,B_GD_VB_BankAccount:BankAccount,B_GD_VB_BankControlKey:BankControlKey}
	with rules
		HF_AccountGroup.Value in {'YCT6','YCT9','YVT6','YVT9'} then
			max length 27
		else
			max length 35
	with actions
		ATTACHMENT mandatory  true  
		set value true in HF_MandatoryAttachment
		; DDLDCComment mandatory  false
	with triggers 
		this changes
		B_GD_VB_Country changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4 RULES=2, TRIGGERS=1
Entity GD_VB_PartBankType is TextBox in GD_VB_Grid
	with defaults
		label LABELS.labGD_VB_PartBankType
		max length 4
	with rules
		HF_AccountGroup.Value not in {'YCT6','YCT9','YVT6','YVT9'} then
			max length 4
	with triggers 
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4
Entity GD_VB_BankReferDetails is TextBox in GD_VB_Grid
	with defaults
		max length 20	
		label LABELS.labGD_VB_BankReferDetails

; ---------------------------------------------------------------------------- 

; TODO: TO 'BE' CONNECTED IN THE WEB SERVICES TO AND FROM SAP
; TESTGEN : DEFAULTS=3
Entity GD_VB_SWIFT is TextBox in frmMain
	with defaults
		label LABELS.labGD_VD_SWIFT

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, ACTIONS=2, TRIGGERS=1
Entity GD_VB_AccountHolder is TextBox in GD_VB_Grid
	with defaults
		label LABELS.labGD_VD_AccountHolder
		value GD_Adr_Name.Value
	with actions
		ATTACHMENT mandatory  true  
		set value true in HF_MandatoryAttachment
		; DDLDCComment mandatory  false
	with triggers 
		this changes
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, RULES=1, TRIGGERS=1
Entity KNA1_XZEMP is CheckBox in GD_VB_Grid
	with defaults
		label LABELS.lblKNA1_XZEMP
		value true
		visible false
	with rules
		HF_CompanyCode.Value in {'5101', '5109'} or HF_AccountGroup.Value in {'YCT1','YCT2','YCT9'} then
			visible true
	with triggers 
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4
Entity GD_VB_BankCity is TextBox in GD_VB_Grid
	with defaults
		label LABELS.labGD_VD_BankCity
		max length 20

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=6, TRIGGERS=1
Entity GD_VB_btnInsert is Button in GD_VB_Grid
	with defaults
		label LABELS.labInsert
	with rules

		; TODO: -bank country Belgium: validate format 111-1111111-11 and position of bank key in bank account
	
		; TODO: CHECK WITH SEB, how to distinguish between warnings (continue processing) and errors (Stop processing) in messaging
		HF_RegionalCountry.Value is 'ES' then
			set value MESSAGES.MSGCustomerBankSpain in MESSAGE_POPUP
		
		HF_RegionalCountry.Value is 'IT' or GD_VB_Country.Value is 'IT' then and GD_VB_BankKey is empty then
			set value MESSAGES.ERRBankItaly in MESSAGE_POPUP
		
		HF_RegionalCountry.Value is 'IT' or GD_VB_Country.Value is 'IT' then and GD_VB_BankKey.Value.Length != 10 then
			set value MESSAGES.ERRBankItaly in MESSAGE_POPUP
		
		HF_RegionalCountry.Value is 'IT' and B_GD_VB_Country.Value is 'IT' and B_GD_VB_SWIFT.Value.Length is not 11 then
			set value MESSAGES.ERRfieldSWIFT in MESSAGE_POPUP
		
		B_GD_VB_IBAN is empty and B_GD_VB_BankAccount is empty then
			set value MESSAGES.ERRfieldIban in MESSAGE_POPUP
		
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
			this visible false
	with triggers 
		this loads
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=14, RULES=1, ACTIONS=2, TRIGGERS=1
Entity GD_VB_Grid is Grid in frmMain
	with defaults
		define column GRID_GD_VB_Country		with arguments {ControlID : GD_VB_Country,   DataField : GD_VB_Country, Header : LABELS.labCountry,  Visible : true}
		define column GRID_GD_VB_BankKey		with arguments {ControlID : GD_VB_BankKey,		DataField : GD_VB_BankKey, Header : LABELS.labBankKey, Visible : true}
		define column GRID_GD_VB_BankAccount	with arguments {ControlID : GD_VB_BankAccount,	DataField : GD_VB_BankAccount, Header : LABELS.labBankAccount, Visible : true}
		define column GRID_GD_VB_BankControlKey	with arguments {ControlID : GD_VB_BankControlKey,	DataField : GD_VB_BankControlKey, Header : LABELS.labBankControlKey, Visible : true}
		define column GRID_GD_VB_IBAN			with arguments {ControlID : GD_VB_IBAN,	DataField : GD_VB_IBAN, Header : LABELS.labIBAN, Visible : true}
		define column GRID_GD_VB_SWIFT		with arguments {	ControlID : GD_VB_SWIFT,   DataField : GD_VB_SWIFT, Header : LABELS.labSWIFT, Visible : false}
		define column GRID_GD_VB_NameOfBank	with arguments {	ControlID : GD_VB_NameOfBank,   DataField : GD_VB_NameOfBank, Header : LABELS.labNameOfBank, Visible: false}
		define column GRID_GD_VB_AccountHolder	with arguments {ControlID : GD_VB_AccountHolder,	DataField : GD_VB_AccountHolder, Header : LABELS.labAccountHolder, Visible : true}
		define column GRID_GD_VB_BankCity	with arguments {	ControlID : GD_VB_BankCity,   DataField : GD_VB_BankCity, Header : LABELS.labBankCity, Visible : false}
		define column GRID_GD_VB_PartBankType	with arguments {ControlID : GD_VB_PartBankType ,	DataField : GD_VB_PartBankType, Header : LABELS.labPartBankType, Visible : false}
		define column GRID_GD_VB_BankReferDetails	with arguments { ControlID : ,	DataField : GD_VB_BankReferDetails, Header : LABELS.labBankReferDetails, Visible: false}
		define column GRID_RelevantFlag	with arguments {ControlID : RelevantFlag, DataField : RelevantFlag, Visible : false}

	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		
	with actions
		ATTACHMENT mandatory  true  
		set value true in HF_MandatoryAttachment
		; DDLDCComment mandatory  false

	with triggers
		; on row inserted
		; on row deleted
		; on row updated
		this loads
; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=4
Entity GD_VB_XEZER is CheckBox in frmMain
	with defaults
		label LABELS.labGD_VB_XEZER
		value true

; ----------------------------------------------------------------------------	

;	TODO: PENDING REFINEMENT
;	MDMC3_LegalForms for informing fields isnaturalperson and customerclassification and set dunning procedure with this data
;	4) this field is not retrieved from SAP
;	5) this field is sent to SAP
;	6) this field is used to set values in creations from scratch, regional country France, in XKNKK.GRUPP, XKNKK.CTLPC and XKNKK.DBRTG with table MDMC3_CreditLimitTemplate
;	7) see attachment.

; TESTGEN : DEFAULTS=6, RULES=5, ACTIONS=1, TRIGGERS=2
Entity GD_Ctr_GFORM is DropDownList in frmMain
	with defaults
		label LABELS.labLegalForm
		visible false
		; data source is same for vendors and customers
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_LegalForms with arguments {FlagActive : true }

	with actions
		load data from DATASOURCE.MDMC3_LegalForms with arguments {FlagActive : true, Code : GD_Ctr_GFORM.Value } with output {GD_Ctr_IsNaturalPerson.Value : KNA1_STKZN, GD_Ctr_CustomerClassification.Value : KNA1_KUKLA}

	with rules

		HF_AccountGroup.Value in {'YCT6', 'YVT6', 'YCT7', 'YCT9'} and HF_CurrentRole is 'MDMC3_CLERK' then
			this visible true
			this mandatory true

		HF_AccountGroup.Value in {'YCT7', 'YCT9'} then
			; TODO: check if this name is correct - it's the tab for CREDIT LIMIT
			tab_CL visible true

		HF_AccountGroup.Value not in {'YCT7', 'YCT9'} then
			; TODO: check if this name is correct - it's the tab for CREDIT LIMIT
			tab_CL visible true

		HF_CustomerCountry.Value in {'FR', 'GF', 'GP', 'RE', 'MQ', 'YT'} then
			this visible true

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	


	with triggers
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, RULES=16, TRIGGERS=2
Entity GD_Ctr_PIVA is TextBox in frmMain

	with defaults
		label LABELS.lblLocalVATTaxCode
		max length 16

	with rules

		HF_AccountGroup.Value is 'YCT1' then
			max length 10
			; TODO: CHECK WITH SEB THIS SORT OF CONCATENATION.... OR MOVE TO A SPECIFIC DATASOURCE FOR THIS?
			set value GD_Adr_Country.Code in GD_Ctr_VATRegistrationNumber
			add value GD_Ctr_PIVA.Value in GD_Ctr_VATRegistrationNumber

		HF_AccountGroup.Value is 'YCT2' then
			max length 8
			set value GD_Adr_Country.Code in GD_Ctr_VATRegistrationNumber
			add value GD_Ctr_PIVA.Value in GD_Ctr_VATRegistrationNumber

		HF_AccountGroup.Value is 'YCT3' then
			max length 9

		HF_AccountGroup.Value is 'YCT3' and HF_RequestType.Value is 'CC' and HF_RegionalCountry.Value is not 'ES' then
			set value GD_Adr_Country.Code in GD_Ctr_VATRegistrationNumber
			add value GD_Ctr_PIVA.Value in GD_Ctr_VATRegistrationNumber

		HF_AccountGroup.Value is 'YCT3' and GD_Ctr_PIVA.Value starts with {'P','Q','S'} then
			set value 'G' in GD_Ctr_CustomerClassification

		HF_AccountGroup.Value is 'YCT3' and GD_Ctr_PIVA.Value starts with {'X','0','1','2','3','4','5','6','7','8','9'} then
			set value true in GD_Ctr_IsNaturalPerson

		HF_AccountGroup.Value is 'YCT3' and GD_Ctr_PIVA.Value not starts with {'X','0','1','2','3','4','5','6','7','8','9'} then
			set value false in GD_Ctr_IsNaturalPerson

		HF_AccountGroup.Value is 'YCT4' then
			max length 9
			set value GD_Adr_Country.Code in GD_Ctr_VATRegistrationNumber
			add value GD_Ctr_PIVA.Value in GD_Ctr_VATRegistrationNumber

		HF_AccountGroup.Value is 'YCT4' and GD_Ctr_VATRegistrationNumber starts with {'1','2','3'} then
			set value true in GD_Ctr_IsNaturalPerson
			GD_Ctr_TaxCode2 mandatory true
			GD_Ctr_TaxCode2 max length 11
			; TODO: DOES NOT WORK WELL
			; GD_Ctr_TaxCode2 validation '^[0-9]{11}$'		
		HF_AccountGroup.Value is 'YCT4' and GD_Ctr_VATRegistrationNumber not starts with {'1','2','3'} then
			set value false in GD_Ctr_IsNaturalPerson
			
		HF_AccountGroup.Value is 'YCT5' then
			max length 16
						
		HF_AccountGroup.Value is 'YCT6' then
			max length 14
			set value GD_Ctr_PIVA.Value in GD_Ctr_TaxCode1
			set value SUBSTRING(GD_Adr_Country.Code,0,9) in GD_Ctr_TaxCode2

		HF_AccountGroup.Value is 'YCT6' and GD_Adr_Country.Value in {'FR','GF','RP','MQ','RE'} then
			this mandatory true
			validation ^[0-9]{14}$

		HF_AccountGroup.Value is 'YCT6' and GD_Adr_Country.Value in {'MC','NC','PF','PM','WE','YT'} then
			this visible false
			GD_Ctr_TaxCode1 mandatory false
			GD_Ctr_TaxCode1 enabled true
			GD_Ctr_TaxCode2 mandatory false
			GD_Ctr_TaxCode2 enabled true
			GD_Ctr_VATRegistrationNumber mandatory false
			GD_Ctr_VATRegistrationNumber enabled true
			set value GD_Ctr_PIVA.Value in GD_Ctr_TaxCode1
			set value SUBSTRING(GD_Ctr_PIVA.Value,9) in GD_Ctr_TaxCode1

		HF_AccountGroup.Value is 'YCT7' then
			set value GD_Ctr_PIVA.Value in GD_Ctr_TaxCode1
			set value GD_Adr_Country.Code in GD_Ctr_VATRegistrationNumber
			add value GD_Ctr_PIVA.Value in GD_Ctr_VATRegistrationNumber

		; HF_RequestType.Value is 'CC' or HF_RegionalCountry.Value is 'FR' then
		; 	this enable true
		; HF_RegionalCountry.Value is 'IT' and HF_RequestType.Value is 'CC' then
		; 	this visible true
		; HF_RegionalCountry.Value is 'IT' and HF_RequestType.Value is not 'CC' then
		; 	this visible false
		; 
		; 
		; HF_AccountGroup.Value in 'YCT5' is 'YCT3' then
		; 	max length 11
		; HF_AccountGroup.Value is 'YCT6' and HF_RequestType.Value is 'CC' and GD_Ctr_IsNaturalPerson.Value is false then
		; 	this mandatory true
		; HF_AccountGroup.Value is 'YCT6' and HF_CurrentRole.Value in {'MDMC3_CLERK', 'MDMC3_ENQ'} then
		; 	this enable true
		; HF_AccountGroup.Value is 'YCT9' then 
		; 	max length 5
		; 	this mandatory false
		; GD_Adr_Country.Value is 'GR' and HF_RequestType.Value is 'CC' then
		; 	this mandatory false
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	

	with triggers
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=2, TRIGGERS=1
Entity GD_Ctr_CF is TextBox in frmMain

	with defaults
		label LABELS.labCF
		visible false
	with rules
		HF_CompanyCode.Value in {'5180','5116','596G'} and HF_RequestType.Value is 'CC' then
			this enable true
			this visible true

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
			
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

Entity GD_Ctr_IFANumber is TextBox in frmMain

	with defaults
		label LABELS.labIFANumber
		enable false
		max length 20
		enabled false

	with rules
		HF_RequestType.Value is 'CC' then
			GD_Ctr_IFANumber enabled false

		HF_RequestType.Value is 'CM' then
			this visible true
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
				
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TODO: THE RULES ARE A MESS, SPECIALLY FOR CUSTOMER COUNTRY
Entity GD_Ctr_TaxCode1 is TextBox in frmMain

	with defaults
		label LABELS.labTaxCode1
		max length 16
	with rules
		GD_Adr_Country.Value is 'GR' and HF_RequestType.Value is 'CC' then
			this mandatory false
		GD_Adr_Country.Value is 'GR' and HF_RequestType.Value is not 'CC' then
			this visible false
		GD_Adr_Country.Value is 'IT' then
			this enable false
			max length 16
		GD_Adr_Country.Value is 'IT' and GD_Ctr_IsNaturalPerson.Value is true then
			this mandatory true
		HF_RegionalCountry.Value in {'BE','LU'} and HF_CurrentRole.Value is 'MDMC3_CLERK' then
			this mandatory false
			GD_Ctr_VATRegistrationNumber mandatory false


		; 'YCT6' countries
		GD_Adr_Country.Value in {'FR','GF','GP','MQ','RE'} and HF_RequestType.Value is not 'CC' then
			this enable false
			set value SUBSTRING(GD_Ctr_TaxCode1.Value,0,9) in GD_Ctr_TaxCode2

		HF_AccountGroup.Value is 'YCT9' and HF_RequestType.Value is not 'CC' then
			this enable false
		HF_AccountGroup.Value is 'YCT6' and HF_RequestType.Value is 'CC' and GD_Ctr_IsNaturalPerson.Value is false then
			this mandatory true
		HF_AccountGroup.Value is 'YCT9' then
			mandatory false
		HF_AccountGroup.Value in {'YVT6', 'YCT6', 'YVT9', 'YCT9'} and HF_RequestType.Value is 'CC' and REQUEST.TaxCode1_IsMandatory then
			this mandatory true

		GD_Adr_Country.Value is 'GR' and HF_RequestType.Value is 'CC' then
			this mandatory false
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
			
	with triggers
		this loads	
		this changes
; ---------------------------------------------------------------------------- 

Entity GD_Ctr_TaxCode2 is TextBox in frmMain

	with defaults
		label LABELS.labTaxCode2
	with rules
		HF_RegionalCountry.Value is 'IT' then
			this enable false
		HF_AccountGroup.Value is 'YCT5' then
			max length 11
			validation ^[0-9]{11}$
		HF_AccountGroup.Value is 'YCT6' and HF_RequestType.Value is not 'CC' then
			this enable false
		HF_AccountGroup.Value is 'YCT6' and HF_RequestType.Value is 'CC' and GD_Ctr_IsNaturalPerson.Value is false then
			this mandatory true
		HF_AccountGroup.Value is 'YCT6' then
			max length 9
		HF_AccountGroup.Value is 'YCT6' and HF_CurrentRole.Value then
			this enable true
		HF_AccountGroup.Value is 'YCT9' then
			max length 9
		HF_AccountGroup.Value is 'YCT9' then
			mandatory false
		HF_AccountGroup.Value is 'YCT9' and HF_RequestType.Value is not 'CC' then
			this enable false
		HF_AccountGroup.Value in {'YVT6', 'YCT6', 'YVT9', 'YCT9'} and HF_RequestType.Value is 'CC' and REQUEST.TaxCode2_IsMandatory then
			this mandatory true
		GD_Adr_Country.Value is 'GR' and HF_RequestType.Value is 'CC' then
			this mandatory true
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		
	with triggers
		this loads		
; ---------------------------------------------------------------------------- 

Entity GD_Ctr_VATRegistrationNumber is TextBox in frmMain

	with defaults
		label LABELS.labVATRegistrationNumber
		
	with rules
		
		REQUEST.VAT_IsMandatory is true and HF_RequestType.Value is 'CC' then
			this mandatory true
		HF_RegionalCountry.Value is 'IT' then
			this enable false
		HF_RegionalCountry.Value is 'ES' then
			this enable false
		HF_RegionalCountry.Value is 'IT' and HF_CurrentRole.Value is 'MDMC3_CLERK' and HF_RequestType.Value is 'CC' then
			this enable true
		HF_AccountGroup.Value is 'YCT6' and HF_RequestType.Value is 'CC' and GD_Ctr_IsNaturalPerson.Value is false then
			this mandatory true
		HF_AccountGroup.Value in {'YVT6', 'YCT6', 'YVT9', 'YCT9'} and HF_RequestType.Value is 'CC' and REQUEST.VAT_IsMandatory then
			this mandatory true
		GD_Adr_Country.Value is 'GR' and HF_RequestType.Value is 'CC' then
			this mandatory true
		REQUEST.VAT_IsMandatory and HF_RequestType.Value is 'CC' then
			this mandatory true
		HF_AccountGroup.Value is 'YCT1' then
			; by default take this value
			set value GD_Adr_Country.Value in GD_Ctr_VATRegistrationNumber
			add value GD_Ctr_PIVA.Value in GD_Ctr_VATRegistrationNumber
			; set value true in GD_Ctr_SalesPurTax ; TODO: DEPENDING ON WHAT WE DO WITH THIS FIELD


		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		
	with triggers
		this loads		
; ---------------------------------------------------------------------------- 

; TODO: CHECK WITH MI / RG what to do with this field...
; Entity GD_Ctr_SalesPurTax is CheckBox in frmMain

; ---------------------------------------------------------------------------- 


; TESTGEN : DEFAULTS=2, RULES=2, TRIGGERS=1
Entity GD_Com_TransportZone is TextBox in frmMain
	with defaults
		visible false

	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		HF_CustomerCountry.Value is 'ES' and GD_Com_TransportZone.Value is empty then
			set value substring(GD_Adr_PostalCode,2) in GD_Com_TransportZone.Value 
		
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESGTEN : DEFAULTS=3, RULES=2, TRIGGERS=1
; TODO: CHECK FOR VISIBLE IN DIFFERENT FLOWTYPES
Entity GD_MainlyMilitary is RadioButton in frmMain

	with defaults
		label LABELS.labGD_MainlyMilitary

	with rules
		HF_RequestType.Value is 'CC' then
			mandatory true
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	with triggers
		this loads	
; ---------------------------------------------------------------------------- 

; TESGTEN : DEFAULTS=3, RULES=2, TRIGGERS=1
; TODO: CHECK FOR VISIBLE IN DIFFERENT FLOWTYPES
Entity GD_MainlyCivilian is RadioButton in frmMain

	with defaults
		label LABELS.labGD_MainlyCivilian

	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		HF_RequestType.Value is 'CC' then
			mandatory true
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESGTEN : DEFAULTS=3, RULES=1, TRIGGERS=1
; TODO: CHECK FOR VISIBLE IN DIFFERENT FLOWTYPES
Entity GD_Nuclear is CheckBox in frmMain

	with defaults
		label LABELS.labGD_Nuclear
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false		
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESGTEN : DEFAULTS=3
; TODO: CHECK FOR VISIBLE IN DIFFERENT FLOWTYPES
Entity labGD_FreeZone is Label in frmMain

	with defaults
		label LABELS.labGD_FreeZone
; ---------------------------------------------------------------------------- 

; TESGTEN : DEFAULTS=3
; TODO: CHECK FOR VISIBLE IN DIFFERENT FLOWTYPES
Entity labGD_Embassy is Label in frmMain

	with defaults
		label LABELS.labGD_Embassy
; ---------------------------------------------------------------------------- 

;TESGTEN : DEFAULTS=6, RULES=4, TRIGGERS=2
Entity CC_CO_ReconAccount is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labCC_CO_ReconAccount
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_ReconciliationAccounts
		value 0024110000
	with rules
		GD_Adr_Country is 'GR' and GD_Ctr_CustomerClassification.Value is 'G' and GD_Ctr_IsNaturalPerson.Value is false then
			this visible true
			this mandatory true

		GD_Adr_Country is 'GR' and GD_Ctr_CustomerClassification.Value is 'G' and GD_Adr_Country.Value is 'GR' then
			this visible true

		GD_Adr_Country is 'GR' and GD_Ctr_CustomerClassification.Value is 'G' and GD_Adr_Country.Value is not 'GR' then
			set value 0024110050 in CC_CO_ReconAccount

		; TODO: CHECK THIS ONE IN CODE
		; HF_RequestType.Value in {'CC', 'CC_CC', 'CC_SO'} then
		; 	set value 0024110090 in CC_CO_ReconAccount

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false

	with triggers
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; '2.6.14(MI) GSS, please, check and provide the business rule. For RC Greece... I don't undertand the meaning of ''if customer is na ICC''
; 19-06-2014(RG)
; 1) Default values for all type of requests (all types of creation, changes), independently if value from SAP is empty but enquirer can change:
; 1.4) if company code Spain-> 3E60
; 1.5) if company code Belgium and Luxembourg-> 1109
; 1.6) if company code Portugal: If company code Portugal ('5240') -> not visible
; 
; 1,9) if company code greece ('5150') and Italy ('5180', '596G') value default blank
; '

; TESTGEN : DEFAULTS=7, RULES=9, TRIGGERS=1
Entity CC_PT_PaymentTerms is DropDownList in frmMain

	with defaults
		label LABELS.labPTPaymentTerms
		mandatory true
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_PaymentTerms with arguments {FlagActive : true, ClusterCountryCode : HF_RegionalCountry.Value}

	with rules

		HF_CompanyCode.Value is '5140' and GD_Adr_Country.Value in {'FR','GF', 'GP', 'RE', 'MQ', 'YT', 'NC', 'PF', 'PM', 'WF', 'MC'} then
			set value '6115' in CC_PT_PaymentTerms
			set value '6115' in SO_TermsOfPaymentKey

		HF_CompanyCode.Value is '5140' and GD_Adr_Country.Value not in {'FR','GF', 'GP', 'RE', 'MQ', 'YT', 'NC', 'PF', 'PM', 'WF', 'MC'} then
			set value '6000' in CC_PT_PaymentTerms
			set value '6000' in SO_TermsOfPaymentKey
			
		HF_RegionalCountry.Value is 'PT' and HF_RequestType.Value in {'CC', 'CC_CC'} then
			this visible false
			CC_PT_PaymentTerms mandatory false
	
		HF_RegionalCountry.Value in {'BE','LU'} and HF_RequestType.Value in {'CC', 'CC_CC'} then
			set value '1109' in CC_PT_PaymentTerms

		HF_RegionalCountry.Value is 'ES' and HF_RequestType.Value in {'CC', 'CC_CC'} then
			; set value '3M60' in CC_PT_PaymentTerms
			set value '3E60' in CC_PT_PaymentTerms

		HF_RegionalCountry.Value is 'LU' and HF_RequestType.Value in {'CC', 'CC_CC'} then
			set value '1113' in CC_PT_PaymentTerms
			set value '1113' in SO_TermsOfPaymentKey

		; HF_CompanyCode.Value is '5140' and HF_RequestType.Value in {'CC', 'CC_CC'} and HF_CustomerCountry.Value in {'FR','GF', 'GP', 'RE', 'MQ', 'YT', 'NC', 'PF', 'PM', 'WF', 'MC'} then
		; 	set value '6115' in CC_PT_PaymentTerms
		; 	set value '6115' in SO_TermsOfPaymentKey
		; 
		; HF_CompanyCode.Value is '5140' and HF_RequestType.Value in {'CC', 'CC_CC'} and HF_CustomerCountry.Value not in {'FR','GF', 'GP', 'RE', 'MQ', 'YT', 'NC', 'PF', 'PM', 'WF', 'MC'} then
		; 	set value '6000' in CC_PT_PaymentTerms
		; 	set value '6000' in SO_TermsOfPaymentKey

		; HF_CompanyCode.Value in {'5150','5180','596G'} and HF_RequestType.Value in {'CC', 'CC_CC'} then
		HF_CompanyCode.Value in {'5150','5180','596G'} then
			set value '' in CC_PT_PaymentTerms

		HF_RegionalCountry.Value is 'FR' then
			this mandatory true

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TODO: '2.6.14(MI) GSS, please, check and provide the business rule. Additionally, CR ''IA_SEPA_payment methods'' ispending on clarification in your side yet
; TESTGEN : DEFAULTS=6, RULES=10, TRIGGERS=2
Entity CC_PT_PaymentMethods is DropDownList in frmMain

	with defaults
		label LABELS.labPTPaymentMethods
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_PaymentMethods with arguments {FlagActive : true, ClusterCountryCode: HF_RegionalCountry.Value}

	with rules

		HF_RegionalCountry.Value in {'ES', 'FR'} then
			this mandatory true

		HF_RegionalCountry.Value is 'PT' then
			this mandatory false

		HF_RegionalCountry.Value is 'IT' and CC_PT_PaymentMethods.Value is 'L' then
			B_GD_VB_BankKey mandatory true

		HF_RegionalCountry.Value is 'PT' and CC_PT_PaymentMethods.Value in {'P', 'M'} then
			B_GD_VB_BankKey mandatory true
			
		HF_RegionalCountry.Value is 'FR' and CC_PT_PaymentMethods.Value in {'M', 'A'} then
			B_GD_VB_BankKey mandatory true

		HF_CurrentRole.Value is ENQ and HF_RequestType.Value not in {'CM', 'CM_BLK'} and HF_RegionalCountry.Value is 'ES' and HF_CustomerCountry.Value is 'ES' then
			set value 'G' in CC_PT_PaymentMethods

		HF_CurrentRole.Value is ENQ and HF_RequestType.Value not in {'CM', 'CM_BLK'} and HF_RegionalCountry.Value is 'ES' and HF_CustomerCountry.Value is not 'ES' then
			set value 'Y' in CC_PT_PaymentMethods

		HF_CurrentRole.Value is ENQ and HF_RequestType.Value not in {'CM', 'CM_BLK'} and HF_RegionalCountry.Value is 'FR' and HF_CustomerCountry.Value is 'FR' then
			set value 'G' in CC_PT_PaymentMethods

		HF_CurrentRole.Value is ENQ and HF_RequestType.Value not in {'CM', 'CM_BLK'} and HF_RegionalCountry.Value is 'FR' and HF_CustomerCountry.Value is not 'FR' then
			set value 'Y' in CC_PT_PaymentMethods

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	

	with triggers
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=2, TRIGGERS=1
Entity CC_PT_ClearingWithCustomer is CheckBox in frmMain

	with defaults
		label LABELS.labCC_PT_ClearingWithCustomer
	with rules
		; TODO: CHECK WITH SEB MODEL
		HF_CompanyCode.Value in {'5101', '5109'} and REQUEST.CC_PT_ClearingWithCustomer then
			set value true in CC_PT_ClearingWithCustomer
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=2, TRIGGERS=1
Entity CC_PT_IndividualPayment is CheckBox in frmMain

	with defaults
		label LABELS.labSinglePayment

	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		; TODO: WWHAT ABOUT THIS?
		HF_CompanyCode.Value in {'5101', '5109'} then
			set value true in CC_PT_IndividualPayment
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=12, TRIGGERS=1
Entity CC_CO_AccountingClerk is DropDownList in frmMain

	with defaults
		label LABELS.labCC_CO_AccountingClerk
		load data from DATASOURCE.MDMC3_AccountingClerks with arguments {FlagActive : true, CompanyCode : HF_CompanyCode.Value}
		data field DisplayName
		value field Code

	with rules
		
		HF_RegionalCountry.Value is 'FR' and HF_CurrentRole.Value is 'MDMC3_CLERK' then
			this mandatory true

		HF_RegionalCountry.Value in {'IT', 'GR'} then
			this mandatory false

		HF_RegionalCountry.Value is 'FR' then
			this mandatory true

		; Seems deprecated
		; HF_RequestType.Value in {'CC','CC_CC'} and HF_RegionalCountry.Value is 'ES' then
		; 	set value 81 in CC_CO_AccountingClerk
		; 	set value 81 in CC_CO_AccountingClerk.OldDisplayValue

		HF_RequestType.Value in {'CC','CC_CC'} and HF_CompanyCode.Value is '5109' then
			set value 'MM' in CC_CO_AccountingClerk
			set value 'MM' in CC_CO_AccountingClerk.OldDisplayValue

		HF_RequestType.Value in {'CC','CC_CC'} and HF_SalesOrg.Value is '1E0E' then
			set value '95' in CC_CO_AccountingClerk
			set value '95' in CC_CO_AccountingClerk.OldDisplayValue

		HF_RequestType.Value in {'CC','CC_CC'} and HF_SalesOrg.Value in {'10L0','10Q1'} then
			set value '87' in CC_CO_AccountingClerk
			set value '87' in CC_CO_AccountingClerk.OldDisplayValue

		HF_RequestType.Value in {'CC','CC_CC'} and HF_SalesOrg.Value in {'10A0', '10A1', '10B0'} then
			set value '93' in CC_CO_AccountingClerk
			set value '93' in CC_CO_AccountingClerk.OldDisplayValue

		HF_RequestType.Value in {'CC','CC_CC'} and HF_SalesOrg.Value in {'10F0', '10F1', '10F2', '10F3', '10G0', '10G1', '10H0', '10I0', '10P0', '10Z0'} then
			set value '92' in CC_CO_AccountingClerk
			set value '92' in CC_CO_AccountingClerk.OldDisplayValue

		HF_RequestType.Value in {'CC','CC_CC'} and HF_CompanyCode.Value is '563M' then
			set value '20' in CC_CO_AccountingClerk
			set value '20' in CC_CO_AccountingClerk.OldDisplayValue

		HF_RequestType.Value in {'CC','CC_CC'} and HF_RegionalCountry.Value in {'ES','AD'} then
			load data from DATASOURCE.MDMC3_AccountingClerkByPostCodeAndSalesArea with arguments {PostCode : SUBSTRING(GD_Adr_PostalCode,2), SalesArea: HF_SalesOrg.Value} in CC_CO_AccountingClerk
		
		HF_RequestType.Value in {'CC','CC_CC'} and HF_CompanyCode.Value in {'5240','5101','5109'} then
			load data from DATASOURCE.MDMC3_AccountingClerksFORPTBELU with arguments { SalesOrganization: HF_SalesOrg.Value, FlagActive: true} with output {CC_CO_AccountingClerk: AccountingClerk}

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
				
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TODO: ;5)specific rules for company '5140' see attachemnt RulesDunningArea'5140' and sheet ''Dunning Procedure'' in sheet “Other documents”
; TODO: THIS HAS TO 'BE' MOVED TO THE WEB SERVICE
		
; TESTGEN : DEFAULTS=6, RULES=11, TRIGGERS=1
Entity CC_DD_DunningProcedure is DropDownList in frmMain
	with defaults
		label LABELS.labDDDunningprocedure
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDM_DunningProcedure with arguments {FlagActive : true, ClusterCountryCode: HF_RegionalCountry.Value}
		visible false

	with rules

		HF_RegionalCountry.Value is 'FR' then
			this mandatory true

		HF_RequestType.Value in {'CC','CC_CC'} and HF_RegionalCountry.Value is 'FR' then
			this visible true

		HF_RequestType.Value not in {'CC','CC_CC'} then
			this visible true
			
		HF_RequestType.Value in {'CC','CC_CC'} and HF_RegionalCountry.Value is 'ES' then
			set value 'Y302' in CC_DD_DunningProcedure

		HF_RequestType.Value in {'CC','CC_CC'} and HF_RegionalCountry.Value is 'IT' then
			set value 'Y502' in CC_DD_DunningProcedure

		HF_RequestType.Value in {'CC','CC_CC'} and HF_RegionalCountry.Value is 'PT' then
			set value 'Y400' in CC_DD_DunningProcedure

		HF_RequestType.Value in {'CC','CC_CC'} and HF_RegionalCountry.Value is 'BE' and GD_Ctr_CustomerClassification.Value is 'NG' then
			set value 'Y104' in CC_DD_DunningProcedure
		
		HF_RequestType.Value in {'CC','CC_CC'} and HF_RegionalCountry.Value is 'BE' and GD_Ctr_CustomerClassification.Value is 'G' then
			set value 'Y102' in CC_DD_DunningProcedure

		HF_RequestType.Value in {'CC','CC_CC'} and HF_RegionalCountry.Value is 'LU' then
			set value 'Y203' in CC_DD_DunningProcedure

		HF_RequestType.Value in {'CC','CC_CC'} and HF_CustomerCountry.Value is 'GR' then
			set value 'Y704' in CC_DD_DunningProcedure

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=1, TRIGGERS=1
; SEEM USELESS, never made visible
Entity CC_DD_DunningArea is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labDunningArea
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TODO: INJECT ABOUT KNB1_XAUSZ in WEB SERVICE?  -- CHECK WITH SEB ABOUT HIDDEN FIELDS, CAN WE INCLUDE HERE?
; TODO: ALSO ABOUT CC_DD_DunningClerk

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=5, ACTIONS=2, TRIGGERS=2
Entity CC_AR_PledgeIndicator is DropDownList in frmMain

	with defaults
		label LABELS.labARPledgeIndicator
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_GetARPledgeIndicators with arguments {CompanyCode : HF_CompanyCode.Value}

	with rules
		
		HF_CompanyCode.Value in { '5109', '4297', '461D', '596G' } then
			this visible false

		HF_RequestType.Value in {'CC','CC_CC'} and CC_AR_PledgeIndicator.OldDisplayValue is empty then
			set value WE in CC_AR_PledgeIndicator
			set value WE in CC_AR_PledgeIndicator.OldDisplayValue

		HF_RegionalCountry.Value in {'ES','FR','GR'} and CC_AR_PledgeIndicator.OldDisplayValue is empty then
			set value '' in CC_AR_PledgeIndicator
			set value '' in CC_AR_PledgeIndicator.OldDisplayValue

		HF_CompanyCode.Value is '5101' and CC_AR_PledgeIndicator.OldDisplayValue is empty then
			set value '' in CC_AR_PledgeIndicator
			set value '' in CC_AR_PledgeIndicator.OldDisplayValue

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
				
	with actions
		; ATTACHMENT mandatory  false
		set value true in HF_MandatoryComment
		DDLDCComment mandatory  true  

	with triggers 
		on change
		this loads

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=7, RULES=8, TRIGGERS=2
Entity CC_AM_SortKey is DropDownList in frmMain
	with defaults
		label LABELS.labAMSortKeys
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDM_SortKeys with arguments {FlagActive : true, ClusterCountryCode : HF_RegionalCountry.Value}
		mandatory
		visible false

	with rules

		; TODO: ACCESS TO MODEL EXPOSING OBTAINED SAP DATA
		REQUEST.CC_AM_SortKey is not empty then
			set value REQUEST.CC_AM_SortKey in CC_AM_SortKey
		
		REQUEST.CC_AM_SortKey is empty and HF_RegionalCountry.Value is 'ES' then
			set value '000' in CC_AM_SortKey

		REQUEST.CC_AM_SortKey is empty and HF_RegionalCountry.Value is 'IT' then
			set value '002' in CC_AM_SortKey

		REQUEST.CC_AM_SortKey is empty and HF_RegionalCountry.Value is 'PT' then
			set value '003' in CC_AM_SortKey

		REQUEST.CC_AM_SortKey is empty and HF_RegionalCountry.Value in {'BE','LU'} then
			set value '009' in CC_AM_SortKey

		REQUEST.CC_AM_SortKey is empty and HF_RegionalCountry.Value is 'FR' then
			set value '007' in CC_AM_SortKey

		REQUEST.CC_AM_SortKey is empty and HF_RegionalCountry.Value is 'GR' then
			set value '001' in CC_AM_SortKey

		HF_RequestType.Value in {'CC', 'CC_CC', 'CC_PO'} then
			this visible false
		else
			this visible true
			
	with triggers
		this loads
		this changes
; ----------------------------------------------------------------------------	

; TESTGEN : RULES=3, DEFAULTS=3, TRIGGERS=2, ACTIONS=0
Entity CC_AM_InterestIndic is TextBox in frmMain
	with defaults
		visible false
		max length 2

	with rules

		HF_RegionalCountry.Value in {'BE','LU'} and HF_RequestType.Value is not CM_BLK  and GD_Ctr_CustomerClassification.Value is 'NG' then
			set value 'ZV' in CC_AM_InterestIndic

		HF_RegionalCountry.Value in {'BE','LU'} and HF_RequestType.Value is not CM_BLK  and GD_Ctr_CustomerClassification.Value is 'G' then
			set value 'ZW' in CC_AM_InterestIndic

		HF_RegionalCountry.Value is 'GR' and HF_RequestType.Value in {'CC','CC_CC'} then
			set value '7G' in CC_AM_InterestIndic

	with triggers
		this loads
		GD_Ctr_CustomerClassification changes

; ----------------------------------------------------------------------------	


; ----------------------------------------------------------------------------	


; --- BEGIN SALES ORDER PART ---
; TESTGEN : DEFAULTS=6, RULES=4, TRIGGERS=1
Entity KNVV_BZIRK is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labBZIRK
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_SalesDistrict

	with rules
		HF_RegionalCountry.Value is 'FR' then
			this visible true

		HF_RegionalCountry.Value is 'FR' AND REQUEST.KNVV_BZIRK is empty then
			set value '' in KNVV_BZIRK

		HF_AccountGroup.Value in {'YCT6', 'YCT9'} then
			this mandatory true

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=8, RULES=3, TRIGGERS=1
Entity SO_CustomerGroup is DropDownList in frmMain

	with defaults
		label LABELS.labCustomerGroups
		mandatory true
		; by default no value is selected
		value ''
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_CustomerGroups with arguments {FlagActive : true, CompanyCode : HF_CompanyCode.Value}

	with rules
		
		HF_RegionalCountry.Value is 'FR' and HF_RequestType.Value in {'CC', 'CC_CC', 'CC_SO'} then
			set value '01' in SO_CustomerGroup
	
		HF_RegionalCountry.Value in {'IT', 'LU'} and HF_RequestType.Value in {'CC', 'CC_CC', 'CC_SO'} then
			set value '12' in SO_CustomerGroup

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	
	with triggers
		this loads		
; ---------------------------------------------------------------------------- 


; TESTGEN : DEFAULTS=7, RULES=2, TRIGGERS=1
Entity SO_SalesOffice is DropDownList in frmMain

	with defaults
		; visible false
		; TODO: CHECK in code only visible if items are loaded
		visible true
		label LABELS.labSO_SalesOffice
		mandatory true
		data field DisplayName
		value field SalesOffice
		load data from DATASOURCE.MDMC3_SalesOffice with arguments { ClusterPOCode : HF_SalesOrg.Value, ClusterCompanyCode : HF_CompanyCode.Value, DistributionChannel : REQUEST.DISTRIBUTION_CHANNEL, FlagActive : true}

	with rules
		; only show the control if there are data loaded from the 'load data from' instruction
		; TODO: CHECK WITH SEB about this
		this.Items.Count > '0' then
			SO_SalesOffice visible true
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	
		
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, RULES=2, TRIGGERS=1
Entity KNVV_EIKTO is TextBox in frmMain

	with defaults
		visible false
		label LABELS.labEIKTO
		mandatory true

	with rules
		HF_RegionalCountry.Value is 'FR' then
			KNVV_EIKTO visible true
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
			
	with triggers
		this loads
; ---------------------------------------------------------------------------- 


; TESTGEN : DEFAULTS=5, RULES=2, TRIGGERS=1
Entity KNVV_VKGRP is DropDownList in frmMain


	with defaults
		label LABELS.labVKGRP
		data field DisplayName
		value field Code

	with rules
		; HF_RegionalCountry.Value is 'FR' then
		; 	this visible true
		; 	this mandatory false

		HF_RequestType.Value not in {'CC','CC_CC'} and SO_SalesOffice.Value is not empty then
			load data from DATASOURCE.MDMC3_GetSalesGroups with arguments {SalesOffice : HF_SalesOrg.Value}

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
			
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=7, RULES=2, TRIGGERS=1
Entity SO_SalesOrderCurrency is DropDownList in frmMain
	with defaults
		label LABELS.labSaleOrderCurrency
		mandatory true
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_Currencies with arguments {FlagActive : true}
		value 'EUR'
	with rules
		HF_RequestType.Value is 'CC' then
			set value 'EUR' in SO_SalesOrderCurrency
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=7, RULES=1, TRIGGERS=1
Entity KNVV_KONDA is DropDownList in frmMain

	with defaults
		visible true
		; visible false
		label LABELS.labkONDA
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_PriceGroup
		value ''

	with rules
		; HF_RegionalCountry.Value is 'FR' then
		; 	this visible true
		; 	this mandatory false

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=7, RULES=2, TRIGGERS=1
Entity KNVV_PLTYP is DropDownList in frmMain

	with defaults
		visible true
		; visible false
		label LABELS.labPLTYP
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_PriceListType
		value ''

	with rules
		; HF_RegionalCountry.Value in {'BE', 'FR'} then
		; 	KNVV_PLTYP visible true
		HF_RegionalCountry.Value is 'BE' then
			set value '2G' in KNVV_PLTYP
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 


; TESTGEN : DEFAULTS=8, RULES=4, TRIGGERS=1
Entity SO_CustPricingProc is DropDownList in frmMain

	with defaults
		label LABELS.labCustPricProc
		mandatory true
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_CustomerPricingProcedure with arguments {FlagActive : true}
		value ''
	
	with rules
		HF_RegionalCountry.Value in {'FR','GR'} then
			this enabled true
			set value '1' in SO_CustPricingProc

		HF_RegionalCountry.Value in {'PT', 'BE', 'LU', 'GR'} or HF_CompanyCode.Value in {'5180', '5116'} or HF_SalesOrg.Value in {'10A0','10A1','10A9','10L0'} then
			this enabled false
			set value '1' in SO_CustPricingProc
		
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		
	with triggers
		this loads	

; ---------------------------------------------------------------------------- 

; If Regional country Belgium -> selected value 1 not enabled
; If Regional country Italy and company '5180'/'5116'-> selected value 1 not enabled
; If regional country Portugal -> selected value 1 not enabled
; If regional country Belgium-> selected value 1 not enabled
; If regional country Belgium and company code '5101' and sales org '10A0'/10A1/10A9/10L0 -> selected value 1 not enabled
; If regional country Luxemburg -> selected value 1 not enabled
; If regional country France and Spain -> selected value 1 enabled
; If regional country Greece -> selected value 1 enabled

; TESTGEN : DEFAULTS=8, RULES=5, TRIGGERS=1
Entity SO_CustomerStatsGroup is DropDownList in frmMain

	with defaults
		label LABELS.labStatusGroup
		mandatory true
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_CustomerStatsGroup with arguments {FlagActive : true}
		value ''

	with rules
			
		HF_RegionalCountry.Value is 'FR' then
			set value '1' in SO_CustPricingProc

		HF_RegionalCountry.Value in {'PT', 'BE', 'LU'} or HF_CompanyCode.Value in {'5180', '5116'} then
			this enabled false
			set value '1' in SO_CustPricingProc

		HF_RegionalCountry.Value in {'ES','FR','GR'} then
			set value '1' in SO_CustPricingProc
			this enabled true

		HF_AccountGroup.Value is 'YCT7' then
			this mandatory true

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=10, TRIGGERS=1
Entity SO_CustomerShippingConditions is DropDownList in frmMain
	with defaults
		label LABELS.labShippingCond
		mandatory true
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_CustomerShippingCondition with arguments {FlagActive : true, ClusterCountryCode : HF_RegionalCountry.Value}

	with rules

		HF_RegionalCountry.Value is 'FR' then
			set value '01' in SO_CustomerShippingConditions

		HF_RegionalCountry.Value is 'GR' then
			set value '01' in SO_CustomerShippingConditions

		HF_RegionalCountry.Value is 'PT' then
			set value '31' in SO_CustomerShippingConditions

		HF_RegionalCountry.Value is 'BE' then
			this enabled false
			set value '11' in SO_CustomerShippingConditions

		HF_RegionalCountry.Value is 'GR' then
			set value '01' in SO_CustomerShippingConditions

		HF_RegionalCountry.Value is 'IT' then
			set value '31' in SO_CustomerShippingConditions

		HF_RegionalCountry.Value is 'GR' then
			set value '21' in SO_CustomerShippingConditions

		HF_RegionalCountry.Value is 'ES' and HF_CustomerCountry.Value is 'ES' then
			set value '31' in SO_CustomerShippingConditions

		HF_RegionalCountry.Value is 'ES' and HF_CustomerCountry.Value is not 'ES' then
			set value '33' in SO_CustomerShippingConditions

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	

	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; 1) If requestype creation from scratch/company/sales org and company '5140' :
;  if distribution channel 11 -> default value 6010, if its distribution channel 12 -> default value 6020
; 2) data are loaded by distribution channel from master table

; TESTGEN : DEFAULTS=6, RULES=4, TRIGGERS=1
Entity KNVV_VWERK is DropDownList in frmMain

	with defaults
		visible false
		enabled false
		label LABELS.labVWERK
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_DeliveryPlant with arguments {CodeSalesOrg : HF_SalesOrg.Value, DistributionChannel : REQUEST.DISTRIBUTION_CHANNEL}

	with rules
		
		HF_RegionalCountry.Value is 'FR' then
			this visible true
			this mandatory false

		HF_RequestType.Value in {'CC', 'CC_CC', 'CC_SO'} and HF_CompanyCode.Value is '5140' and REQUEST.DISTRIBUTION_CHANNEL is '11' then
			; KNVV_VWERK visible true
			set value '6010' in KNVV_VWERK

		HF_RequestType.Value in {'CC', 'CC_CC', 'CC_SO'} and HF_CompanyCode.Value is '5140' and REQUEST.DISTRIBUTION_CHANNEL is '12' then
			; KNVV_VWERK visible true
			set value '6020' in KNVV_VWERK

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=5, RULES=4, TRIGGERS=2
Entity KNVV_AUTLF is CheckBox in frmMain

	with defaults
		label LABELS.labAUTLF
		visible false

	with rules
	
		HF_RegionalCountry.Value is 'FR' then
			visible true
			set value true in KNVV_AUTLF

		KNVV_AUTLF.Value is true then
			set value '0' in KNVV_ANTLF.Value

		KNVV_AUTLF.Value is false then
			set value '' in KNVV_ANTLF.Value

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false

	with triggers
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=5, RULES=5, TRIGGERS=2
Entity KNVV_ANTLF is DropDownList in frmMain

	with defaults
		data field DisplayName
		value field Code
		label LABELS.labANTLF
		visible false
		load data from DATASOURCE.MDMC3_MaxPartDelivery

	with rules

		HF_RegionalCountry.Value is 'FR' then
			visible true
			set value '9' in KNVV_ANTLF

		; TODO: Check with SEB about how to reference the model like this
		HF_RegionalCountry.Value is 'FR' and KNVV_AUTLF.Value and REQUEST.KNVV_ANTLFSAP.Value is true then
			set value '0' in KNVV_ANTLF

		KNVV_AUTLF is visible and KNVV_KZTLF.Value in {'A','B','C'} and KNVV_ANTLF.Value > 1 then
			set value MESSAGES.ERRPartiaDelivs1 in MESSAGE_POPUP

		HF_RegionalCountry.Value is {'IT', BE, 'GR'} and HF_RequestType.Value in {'CC', 'CC_CC', 'CC_SO'} then
			visible true
			set value '0' in KNVV_ANTLF

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false

	with triggers
		this changes	
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=2, TRIGGERS=1
Entity KNVV_LPRIO is DropDownList in frmMain

	with defaults
		label LABELS.labLPRIO
		data field Displayname
		value field Code
		load data from DATASOURCE.MDMC3_DeliverPriority

	with rules
		HF_RegionalCountry.Value in {'ES', 'IT', 'BE', 'LU', 'FR', 'GR', 'PT'} then
			set value '02' in KNVV_LPRIO
			this enable false
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	
	with triggers
		this loads		
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=4, TRIGGERS=2
Entity KNVV_KZTLF is DropDownList in frmMain

	with defaults
		label LABELS.labKZTLF
		load data from DATASOURCE.MDMC3_PartDeliveryItem
		; TODO: CLarify this value does not exist in DB
		; value 9
		data field DisplayName
		value field Code

	with rules
		KNVV_AUTLF is visible and KNVV_AUTLF.Value is true and KNVV_KZTLF is visible and KNVV_KZTLF is empty then
			set value MESSAGES.ERRPartialDelivInformed in MESSAGE_POPUP

		KNVV_AUTLF is visible and KNVV_AUTLF.Value is true and KNVV_KZTLF is visible and KNVV_KZTLF.Value is D then
			set value MESSAGES.ERRPartialDelivInformed in MESSAGE_POPUP
		
		KNVV_AUTLF is visible and KNVV_AUTLF.Value is false and KNVV_KZTLF.Value in {A,B} and KNVV_ANTLF.Value > 1 then
			set value 'In Sales Area Data view the field Number of partial deliveries, may not be larger than 1' in MESSAGE_POPUP
			
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	

	with triggers
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, RULES=2, TRIGGERS=1
Entity KNVV_PRFRE is CheckBox in frmMain

	with defaults
		label LABELS.labPRFRE
		value false

	with rules
		; NOTE: not in FM
		HF_RegionalCountry.Value is 'FR' then
			KNVV_PRFRE mandatory false

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	

	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 


; TESTGEN : DEFAULTS=6, RULES=8, TRIGGERS=1
Entity SO_Incoterms is DropDownList in frmMain

	with defaults
		label LABELS.labIncoterms
		mandatory true
		data field DisplayName
		value field Code
		; TODO: Crate SP
		load data from DATASOURCE.MDMC3_GetIncotermsByCountry with arguments {CountryCode : HF_RegionalCountry.Value }

	with rules

		HF_RegionalCountry.Value is 'FR' then
			set value 'DAP' in SO_Incoterms

		HF_RegionalCountry.Value is 'PT' then
			set value '' in SO_Incoterms

		HF_RegionalCountry.Value is 'ES' then
			set value 'Y30' in SO_Incoterms

		HF_RegionalCountry.Value is 'IT' then
			set value 'FH' in SO_Incoterms

		HF_RegionalCountry.Value is 'BE' then
			this enabled false
			set value 'DDP' in SO_Incoterms

		HF_RegionalCountry.Value is 'LU' then
			set value 'DDP' in SO_Incoterms

		HF_RegionalCountry.Value is 'GR' then
			set value '' in SO_Incoterms

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, RULES=7, TRIGGERS=1
Entity SO_IncotermsPart2 is TextBox in frmMain
	with defaults
		label LABELS.labIncotermsPart2
		mandatory true
	
	with rules

		HF_RegionalCountry.Value is 'FR' and REQUEST.SO_IncotermsPart2.Value is empty then
			set value 'France Metropolitaine' in SO_Incoterms

		HF_RegionalCountry.Value is 'PT' and REQUEST.SO_IncotermsPart2.Value is empty then
			set value '' in SO_Incoterms

		HF_RegionalCountry.Value is 'ES'  and REQUEST.SO_IncotermsPart2.Value is empty then
			set value 'Y30  - carriage  paid' in SO_Incoterms

		HF_RegionalCountry.Value is 'IT'  and REQUEST.SO_IncotermsPart2.Value is empty then
			set value 'Franco domicilio' in SO_Incoterms

		HF_RegionalCountry.Value is 'GR'  and REQUEST.SO_IncotermsPart2.Value is empty then
			set value '' in SO_Incoterms

		HF_RegionalCountry.Value in {'BE','LU'}  and REQUEST.SO_IncotermsPart2.Value is empty then
			this enabled false
			set value 'DESTINATION' in SO_Incoterms

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 
			
; By default mandatory
; 1) Default values for all type of requests (all types of creation, changes), independently if value from SAP is empty but enquirer can change:
; 1.1) If company code '5140' and customer country ISO  ('FR','GF', 'GP', 'RE', 'MQ', 'YT', 'NC', 'PF', 'PM', 'WF', 'MC') -> 6115
; 1.2) If company code '5140' and customer country != ISO  ('FR','GF', 'GP', 'RE', 'MQ', 'YT', 'NC', 'PF', 'PM', 'WF', 'MC') -> 6000
; 1.3) if company code luxembourg -> 1113
; 1.4) if company code Spain-> 3E60
; 1.5) if company code Belgium and Luxembourg-> 1109
; 1.6) if company code Portugal: If company code Portugal ('5240') -> not visible
; 1.7) if company code '5240' and customer country 'PT' -> 4216
; 1.8) if  company code '5240' and !=customer country 'PT' -> 4116
; ;   TODO: THIS IS CONTRADICTORY
; 1,9) if company code greece ('5150') and Italy ('5180', '596G') value default blank
; 1,10) if company code 'GR' -> default value 7090


; TESTGEN : DEFAULTS=7, RULES=10, TRIGGERS=1
Entity SO_TermsOfPaymentKey is DropDownList in frmMain

	with defaults
		label LABELS.labTermsOfPaymentKey
		mandatory true
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_PaymentTerms with arguments {FlagActive : true, ClusterCountryCode : HF_RegionalCountry.Value}

	with rules
		HF_CompanyCode.Value is '5140' and GD_Adr_Country.Value in {'FR','GF', 'GP', 'RE', 'MQ', 'YT', 'NC', 'PF', 'PM', 'WF', 'MC'} then
			set value '6115' in SO_TermsOfPaymentKey
		HF_CompanyCode.Value is '5140' and GD_Adr_Country.Value not in {'FR','GF', 'GP', 'RE', 'MQ', 'YT', 'NC', 'PF', 'PM', 'WF', 'MC'} then
			set value '6000' in SO_TermsOfPaymentKey
		HF_RegionalCountry.Value is 'LU' then
			set value '1113' in SO_TermsOfPaymentKey
		HF_RegionalCountry.Value is 'ES' then
			set value '3E60' in SO_TermsOfPaymentKey
		HF_RegionalCountry.Value in {'BE', 'LU'} then
			set value '1109' in SO_TermsOfPaymentKey
		HF_RegionalCountry.Value is 'PT' then
			SO_TermsOfPaymentKey visible false
		HF_RegionalCountry.Value is 'PT' and GD_Adr_Country.Value is 'PT' then
			set value '4216' in SO_TermsOfPaymentKey
		HF_RegionalCountry.Value is 'PT' and GD_Adr_Country.Value is 'PT' then
			set value '4116' in SO_TermsOfPaymentKey
		; NOTE: not in FM, but in code
		HF_RegionalCountry.Value is 'IT' then
			set value '5001' in SO_TermsOfPaymentKey
;		HF_RegionalCountry.Value in {'IT', 'GR'} then
;			set value '' in SO_TermsOfPaymentKey

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=7, RULES=5, ACTIONS=1, TRIGGERS=1
Entity KNVV_KTGRD is DropDownList in frmMain
	with defaults
		visible false
		enabled false
		label LABELS.labAccountAssimgnGroup
		mandatory false
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_AccountAssgmtGroup with arguments {FlagActive : true}

	with rules
		
		HF_RegionalCountry.Value is 'GR' then
			this visible true
			this enabled true

		HF_RegionalCountry.Value is 'FR' then
			this mandatory true

		HF_RegionalCountry.Value is HF_CustomerCountry.Value then
			set value '01' in KNVV_KTGRD

		HF_RegionalCountry.Value is not HF_CustomerCountry.Value then
			set value '02' in KNVV_KTGRD

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=7, RULES=3, TRIGGERS=1
Entity SO_TaxClassification is DropDownList in frmMain

	with defaults
		label LABELS.labTaxClassification
		mandatory true
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_TaxClassification
		value 1

	with rules
		
		SO_TaxClassification.Value is empty then
			set value '1' in SO_TaxClassification

		HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry.Value is 'PT' and HF_CustomerCountry.Value is 'PT' then
			set value '1' in SO_TaxClassification

		HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry.Value is 'PT' and HF_CustomerCountry.Value is not 'PT' and HF_IsEU.Value is true then
			set value 'B' in SO_TaxClassification

		HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry.Value is 'PT' and HF_CustomerCountry.Value is not 'PT' and HF_IsEU.Value is false then
			set value 'A' in SO_TaxClassification

		HF_RegionalCountry.Value is 'FR' then
			; THIS CANNOT BE
			; this mandatory true
			set value '1' in SO_TaxClassification
			this enable false

		HF_RegionalCountry.Value is 'ES' then
			set value '1' in SO_TaxClassification

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
				
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TODO:
;	'04-08-2014(RG): 1)By default not visible except company code italy and france
;	2)Default values per request creation from scratch and company code:

;	4) for belux company codes there is a file  “Sales Org and Accounting Clerk
;	“ in sheet “Other documents” with default values
;	 5) for portuguese company codes there is a file  “Sales Org and Accounting Clerk
;	“ in sheet “Other documents” with default values
;	6) for spanish company codes there is a file  “Sales Org and Accounting Clerk
;	“ in sheet “Other documents” with default values
;	7) for italian company code '5180', please use the sheet ''credit limit for italy '5180' regional company''


; TODO: FINISH THIS
; TESTGEN : DEFAULTS=6, TRIGGERS=1
Entity KNKK_SBGRP is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labCreditControlGroups
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_CreditControlGroups with arguments { CompanyCode : HF_CompanyCode.Value}

	with rules

		HF_CompanyCode.Value is '5140' and HF_RequestType.Value is {'CC','CC_CC'} then
			load data from DATASOURCE.MDMC3_AccountingClerksFORPTBELU with arguments {CountryCode : HF_CustomerCountry, CodeRegion : GD_Adr_Region.Value} in KNKK_SBGRP
		
		HF_RegionalCountry.Value is 'BE' then
			load data from DATASOURCE.MDMC3_CreditControlGroup_Region with arguments {CountryCode : HF_CustomerCountry, CodeRegion : GD_Adr_Region.Value} in KNKK_SBGRP


		HF_CompanyCode.Value in {'5180','596G','5140','491E'} then
			this visible true

		HF_RegionalCountry.Value is 'FR' then
			this mandatory false	
			this visible true

		HF_CompanyCode.Value in {'5140','491E'} then
			this mandatory false	
		
		; TODO: WHAT IS THIS DISCREPANCY	
		HF_RequestType.Value in {'CC', 'CC_SO'} then
			load data from DATASOURCE.MDMC3_CreditControlGroup_Region with arguments { CountryCode : HF_RegionalCountry.Value, CompanyCode : HF_CompanyCode.Value, CodeRegion : GD_Adr_Region.Value} with ouput {KNKK_SBGRP : CodeSBGRP}

		HF_AccountGroup.Value in {'YCT6','YVT6','YCT9','YVT9'} and GD_Adr_PostalCode.Value.Length >= 2 then
			load data from DATASOURCE.MDMC3_CreditControlGroup_Region with arguments { CountryCode : HF_RegionalCountry.Value, CompanyCode : HF_CompanyCode.Value, CodeRegion : GD_Adr_Region.Value} with ouput {KNKK_SBGRP : CodeSBGRP}

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
			
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=2, ACTIONS=0, TRIGGERS=1
Entity KNVV_KVGR1 is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labKVGR1
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_AdditionalCustomerData with arguments {Grp : 'GR1'}

	with rules
		HF_RegionalCountry.Value is 'FR' then
			KNVV_KVGR1 visible true
			this mandatory false
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
			
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=2, ACTIONS=0, TRIGGERS=1
Entity KNVV_KVGR2 is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labKVGR2
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_AdditionalCustomerData with arguments {Grp : 'GR2'}

	with rules
		HF_RegionalCountry.Value is 'FR' then
			KNVV_KVGR2 visible true
			this mandatory false
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=2, ACTIONS=0, TRIGGERS=1
Entity KNVV_KVGR3 is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labKVGR3
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_AdditionalCustomerData with arguments {Grp : 'GR3'}
	with rules
		HF_RegionalCountry.Value is 'FR' then
			KNVV_KVGR3 visible true
			this mandatory false
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=2, ACTIONS=0, TRIGGERS=1
Entity KNVV_KVGR4 is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labKVGR4
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_AdditionalCustomerData with arguments {Grp : 'GR4'}

	with rules
		HF_RegionalCountry.Value is 'FR' then
			KNVV_KVGR4 visible true
			this mandatory false
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		
	with triggers
		this loads	
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=4, ACTIONS=0, TRIGGERS=1
; TODO: CHECK PARAMETER NAME IN DATASOURCES
Entity KNVV_KVGR5 is DropDownList in frmMain

	with defaults
		label LABELS.labKVGR5
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_AdditionalCustomerData with arguments {Grp : 'GR5'}

	with rules
		HF_SalesOrg.Value in {'40E0', '31E0', '60E0', '50E0', '70E0', '10E0', '22E0'} then
			KNVV_KVGR5 mandatory true
			load data from DATASOURCE.MDMC3_AdditionalCustomerData with arguments {Group : 'GR4', Filter : true}
			
		HF_SalesOrg.Value not in {'40E0', '31E0', '60E0', '50E0', '70E0', '10E0', '22E0'} then
			KNVV_KVGR5 mandatory false
			load data from DATASOURCE.MDMC3_AdditionalCustomerData with arguments {Group : 'GR4'}
			
		HF_RegionalCountry.Value is 'FR' then
			KNVV_KVGR4 visible true
			this mandatory false

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
			
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

;   TODO: REVIEW THIS WITH THE EXCEL FILES
;	1) Read only field
;	2) see attached email ''credit control area (legal form) for all french companies in sheet “other documents”
;	3) For spanish, portuguese company codes creations from scratch and company code, by default 0
;	4) For belgium and luxembourg company codes creations from scratch and company code, by default 5.000
;	5) for italian company '5180', Based in Credit rep. Group, MADAM has to find into the sheet ''credit limit for italy '5180' regional company'' attached in sheet “other documents” the values the values for the fields KNKK-KLIMK & KNKK-NXTRV
;	   please follow the instructions in the sheet ''credit limit for italy '5180' regional company'' attached in sheet “other documents”


Entity KNKK_KNKLI is TextBox in frmMain

	with defaults
		label LABELS.labCreditAccount
		enabled false
	
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

;	1) TODO:
;	2) see attached email ''credit control area (legal form) for all french companies in sheet “other documents”
;	5) for italian company '5180', Based in Credit rep. Group, MADAM has to find into the sheet ''credit limit for italy '5180' regional company'' attached in sheet “other documents” the values the values for the fields KNKK-KLIMK & KNKK-NXTRV

Entity KNKK_KLIMK is TextBox in frmMain

	with defaults
		label LABELS.labCreditLimit
		enabled false

	with rules
		HF_RegionalCountry.Value in {'ES', 'PT'} and HF_CompanyCode.Value in {'CC','CC_CC'} then
			set value '0' in KNKK_KLIMK

		HF_RegionalCountry.Value in {'BE', 'LU'} and HF_CompanyCode.Value in {'CC','CC_CC'} then
			set value '5000' in KNKK_KLIMK
	
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		
	with triggers
		this loads	
; ---------------------------------------------------------------------------- 

;	'17-07-2014(RG): 1)Read only field
;	2)in case of french company codes, See default values in excel attached CamposCreditLimit.xls
;	3) only used in spanish company codes creations from scratch and company code, by default blank (Required in 101896228 (TTT_079307))
;	4) only used in portuguese company codes creations from scratch and company code, by default 44X
;	5)only used in italian company codes creations from scratch and company code, if KNA1-KUKLA=NG, by default ''523'', if KNA1-KUKLA =G, by default ''5EP'''

; TODO: FIELDMAPPING SAYS THIS IS A DROPDOWNLIST BUT THIS IS ACTUALLY A TEXTBOX --- PENDING CLARIFICATION... // REVIEW REST OF RULES

Entity KNKK_CTLPC is TextBox in frmMain

	with defaults
		label LABELS.labGD_Ctr_RiskClassification
		enabled false

	with rules
		
		HF_RegionalCountry.Value is 'ES' and HF_CompanyCode.Value in {'CC','CC_CC'} then
			set value '' in KNKK_CTLPC
		HF_RegionalCountry.Value is 'PT' and HF_CompanyCode.Value in {'CC','CC_CC'} then
			set value '44X' in KNKK_CTLPC

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value is 'MDMC3_SUS' then
			this enable false	

	with actions
		ATTACHMENT mandatory  true  
		; DDLDCComment mandatory  false
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TODO: in case of french company codes See default values in excel attached CamposCreditLimit.xls'
Entity KNKK_DTREV is TextBox in frmMain

	with defaults
		label LABELS.labInternalReview
		enabled false

	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
			
	with triggers
		this loads	

; ---------------------------------------------------------------------------- 

; TODO: in case of french company codes See default values in excel attached CamposCreditLimit.xls'
; TODO: SOMETHING FOR ITALY AS WELL.....
Entity KNKK_NXTRV is TextBox in frmMain

	with defaults
		enabled false
		label LABELS.labNextInternalReview
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TODO: in case of french company codes See default values in excel attached CamposCreditLimit.xls'
Entity KNKK_KRAUS is TextBox in frmMain

	with defaults
		label LABELS.labCLimInfNumber
		enabled false
		max length 11
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TODO: in case of french company codes See default values in excel attached CamposCreditLimit.xls'
; TESTGEN : DEFAULTS=4, RULES=1, TRIGGERS=1
Entity KNKK_DBRTG is TextBox in frmMain
	with defaults
		label LABELS.labRating
		enabled false
		max length 5
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	

	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TODO: in case of french company codes See default values in excel attached CamposCreditLimit.xls'
; TESTGEN : DEFAULTS=5, RULES=1, TRIGGERS=1
Entity KNKK_REVDB is TextBox in frmMain

	with defaults
		label LABELS.labLastReviewExt
		enabled false
		max length 8
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	

	with triggers
		this loads

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3
Entity KNKK_GRUPP is TextBox in frmMain
	with defaults
		enabled false
		visible false
		max length 4

; ---------------------------------------------------------------------------- 

; TODO: in case of french company codes See default values in excel attached CamposCreditLimit.xls'

; TESTGEN : DEFAULTS=5, RULES=1, TRIGGERS=1
Entity KNKK_DBEKR is NumericBox in frmMain

	with defaults
		label LABELS.labRecClimit
		enabled false
		max length 15
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	with triggers
		this loads
		
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, ACTIONS=10, RULES=1, TRIGGERS=2
Entity btnBlockAll is Button in frmMain

	with defaults
		label LABELS.labBlockAll

	with actions
		set value true in BLK_CentralPostingBlock
		set value true in BLK_PostingBlockForCC
		set value true in BLK_CentralSalesSupportBlock
		set value true in BLK_CentralSalesSupportBlockAtSalesArea
		set value '1F' in BLK_PostingBlockForCC
		set value '1F' in BLK_OrdersBlockAtSalesArea
		set value '1F' in BLK_CentralDeliveriesBlock
		set value '1F' in BLK_DeliveriesBlockAtSalesArea
		set value '1F' in BLK_CentralBillingBlock
		set value '1F' in BLK_BillingBlockAtSalesArea

	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
			this visible false

	with triggers
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, ACTIONS=10, RULES=1, TRIGGERS=2
Entity btnUnblockAll is Button in frmMain

	with defaults
		label LABELS.labUnblockAll

	with actions
		set value false in BLK_CentralPostingBlock
		set value false in BLK_PostingBlockForCC
		set value false in BLK_CentralSalesSupportBlock
		set value false in BLK_CentralSalesSupportBlockAtSalesArea
		set value '' in BLK_PostingBlockForCC
		set value '' in BLK_OrdersBlockAtSalesArea
		set value '' in BLK_CentralDeliveriesBlock
		set value '' in BLK_DeliveriesBlockAtSalesArea
		set value '' in BLK_CentralBillingBlock
		set value '' in BLK_BillingBlockAtSalesArea

	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
			this visible false

	with triggers
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=6, RULES=1, ACTIONS=2, TRIGGERS=2
Entity BLK_GD_Ctr_UnsubscribeCMD is DropDownList in frmMain

	with defaults
		label LABELS.labUnsubscribeCMD
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_UnsubscribeOptions
	with actions
		set value BLK_GD_Ctr_UnsubscribeCMD.Value in GD_Ctr_UnsubscribeCMD
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		set value true in HF_MandatoryAttachment
		; DDLDCComment mandatory  false
	with triggers 
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=3, RULES=1, ACTIONS=2, TRIGGERS=2
Entity BLK_CentralPostingBlock is CheckBox in frmMain

	with defaults
		label LABELS.labCentralPostingBlock
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		set value true in HF_MandatoryComment
		DDLDCComment mandatory  true  
	with triggers 
		this changes
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=3, RULES=1, ACTIONS=2, TRIGGERS=2
Entity BLK_PostingBlockForCC is CheckBox in frmMain

	with defaults
		label LABELS.labPostBlockingForCompanyCode
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		set value true in HF_MandatoryComment
		DDLDCComment mandatory  true  
	with triggers 
		on change
		this loads

; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=6, RULES=1, ACTIONS=2, TRIGGERS=2
Entity BLK_CentralSalesOrderBlock is DropDownList in frmMain

	with defaults
		label LABELS.labCentralSalesOrdersBlock
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_OrderBlock
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		set value true in HF_MandatoryComment
		DDLDCComment mandatory  true  
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=6, RULES=1, ACTIONS=2, TRIGGERS=2
Entity BLK_OrdersBlockAtSalesArea is DropDownList in frmMain

	with defaults
		label LABELS.labOrdersBlockAtThisSalesArea
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_BLK_BillingBlockAtSalesArea
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		set value true in HF_MandatoryComment
		DDLDCComment mandatory  true  
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=6, RULES=1, ACTIONS=2, TRIGGERS=2
Entity BLK_CentralDeliveriesBlock is DropDownList in frmMain

	with defaults
		label LABELS.labCentralDeliveriesBlock
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_DeliveryBlock
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		set value true in HF_MandatoryComment
		DDLDCComment mandatory  true  
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=6, RULES=1, ACTIONS=2, TRIGGERS=2
Entity BLK_DeliveriesBlockAtSalesArea is DropDownList in frmMain

	with defaults
		label LABELS.labDeliveriesBlockAtThisSalesArea
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_DeliveryBlock
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		set value true in HF_MandatoryComment
		DDLDCComment mandatory  true  
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=6, RULES=1, TRIGGERS=1
Entity BLK_CentralBillingBlock is DropDownList in frmMain

	with defaults
		label LABELS.labCentralBillingBlock
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_BillingBlock
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers
		this loads

; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=6, RULES=1, ACTIONS=2, TRIGGERS=2
Entity BLK_BillingBlockAtSalesArea is DropDownList in frmMain

	with defaults
		label LABELS.labBillingBlockAtThisSalesArea
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_BLK_BillingBlockAtSalesArea with arguments {FlagActive : true}
	with actions
		; ATTACHMENT mandatory  false
		set value true in HF_MandatoryComment
		DDLDCComment mandatory  true  
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=3, RULES=1, TRIGGERS=1
Entity BLK_CentralSalesSupportBlock is CheckBox in frmMain

	with defaults
		label LABELS.labCentralSalesSupportBlock
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers
		this loads

; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=3, RULES=1, TRIGGERS=1
Entity BLK_CentralSalesSupportBlockAtSalesArea is CheckBox in frmMain

	with defaults
		label LABELS.labCentralSalesSupportBlockAtThisSalesArea
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers
		this loads

; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=3, RULES=1, ACTIONS=2, TRIGGERS=2
Entity BLK_CentralDeletionFlagMasterRecord is CheckBox in frmMain

	with defaults
		label LABELS.labCentralDelMasterRecord
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		set value true in HF_MandatoryComment
		DDLDCComment mandatory  true  
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=3, RULES=1, ACTIONS=2, TRIGGERS=2
Entity BLK_DeletionFlagMasterRecordCC is CheckBox in frmMain

	with defaults
		label LABELS.labDelFlagMasterCompanyCode
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		set value true in HF_MandatoryComment
		DDLDCComment mandatory  true  
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=3, RULES=1, TRIGGERS=1
Entity BLK_DeletionFlagMasterRecordSA is CheckBox in frmMain

	with defaults
		label LABELS.labDelFlagAtThisSalesArea
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers
		this loads

; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=3, RULES=1, ACTIONS=1, TRIGGERS=2
Entity BLK_CentralDeletionBlockMasterRecord is CheckBox in frmMain

	with defaults
		label LABELS.labCentralDelBlockMaster
	with actions
		; ATTACHMENT mandatory  false
		DDLDCComment mandatory  true
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=3, RULES=1, ACTIONS=2, TRIGGERS=2
Entity BLK_DeletionBlockMasterRecordCC is CheckBox in frmMain

	with defaults
		label LABELS.labDelBlockMasterCompany
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} or HF_RequestType.Value is not 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		set value true in HF_MandatoryComment
		DDLDCComment mandatory  true  
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN ; DEFAULTS=3, RULES=2, ACTIONS=0, TRIGGERS=1
Entity TS_IsUrgentRequest is CheckBox in frmMain

	with defaults
		label LABELS.labUrgentRequest
	with rules
		HF_RequestState.Value in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
		REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
			this visible false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; Entity CostCenter is TextBox in frmMain
; 
; 	with defaults
; 		label LABELS.labCostCenter
; 
; 	with rules
; 		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
; 			this enable false	
; ---------------------------------------------------------------------------- 

; TODO: SEE HOW TO DO THIS

Entity DDLDCReqAction is DropDownList in frmMain

	with defaults
		label LABELS.labSR_Action
		mandatory true
		data field DisplayName
		value field Code

        load data from DATASOURCE.W4E_StateMap with arguments {BPCode : 'MDMC3', FlowType : HF_RequestType.Value, CurrentRole : HF_CurrentRole.Value, Status : HF_RequestState }
		; TODO: DEFAULT VALUE and the rest
	with rules

		REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
			this visible false
		
		HF_RequestState.Value in {'Locked', 'Closed'} then
			this enable false
	
	with triggers
		this loads
		
; ---------------------------------------------------------------------------- 

; TODO: MISSING DATA LOAD FROM HERE
Entity labNextRole is DropDownList in frmMain

	with defaults
		label LABELS.NextRole
		enable false

; ---------------------------------------------------------------------------- 

; TODO: MISSING DATA LOAD FROM HERE
Entity labNextAction is DropDownList in frmMain

	with defaults
		enable false


; ---------------------------------------------------------------------------- 

Entity btnSubmit is Button in frmMain

	with defaults
		label LABELS.btnSubmit

	with actions
		; set value toupper(GD_Adr_Name.Value) in GD_Adr_Name
		; set value toupper(GD_Adr_Name.Value) in    GD_Adr_Name
		; set value toupper(GD_Adr_Name2.Value) in   GD_Adr_Name2
		; set value toupper(GD_Adr_Name3.Value) in   GD_Adr_Name3
		; set value toupper(GD_Adr_Name4.Value) in   GD_Adr_Name4
		; set value toupper(GD_Adr_Street.Value) in  GD_Adr_Street
		; set value toupper(GD_Adr_Street2.Value) in GD_Adr_Street2
		; set value toupper(GD_Adr_Street3.Value) in GD_Adr_Street3
		; set value toupper(GD_Adr_Street4.Value) in GD_Adr_Street4
		; set value toupper(GD_Adr_Street5.Value) in GD_Adr_Street5
		; set value toupper(GD_Adr_City.Value) 	in   GD_Adr_City

	with rules

		
		DDLDCReqAction is empty then
			set value MESSAGES.ERRsubmitRequestAction in MESSAGE_POPUP

		; TODO: 
		; bank validation in case of enq or clekr only
		
		HF_RequestType.Value is not 'CM_BLK' and GD_Adr_Country.Value is 'IT' and GD_Ctr_CF is not empty and GD_Ctr_CF.Value.Length < 9 then
			set value MESSAGES.ERRsubmitRequestGDFieldCFShort in MESSAGE_POPUP
			
		HF_RequestType.Value is not 'CM_BLK' and GD_Adr_Country.Value is 'IT' and GD_Ctr_IsNaturalPerson.Value is true and GD_Ctr_CF is empty and HF_RequestType.Value is 'CC' then
			set value MESSAGES.ERRsubmitRequestGDFieldCFEmpty in MESSAGE_POPUP

		HF_RequestType.Value is not 'CM_BLK' and GD_Ctr_CustomerClassification.Value is empty then
			set value MESSAGES.ERRCustomerClassEmpty in MESSAGE_POPUP

		HF_RequestType.Value is not 'CM_BLK' and GD_VT_Grid.Items.Count is '0' and HF_RegionalCountry.Value is not 'BE' then
			set value MESSAGES.ERRsubmitRequestGDFieldTelephone in MESSAGE_POPUP

		; TODO: DEFINE SOMEHOW THE CHECKIN OF DEFAULT ROW IN GRID...
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_VT_Grid.Items.Count is not 0 and REQUEST.PHONE_DETAILS.NO_DEFAULT_ENTRY is true and HF_RegionalCountry.Value not in {'BE','LU','PT','WF'} then
			set value MESSAGES.ERRsubmitRequestGDDefTel in MESSAGE_POPUP

		; TODO: DEFINE SOMEHOW THE CHECKIN OF DEFAULT ROW IN GRID...
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_VF_Grid.Items.Count is not 0 and REQUEST.FAX_DETAILS.NO_DEFAULT_ENTRY is true then
			set value MESSAGES.ERRsubmitRequestGDDefFax in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_VE_Grid.Items.Count is not 0 and REQUEST.EMAIL_DETAILS.NO_DEFAULT_ENTRY is true then
			set value MESSAGES.ERRsubmitRequesGDDefSmtp in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_Adr_Name.Value is empty then
			set value MESSAGES.ERRsubmitRequestGDFieldVName in MESSAGE_POPUP	

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_Adr_Street.Value is empty then
			set value MESSAGES.ERRsubmitRequestGDFieldVStreet in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_Adr_Region.Value is empty and GD_Adr_Region.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestGDFieldVRegion in MESSAGE_POPUP		

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_Adr_City.Value is empty then
			set value MESSAGES.ERRsubmitRequestGDFieldVCity in MESSAGE_POPUP	

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_Com_LanguageCode.Value is empty then
			set value MESSAGES.ERRsubmitRequestGDFieldLanguage in MESSAGE_POPUP	

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_Adr_Name3 is empty and GD_Adr_Name3.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestGDFieldName3 in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and  GD_Adr_Name3 is empty and GD_Adr_Name3.IsMandatory is true and HF_RegionalCountry.Value is not 'FR' then
			set value MESSAGES.ERRsubmitRequestGDFieldName4 in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_Com_Telebox is empty and HF_VendorCountry.Value is not WF then
			set value MESSAGES.ERRFieldTelebox in MESSAGE_POPUP		
			
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_Ctr_Industry is empty and GD_Ctr_Industry.IsMandatory is true then
			set value MESSAGES.ERRFieldIndustry in MESSAGE_POPUP		
			
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_Adr_Country.Value is not 'IT' and GD_Ctr_TaxCode1.Value is empty and GD_Ctr_TaxCode1.IsMandatory is true then 
			set value MESSAGES.ERRsubmitRequestGDFieldTaxCode1 in MESSAGE_POPUP			   

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_Adr_Country.Value is 'PT' and GD_Ctr_IsNaturalPerson.Value is true and GD_Ctr_TaxCode1.Value.Length < 9 then
			set value MESSAGES.ERRsubmitRequestGDFieldTaxCode1Inv in MESSAGE_POPUP	 

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and  GD_Adr_Country.Value is 'IT' and GD_Ctr_IsNaturalPerson.Value is true and GD_Ctr_TaxCode2 is empty and GD_Ctr_TaxCode2.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestGDFieldTaxCode2Empty in MESSAGE_POPUP
	
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and  GD_Adr_Country.Value is 'IT' and GD_Ctr_IsNaturalPerson.Value is true and GD_Ctr_VATRegistrationNumber is empty and GD_Ctr_VATRegistrationNumber.IsMandatory is true then
			set value MESSAGES.GD_Ctr_VATRegistrationNumber in MESSAGE_POPUP
	
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_Adr_Country.Value is not 'IT' and GD_Ctr_TaxCode1.Value is empty then 
			set value MESSAGES.ERRsubmitRequestGDFieldTaxCode1 in MESSAGE_POPUP		

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and CC_AM_BPClassification is empty and CC_AM_BPClassification is visible and CC_AM_BPClassification.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestRHFieldBPC in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and CC_PT_PaymentTerms is visible and CC_PT_PaymentTerms is empty then
			set value MESSAGES.ERRsubmitRequestCCFieldPaymentTerm in MESSAGE_POPUP
			
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and SO_TermsOfPaymentKey is empty and HF_CompanyCode.Value is not '563M' then
			set value MESSAGES.ERRSubmitRequestPOTermsPaymentEmpty in MESSAGE_POPUP
	
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and SO_Incoterms is empty and HF_CompanyCode.Value is not '563M' then
			set value MESSAGES.ERRsubmitRequestPOFieldIncoterms in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and SO_IncotermsPart2 is empty and HF_CompanyCode.Value is not '563M' then
			set value MESSAGES.ERRsubmitRequestPOFieldIncoterms2 in MESSAGE_POPUP
				
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and KNVV_KVGR5 is empty and KNVV_KVGR5.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestSOfieldCGRP5 in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_RequestType.Value is 'CC_CC' and CC_AM_BPClassification is empty then
			set value MESSAGES.ERRsubmitRequestRiskClassValue in MESSAGE_POPUP
			
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_SAPNumber is visible and DDLDCReqAction.Value is 'SUBMITTED' and HF_RequestType.Value is 'CC' and GD_SAPNumber is empty then
			set value ERRsubmitRequestRHFieldSAP in MESSAGE_POPUP
		
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_SAPNumber.Visible is true and DDLDCReqAction.Value is STATES.SUBMITTED and HF_RegionalCountry.Value is 'BE' and GD_SAPNumber.Value is not empty and GD_SAPNumber.Value < 1000000000 or GD_SAPNumber.Value > 1999999999 then
			set value MESSAGES.ERRsubmitRequestRHFieldSAPInv in MESSAGE_POPUP 

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_SAPNumber.Visible is true and DDLDCReqAction.Value is STATES.SUBMITTED and HF_RegionalCountry.Value is 'LU' and GD_SAPNumber.Value is not empty and GD_SAPNumber.Value < 2000000000 or GD_SAPNumber.Value > 2999999999 then
			set value MESSAGES.ERRsubmitRequestRHFieldSAPInv2 in MESSAGE_POPUP 

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestState.Value is 'DRAFT' and ATTACHMENT.Items.Count is 0 then
			set value ERRsubmitRequestAttachment in MESSAGE_POPUP 

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and  HF_RequestType.Value is not 'CM_BLK' and GD_Adr_PostalCode is empty then
			set value ERRsubmitRequestGDPostalCode in MESSAGE_POPUP 

		HF_RequestType.Value is not 'CM_BLK' and GD_Adr_PostalCode.Value is empty and HF_AccountGroup.Value in {'YVT6','YVT9','YCT6','YCT9'} and GD_Adr_Region.Value not in {'75','2A','2B'} and GD_Adr_PostalCode.Value not starts with GD_Adr_Region.Value then
			set value MESSAGES.ERRsubmitRequestGDPostalCode in MESSAGE_POPUP

		HF_RequestType.Value is not 'CM_BLK' and GD_Adr_PostalCode.Value is empty and HF_AccountGroup.Value in {'YVT6','YVT9','YCT6','YCT9'} and GD_Adr_Region.Value is '75' and GD_Adr_PostalCode.Value not starts with '00' then
			set value MESSAGES.ERRsubmitRequestGDPostalCode in MESSAGE_POPUP

		HF_RequestType.Value is not 'CM_BLK' and GD_Adr_PostalCode.Value is empty and HF_AccountGroup.Value in {'YVT6','YVT9','YCT6','YCT9'} and GD_Adr_Region.Value in {'2A', '2B'} and GD_Adr_PostalCode.Value not starts with '20' then
			set value MESSAGES.ERRsubmitRequestGDPostalCode in MESSAGE_POPUP

		GHF_RequestType.Value is not 'CM_BLK' and D_Adr_CountryGD.Value is 'ES' and GD_Adr_PostalCode.Value.Length is not 5 and GD_Adr_PostalCode.Value >= 53000 then
			set value MESSAGES.ERRspanishPostalCode in MESSAGE_POPUP

		HF_RequestType.Value is not 'CM_BLK' and GD_Adr_CountryGD.Value is 'GR' and GD_Adr_PostalCode.Value.Length is not 5  then
			set value MESSAGES.ERRsubmitRequestGDPostalCode in MESSAGE_POPUP
		
		HF_RequestType.Value is not 'CM_BLK' and GD_Adr_CountryGD.Value is 'IT' and GD_Adr_PostalCode.Value.Length is not 5 then 
			set value MESSAGES.ERRitalianPostalCode in MESSAGE_POPUP

		HF_RequestType.Value is not 'CM_BLK' and GD_Adr_CountryGD.Value is 'PT' and GD_Adr_PostalCode.Value.Length is not 8 then
			set value MESSAGES.ERRportughesePostalCode in MESSAGE_POPUP

		; TODO: CHECK THIS WITH SEB?
		ATTACHMENT.IsMandatory is true or HF_MandatoryAttachment is true and ATTACHMENT.Items.Count is 0 then
			set value MESSAGES.ERRsubmitRequestAttachment in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and SO_CustomerGroup is empty and HF_CompanyCode.Value is not '563M' then
			set value MESSAGES.ERRsubmitRequestSAFieldCGroup in MESSAGE_POPUP
		
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and SO_CustPricingProc is empty and HF_CompanyCode.Value is not '563M' then
			set value MESSAGES.ERRsubmitRequestCustPricProcEmpty in MESSAGE_POPUP
		
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and SO_CustomerStatsGroup is empty and HF_CompanyCode.Value is not '563M' then
			set value MESSAGES.ERRSubmitRequestCustStatsGroup in MESSAGE_POPUP
		
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry.Value is not 'FR' and  and SO_CustomerStatsGroup is empty and HF_CompanyCode.Value is not '563M' then is empty and HF_CompanyCode.Value is not '563M' then
			set value MESSAGES.ERRsubmitRequestSAFieldCShipping in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and SO_TaxClassification is empty and HF_CompanyCode.Value is not '563M' then is empty and HF_CompanyCode.Value is not '563M' then
			set value MESSAGES.ERRSubmitRequestTaxClassfic in MESSAGE_POPUP
		
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value is YCT6 and GD_Ctr_TaxCode1.Value is empty and GD_Ctr_TaxCode1.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestFieldTaxCode1_14 in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value is YCT6 and GD_Ctr_TaxCode1.Value.Length < 14 and GD_Ctr_TaxCode1.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestFieldTaxCode1_14 in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value is YCT6 and GD_Ctr_TaxCode2.Value is empty and GD_Ctr_TaxCode1.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestGDFieldTaxCode2_9  in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value is YCT6 and GD_Ctr_TaxCode2.Value.Length < 9 and GD_Ctr_TaxCode1.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestGDFieldTaxCode2_9  in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value is YCT6 and GD_Ctr_VATRegistrationNumber.Value is empty and GD_Ctr_TaxCode1.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestFieldVAT in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value is YCT6 and GD_Ctr_VATRegistrationNumber.Value.Length < 13 and GD_Ctr_TaxCode1.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestFieldVAT in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value is YCT6 and GD_Ctr_PIVA.Value is empty and GD_Ctr_TaxCode1.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestFieldSIRET_14 in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value is YCT6 and GD_Ctr_PIVA.Value.Length < 13 and GD_Ctr_TaxCode1.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestFieldSIRET_14 in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and CC_DD_DunningProcedure is empty and CC_DD_DunningProcedure.IsMandatory and CC_DD_DunningProcedure.Visible is true then
			set value MESSAGES.ERRsubmitRequestCCFieldDunnigProc in MESSAGE_POPUP

		; TODO: REPLACE FOR ACCOUNT GROUP FOR CUSTOMER COUNTYR, NOT FOR REGIONAL COUNTRY - NEED AN EXTRA FIELD
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value in {YCT6,YCT9} and GD_Adr_POBoxLoc.IsMandatory is true and GD_Adr_POBoxLoc is empty then
			set value MESSAGES.ERRsubmitRequestPOBOCInformed in MESSAGE_POPUP
			
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value in {YCT6,YCT9} and GD_Adr_POBoxPostalCode.IsMandatory is true and GD_Adr_POBoxPostalCode is empty then
			set value MESSAGES.ERRsubmitRequestGDPOBox in MESSAGE_POPUP
		
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value in {YCT6,YCT9} and GD_Adr_POBoxPostalCode is not empty and GD_Adr_POBoxPostalCode.Length < 5 then
			set value MESSAGES.ERRsubmitRequestGDPOBoxValid in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value in {YCT6,YCT9} and GD_Adr_POBoxPostalCode is not empty and GD_Adr_Region.Value not in {'75','2A','2B'} and GD_Adr_POBoxPostalCode.Value not starts with GD_Adr_Region.Value then
			set value MESSAGES.ERRsubmitRequestGDPOBoxValid in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value in {YCT6,YCT9} and GD_Adr_POBoxPostalCode is not empty and GD_Adr_Region.Value is '75' and GD_Adr_POBoxPostalCode.Value is not '00' then
			set value MESSAGES.ERRsubmitRequestGDPOBoxValid in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value in {YCT6,YCT9} and GD_Adr_POBoxPostalCode is not empty and GD_Adr_Region.Value is '2A' and GD_Adr_POBoxPostalCode.Value is not '20' then
			set value MESSAGES.ERRsubmitRequestGDPOBoxValid in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_AccountGroup.Value in {YCT6,YCT9} and GD_Adr_POBoxPostalCode is not empty and GD_Adr_Region.Value is '2B' and GD_Adr_POBoxPostalCode.Value is not '20' then
			set value MESSAGES.ERRsubmitRequestGDPOBoxValid in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry.Value is 'FR' and KNVV_AUTLF.Value is true and KNVV_AUTLF is visible and KNVV_KZTLF is visible and KNVV_KZTLF.Value is not empty then
			set value MESSAGES.ERRsubmitRequestSAFieldPart in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry.Value is 'FR' and KNVV_AUTLF.Value is true and KNVV_AUTLF is visible and KNVV_KZTLF is visible and KNVV_KZTLF.Value is 'D' then
			set value MESSAGES.ERRsubmitRequestSAFieldPart in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry.Value is 'FR' and KNVV_AUTLF.Value is true and KNVV_AUTLF is visible and KNVV_KZTLF is visible and KNVV_KZTLF.Value in {'A','B','C'} and KNVV_ANTLF.Value > 1 then
			set value MESSAGES.ERRsubmitRequestSAFieldNumber in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry.Value is 'FR' and KNVV_AUTLF.Value is false and KNVV_AUTLF is visible and KNVV_KZTLF.Value in {'A','B'} and KNVV_ANTLF.Value > 1 then
			set value MESSAGES.ERRsubmitRequestSAFieldNumber in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry.Value is 'FR' and KNVV_VWERK.Value is empty and KNVV_VWERK.IsMandatory is true and KNVV_VWERK.Visible is true then
			set value MESSAGES.ERRsubmitRequestSAFieldDeliver in MESSAGE_POPUP
		
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry.Value is 'FR' and KNVV_KTGRD.Value is empty and KNVV_KTGRD.IsMandatory is true and KNVV_KTGRD.Visible is true then
			set value MESSAGES.ERRSubmitRequestAccountAssigmnt in MESSAGE_POPUP
		
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry.Value is 'FR' and SO_CustomerShippingConditions.Value is empty and SO_CustomerShippingConditions.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestSAFieldCShipping in MESSAGE_POPUP
					
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and CC_CO_AccountingClerk.IsMandatory is true CC_CO_AccountingClerk is empty and CC_CO_AccountingClerk is visible then
			set value MESSAGES.ERRsubmitRequestCCFieldAccountingClerk in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and CC_PT_PaymentMethods.IsMandatory is true CC_PT_PaymentMethods is empty and CC_PT_PaymentMethods is visible then
			set value MESSAGES.ERRsubmitRequestCCViewFieldPaymentMethod in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry.Value is 'GR' and GD_Ctr_TaxCode2 is empty and GD_Ctr_TaxCode2.Value.Length < 9 and GD_Ctr_TaxCode2.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestGDFieldTaxCode2_9 in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and SO_SalesOrderCurrency.IsMandatory is true SO_SalesOrderCurrency is empty and SO_SalesOrderCurrency is visible then
			set value MESSAGES.ERRsubmitRequestSAFieldSOC in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and CC_CO_ReconAccount.IsMandatory is true CC_CO_ReconAccount is empty and CC_CO_ReconAccount is visible then
			set value MESSAGES.ERRsubmitRequestSelectRecon in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry is 'GR' and GD_Ctr_CustomerClassification.Value is 'G' and DDLDCComment is empty and CC_CO_ReconAccount is visible then
			set value MESSAGES.ERRsubmitRequestComment in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry is 'GR' and SO_SalesOffice.Value is empty and SO_SalesOffice is visible then
			set value MESSAGES.ERRsubmitRequestSAFieldOffice in MESSAGE_POPUP

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and HF_RegionalCountry is 'GR' and GD_Adr_City2 is empty and GD_Adr_City2.IsMandatory is true and GD_Adr_City2 is visible then
			set value MESSAGES.ERRsubmitRequestGDFieldDistrict in MESSAGE_POPUP
	
		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_CLERK'} and HF_RequestType.Value is not 'CM_BLK' and GD_Adr_Country.Value is 'GR' and GD_Adr_City2 is empty and GD_Adr_City2.IsMandatory is true and GD_Adr_City2 is visible then
			set value MESSAGES.ERRsubmitRequestGDFieldDistrict in MESSAGE_POPUP
	
		HF_CurrentRole.Value is 'MDMC3_ENQ' and HF_RequestType.Value is not 'CC' and DDLDCComment.Value is empty then
			set value MESSAGES.ERRsubmitRequestComment in MESSAGE_POPUP

		DDLDCComment.Value is not empty and DDLDCComment.Value.Length > 2000 then 
			set value MESSAGES.ERRcommentLenght in MESSAGE_POPUP

		GD_Adr_Name is empty then
			set value MESSAGES.ERRsubmitRequestGDfieldCName in MESSAGE_POPUP

		GD_Adr_Street is empty then
			set value MESSAGES.ERRsubmitRequestGDfieldCStreet in MESSAGE_POPUP

		GD_Adr_Region is empty and GD_Adr_Region.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestGDfieldCStreet in MESSAGE_POPUP

		GD_Adr_City is empty then
			set value MESSAGES.ERRsubmitRequestGDfieldCCity in MESSAGE_POPUP
		
		GD_Com_LanguageCode.Value is empty then
			set value MESSAGES.ERRsubmitRequestGDFieldLanguage in MESSAGE_POPUP	

		GD_Adr_Country.Value is 'GR' and GD_Adr_Name3.Value is empty then
			set value MESSAGES.ERRsubmitRequestGDFieldName3 in MESSAGE_POPUP
		
		GD_Adr_Country.Value is 'FR' and GD_Adr_Name4.Value is empty and GD_Adr_Name4.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestGDFieldName4 in MESSAGE_POPUP
					
		GD_Adr_Country.Value is 'GR' and GD_Adr_City2.Value is empty and GD_Adr_City2.IsMandatory is true then
			set value MESSAGES.ERRsubmitRequestGDfieldCSRegion in MESSAGE_POPUP

		GD_Com_Telebox.Value is empty then
			set value MESSAGES.ERRFieldTelebox in MESSAGE_POPUP

		HF_RequestType.Value is not 'CM_BLK' and GD_Adr_Country.Value is not 'IT' and HF_AccountGroup.Value not in {'YCT6', 'YVT6'} and GD_Ctr_TaxCode1.Value is empty and GD_Ctr_TaxCode1.IsFieldMandatory then
			set value MESSAGES.ERRsubmitRequestGDFieldTaxCode1 in MESSAGE_POPUP			   

		GD_Adr_Country.Value is 'PT' and GD_Ctr_IsNaturalPerson.Value is true and GD_Ctr_TaxCode1.Value.Length < 9 then
			set value MESSAGES.ERRsubmitRequestGDFieldTaxCode1Inv in MESSAGE_POPUP

		HF_CompanyCode.Value is '5240' and GD_Ctr_NIF.Value starts with {'1','2'} or GD_Ctr_TaxCode1 starts with {'1','2'} then
			set label MESSAGES.MSGNiss in TBCustomerVAT


		; TODO: ValidateBankDetails

		; TODO: CalculateExternalNumber
	
		REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
			this visible false

		HF_RequestState.Value in {'Locked', 'Closed'} then
			this visible false
		else
			this visible true
			this enable true



	with triggers

		this on click
		this loads

; ---------------------------------------------------------------------------- 

; TODO: SEB probably we do not need this?		
; TESTGEN : DEFAULTS=3
Entity btnClose is Button in frmMain

	with defaults
		label LABELS.btnClose


; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, RULES=5, ACTIONS=2, TRIGGERS=2
Entity GD_Ctr_IsNaturalPerson is CheckBox in frmMain

	with defaults
		label LABELS.labGD_Ctr_IsNaturalPerson
		value false

	with rules
	
		; TODO: MISSING FRANCE PARTNER AND REGIONAL DUE TO LEGAL FORM - CHECK LATER
		; ALL FIELDS IN	DIV_ADDITIONAL_INFO_NATURAL_PERSON mandatory
		HF_RegionalCountry.Value is 'ES' and GD_Ctr_TaxCode1.Value starts with {'P', 'Q', 'S'} then 
			set value false in GD_Ctr_IsNaturalPerson
			set value 'G' in GD_Ctr_CustomerClassification

		HF_RegionalCountry.Value is 'ES' and GD_Ctr_TaxCode1.Value starts with {'X','1','2','3','4','5','6','7','8','9'} then 
			set value true in GD_Ctr_IsNaturalPerson 
			set value 'NG' in GD_Ctr_CustomerClassification
			
		HF_CurrentRole.Value is 'MDMC3_RCO' then
			GD_Ctr_IsNaturalPerson enabled true

		HF_CurrentRole.Value in {'MDMC3_ENQ', 'MDMC3_RCO', 'MDMC3_CLERK'} then 
			this enabled true
		else
			this enabled false

		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
	with actions
		ATTACHMENT mandatory  true  
		set value true in HF_MandatoryAttachment

		; DDLDCComment mandatory  false
	with triggers 
		on change
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : RULES=1, DEFAULTS=3, ACTIONS=0, TRIGGERS=1
Entity ATTACHMENT is AttachmentManager in frmMain

	with defaults
		mandatory true
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} then
			this enable false	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TODO: CHECK
; TESTGEN : RULES=0, DEFAULTS=3, ACTIONS=0, TRIGGERS=1
Entity SAP_Message is TextBox in frmMain

	with defaults
		label LABELS.labSAP_Message
		enable false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 


; TESTGEN : RULES=1, DEFAULTS=3, ACTIONS=0, TRIGGERS=1
Entity GD_SAPNumber is TextBox in frmMain

	with defaults
		visible false
		label LABELS.labSAPNumber
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : RULES=1, DEFAULTS=3, ACTIONS=0, TRIGGERS=1
Entity DDLDCComment is TextBox in frmMain

	with defaults
		label LABELS.labComments
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
		; TODO: CHECK
		REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
			this visible false
	with triggers
		this loads

; ---------------------------------------------------------------------------- 

; TESTGEN : RULES=2, DEFAULTS=3, ACTIONS=0, TRIGGERS=1
Entity btnSCClose is Button in frmMain

	with defaults
		label LABELS.btnClose

	with rules
		HF_RequestState.Value is not CLOSED and btnSubmit.Visible is true then
			this visible true

		btnClose.Visible is true then
			this visible false
		else
			this visible true

	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : RULES=1, DEFAULTS=3, ACTIONS=0, TRIGGERS=1
Entity SR_Comments is TextBox in frmMain

	with defaults
		label LABELS.labSR_Comments
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	

	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : RULES=1, DEFAULTS=3, ACTIONS=0, TRIGGERS=1
Entity btnBack2 is Button in frmMain

	with defaults
		label LABELS.btnBack

	with rules
		HF_RequestState.Value is CLOSED then
			this visible false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : RULES=1, DEFAULTS=3, ACTIONS=1, TRIGGERS=2
Entity btnSave is Button in frmMain

	with defaults
		label LABELS.btnSave
	
	with actions
		this enable false
	
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} then
			this enable false	
		else
			this enable true

	with triggers
		this on click
		this loads
; ---------------------------------------------------------------------------- 

Entity btnCloseFinal is Button in frmMain

	with defaults
		label LABELS.btnClose

	with rules
		HF_CurrentRole.Value is 'MDMC3_CLERK' then
			this visible true
		else
			this visible false

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4
Entity PF_PartnerFunction is DropDownList in PF_Grid
	with defaults
		label LABELS.labPartnerFunction
		load data from DATASOURCE.MDMC3_PartnerFunction with arguments { FlagActive : true, ClusterCountryCode : HF_RegionalCountry.Value}

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3
Entity PF_Number is TextBox in PF_Grid
	with defaults
		label LABELS.labPFNumber
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3
Entity PF_btnInsert is Button in PF_Grid
	with defaults
		label LABELS.btnInsert
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=4, TRIGGERS=1, RULES=1
Entity PF_Grid is Grid in frmMain
	with defaults
		define column GRID_PF_PartnerFunction	with arguments { ControlID : PF_PartnerFunction, DataField : DisplayName, Header : LABELS.labSurname, Visible : true}
		define column GRID_PF_Number			with arguments { ControlID : PF_Number, DataField : Code, Header : LABELS.labNumber, Visible : true, MaxLength : 15}
		; define column GRID_PF_Default			with arguments { ControlID : IsDefault, DataField : IsDefault, Visible : true}
		
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	with triggers
		this loads

; ----------------------------------------------------------------------------	

; --- CONTACT PERSONS --------------------------------------------------------

; TESTGEN : DEFAULTS=3, ACTIONS=1, TRIGGERS=1
Entity CP_btnClearAll is Button in CP_Grid

	with defaults
		label LABELS.btnClearAll

	with actions
		clear CP_Grid
		
	with triggers
		this clicks

; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=1, ACTIONS=0, TRIGGERS=1
Entity CP_Surname is TextBox in CP_Grid

	with defaults
		label LABELS.labCP_Surname
	with rules
		HF_AccountGroup.Value in {'YCT6', 'YCT9'} then
			this visible false

	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=1, ACTIONS=0, TRIGGERS=1
Entity CP_Name is TextBox in CP_Grid

	with defaults
		label LABELS.labCP_Name
	with rules
		HF_AccountGroup.Value in {'YCT6', 'YCT9'} then
			this visible false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=6, RULES=1, ACTIONS=0, TRIGGERS=1
Entity CP_Department is DropDownList in CP_Grid

	with defaults
		label LABELS.labCP_Department
		data field DisplayName
		value field Code
		load data from DATASOURCE.MDMC3_Department with arguments {FlagActive : true}
	with rules
		HF_AccountGroup.Value in {'YCT6', 'YCT9'} then
			this visible false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 
; TESTGEN : DEFAULTS=3, ACTIONS=0, TRIGGERS=1
Entity CP_Telephone is TextBox in CP_Grid

	with defaults
		label LABELS.labCP_Phone
	with rules
		HF_AccountGroup.Value in {'YCT6', 'YCT9'} then
			this visible false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=1, ACTIONS=0, TRIGGERS=1
Entity CP_Fax is TextBox in CP_Grid

	with defaults
		label LABELS.labCP_Fax
	with rules
		HF_AccountGroup.Value in {'YCT6', 'YCT9'} then
			this visible false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=1, ACTIONS=0, TRIGGERS=1
Entity CP_Email is TextBox in CP_Grid

	with defaults
		label LABELS.labCP_Email
	with rules
		HF_AccountGroup.Value in {'YCT6', 'YCT9'} then
			this visible false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=1, ACTIONS=0, TRIGGERS=1
Entity CP_Default is CheckBox in CP_Grid

	with defaults
		label LABELS.labCP_Default
	with rules
		HF_AccountGroup.Value in {'YCT6', 'YCT9'} then
			this visible false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=3, RULES=1, ACTIONS=0, TRIGGERS=1
Entity CP_btnInsert is Button in CP_Grid
	with defaults
		label LABELS.btnInsert
	with rules
		HF_AccountGroup.Value in {'YCT6', 'YCT9'} then
			this visible false
	with triggers
		this loads
; ---------------------------------------------------------------------------- 

; TESTGEN : DEFAULTS=10, RULES=2, ACTIONS=0, TRIGGERS=1
Entity CP_Grid is Grid in frmMain
	with defaults
		define column GRID_CP_Name				with arguments { ControlID : CP_Name ,DataField : Name, Header : LABELS.labName, MaxLength : 100, Visible : true}
		define column GRID_CP_Surname			with arguments { ControlID  : CP_Surname ,DataField : Surname, Header : LABELS.labSurname, MaxLength : 100, Visible : true}
		define column GRID_CP_Department		with arguments { ControlID CP_Department: ,DataField : Deparment, Header : LABELS.labDepartment, Visible : true}
		define column GRID_CP_Telephone			with arguments { ControlID : CP_Telephone ,DataField : Telephone, Header : LABELS.labBankControlKey, Visible : true}
		define column GRID_CP_Fax				with arguments { ControlID : CP_Fax,DataField : Fax, Header : LABELS.labFax, Visible : true}
		define column GRID_CP_Email				with arguments { ControlID : CP_Email,DataField : Email, Header : LABELS.labEmail, Visible : true}
		; define column GRID_CP_KNVK_NAME1		with arguments { ControlID : ,DataField : KNVK_NAME1, Visible : false}
		define column GRID_CP_Default			with arguments { ControlID : CP_Default,	DataField : Default, Visible : true}
		
	with rules
		HF_AccountGroup.Value in {'YCT6', 'YCT9'} then
			this visible false
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value in {'MDMC3_SUS', 'MDMC3_RCO'} or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false		
				
	with triggers
		; on row inserted
		; on row deleted
		; on row updated
		this loads

; ----------------------------------------------------------------------------	

; TESTGEN : DEFAULTS=2, RULES=1, TRIGGERS=1, ACTIONS=0
Entity SO_lbxSODSalesOrganization1 is Object in frmMain
	with rules
		HF_RequestState.Value in {'Locked', 'Closed'} or HF_RequestType.Value is 'CM_BLK' or HF_CurrentRole.Value is 'MDMC3_SUS' or REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false	
	with triggers
		this loads


; ----------------------------------------------------------------------------	