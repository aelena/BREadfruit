
; ----------------------------------------------------------------------------	
; BEGIN MAIN FORM CONTROL DEFINITION
; ----------------------------------------------------------------------------	

; -- RULES FOR CUSTOMER MAIN FORM (MDM.ASPX)


Entity GD_Ctr_RiskClassification is DropDownList in frmMain

	with defaults
		enabled true
		visible true
		value "00"
		; only two values, 00 and 09
		load data from DATASOURCE.MDM_RiskClassifications
		label LABELS.labGD_Ctr_RiskClassification

	with rules
		REQUEST.CURRENT_ROLE not in {"RCO","ENQ","CLERK"} then enabled false

		REQUEST.CURRENT_ROLE is ROLES.RCO and REQUEST.COUNTRY in {IT, GR} then
			this enabled 

		GD_Ctr_RiskClassification.Value is '' then
			GD_Ctr_RiskClassification enabled true

		REQUEST.STATUS is REQUEST.CLOSED then
			enabled false

	with triggers
		; TODO FIND A BETTER WAY TO EXPRESS THIS....
		; BANK_INSERTED EVALUATE -----

; ----------------------------------------------------------------------------	

Entity GD_Adr_Country is DropDownList in frmMain
	with defaults
		visible true
		enabled false					; this control is always disabled
		value USER.COUNTRY				; -- depends on country selected in search form, so this data has to be passed
		load data from DATASOURCE.MDMC_Countries
		mandatory true
		label LABELS.labGD_GD_Adr_Country

; ----------------------------------------------------------------------------	


Entity GD_Ctr_Industry is DropDownList in frmMain
	with defaults
		mandatory true
		visible true
		label LABELS.labIndustries
		; if there are no specific data for this specific country, data for "EN" should be loaded
		load data from VENDOR.ACCOUNT_GROUP with arguments {"FlagActive": true, "Country" : REQUEST.VENDOR_COUNTRY}

	with rules
		VENDOR.ACCOUNT_GROUP in {"YCT6", "YVT6"} then
			load data from DATASOURCE.MDM_Industries with arguments {"FlagActive": true, "Country" : "FR"}
			; this equals to this line in original code
			; this.m_mdmSessionInfo.IndustryCountry = Business.Constants.Countries.France;
			set value "FR" in REQUEST.INDUSTRY_COUNTRY

		VENDOR.ACCOUNT_GROUP in {"YCT9", "YVT9"} then
			load data from DATASOURCE.MDM_Industries with arguments {"FlagActive": true, "Country" : "EN"}
			; this.m_mdmSessionInfo.IndustryCountry = Business.Constants.Countries.France;
			set value "EN" in REQUEST.INDUSTRY_COUNTRY
			mandatory false

; ----------------------------------------------------------------------------	


Entity GD_Ctr_GFORM is DropDownList in frmMain
	with defaults
		label LABELS.labLegalForm
		visible false
		; data source is same for vendors and customers
		load data from DATASOURCE.MDM_LegalForms with arguments {"FlagActive" : true }

	with rules
		VENDOR.ACCOUNT_GROUP in {"YCT6", "YVT6"} then
			visible true

		VENDOR.ACCOUNT_GROUP in {"YCT6", "YVT6"} and REQUEST.ROLE is REQUEST.ROLES.CLERK then
			mandatory true



Entity CC_DD_DunningProcedure is DropDownList in frmMain
	with defaults
		label LABELS.labDDDunningprocedure

	with rules
		REQUEST.COUNTRY is BE then
			set value Y1VE in CC_DD_DunningProcedure

		REQUEST.COUNTRY is LU then
			set value Y001 in CC_DD_DunningProcedure

		REQUEST.COMPANY_CODE is 5140 and GD_Ctr_CustomerClassification.Value is G then
			set value Y601 in CC_DD_DunningProcedure
	
		REQUEST.COMPANY_CODE is 5140 and GD_Ctr_CustomerClassification.Value is NG then
			set value Y602 in CC_DD_DunningProcedure
			
		REQUEST.COMPANY_CODE is 491E then
			set value Y602 in CC_DD_DunningProcedure

		REQUEST.VENDOR_COUNTRY is GR then
			set value Y704 in CC_DD_DunningProcedure