; ----------------------------------------------------------------------------
  -- LIST OF ALL ENTITIES FOUND 
; ----------------------------------------------------------------------------




;	TBCustomerName
;	TBCustomerCity
;	TBCustomerNumber
;	TBCustomerIFA
;	DDLDCountry
;	TBCustomerVAT
;	DDLCDCountry
;	DDLCDCompany
;	DDLCDSalesOrg
;	DDLCDDistribChannel
;	DDLCDivision
;	btnSearch
;	btnCreateCustomer
;	LBLSearchResultMessage


; ----------------------------------------------------------------------------


Entity rbSpiridon is RadioButton in frmSearch
	with defaults
		enabled false
		label "Spiridon"
		value true				; means checked

; ----------------------------------------------------------------------------	

Entity rbEPass is RadioButton in frmSearch
	with defaults
		enabled false
		label "Epass"
		value false				; means unchecked

; ----------------------------------------------------------------------------

Entity TBCustomerName is TextBox in frmSearch
	with defaults
		label LABELS.labCustomerName
		value   ''

	with actions
		hide btnCreateCustomer
		clear CustomerSearchResultGrid
		set hidden CustomerSearchResultGrid

	with rules
		
	with triggers
		TBCustomerName.Value changes
; ---------------------------------------------------------------------------- 

Entity TBCustomerCity is TextBox in frmSearch

	with defaults
		label LABELS.labCustomerCity
		value   ''

	with actions
		hide btnCreateCustomer
		set hidden CustomerSearchResultGrid
		clear CustomerSearchResultGrid

	with rules
		
	with triggers
		TBCustomerName.Value changes
; ---------------------------------------------------------------------------- 

Entity TBCustomerNumber is TextBox in frmSearch

	with defaults
		label LABELS.labCustomerNumber
		value   ''
		min length 10
		max length 10
		validation ^[0-9]{10}$

	with actions
		hide btnCreateCustomer
		hide CustomerSearchResultGrid
		clear CustomerSearchResultGrid

	with rules
		; show this message "This partner is not managed by Madam. Please contact GSS master data team." if starting with 0
		TBCustomerNumber.text starts with '0' then
			set value MESSAGES.VALIDATIONS.SEARCH.NOTMANAGED in MESSAGE_POPUP
		TBCustomerNumber.text not starts with '0' then
			set value '' in MESSAGE_POPUP

	with triggers
		this.value changes

	with constraints
		only numbers
			
; ---------------------------------------------------------------------------- 

Entity TBCustomerIFA is TextBox in frmSearch

	with defaults
		label LABELS.labCustomerIFA

	with actions
		hide btnCreateCustomer
		hide CustomerSearchResultGrid
		clear CustomerSearchResultGrid
	
	with rules
		; should this be moved to rules for the btnSearch button? maybe.....
		TBCustomerIFA.value is not '' then DDLDCountry not mandatory
		TBCustomerIFA.value is '' then DDLDCountry mandatory

	with triggers
		this.value changes

; ---------------------------------------------------------------------------- 

Entity DDLDCountry is DropDownList in frmSearch

	with defaults
		label LABELS.labCountry
		value USER.COUNTRY		; preselect user country if there is data in SCD for this user
		load data from DATASOURCE.MDM_Countries

	with actions
		set value '' in MESSAGE_POPUP
		hide CustomerSearchResultGrid
		hide btnCreateCustomer
		load data from DATASOURCE.MDMC_Countries 
		clear CustomerSearchResultGrid

	with rules
		DDLCDCountry.Value in {FR,GF,GP,RE,MQ,YT,NC,PF,PM,WF,MC} then label LABELS.labSIRET in TBVendorVAT
		DDLCDCountry.Value in {PT,ES} then label LABELS.labNIF in TBVendorVAT
		DDLCDCountry.Value is IT then label LABELS.labPartitaIVA in TBVendorVAT
		DDLCDCountry.Value not in {PT,ES,IT,FR,GF,GP,RE,MQ,YT,NC,PF,PM,WF,MC} then label LABELS.labVAT in TBVendorVAT
	
	with triggers
		this.value changes 

; ---------------------------------------------------------------------------- 

Entity TBCustomerVAT is TextBox in frmSearch

	with defaults
		value ''
		label LABELS.labCustomerVAT

	with actions
		hide btnCreateCustomer
		hide CustomerSearchResultGrid
		clear CustomerSearchResultGrid

	with triggers
		this.value changes

; ---------------------------------------------------------------------------- 

Entity DDLCDCountry is DropDownList in frmSearch

	with defaults
		label LABELS.labCountry
		value USER.COUNTRY		; preselect user country if there is data in SCD for this user
		load data from DATASOURCE.MDMC_ClusterCountries
		mandatory true

	with actions
		; load active companies for this country
		load data from DATASOURCE.MDM_ClusterCompanies with arguments {Country : this.Value} in DDLCDCompany
		; purge the data in this dropdownlist
		clear DDLCDSalesOrg
		hide CustomerSearchResultGrid
		clear CustomerSearchResultGrid
		load data from DATASOURCE.MDMC_ClusterDistributionChannels with arguments {Country: DDLCDCountry.Value, Company:DDLCDCompany.Value, SalesOrg:DDLCDSalesOrg.Value} in DDLCDDistribChannel
		DDLCDDistribChannel visible true
		hide btnCreateVendor


	with triggers
		this.value changes



; ---------------------------------------------------------------------------- 

Entity DDLCDCompany is DropDownList in frmSearch

	with defaults
		label LABELS.labCompany
		mandatory true
		value USER.COST_LOCATION_UNIT			; another data constant
		mandatory true

	with actions
		; load active companies for this country
		load data from DATASOURCE.MDMC_ClusterSalesOrganizations with arguments {CompanyCode: this.Value} in DDLCDSalesOrg 
		hide CustomerSearchResultGrid
		clear CustomerSearchResultGrid
		hide btnCreateVendor

	with triggers
		this.value changes

; ---------------------------------------------------------------------------- 

Entity DDLCDSalesOrg is DropDownList in frmSearch

	with defaults
		label LABELS.labSalesOrg
		value ''
		mandatory true

	with actions
		; load active companies for this country
		; this means the current ìmplementation needs to change a bit...
		; TODO: REORGANIZE THE TABLE TO REFLECT THIS CHANGES IN TEH VALUES LOADED IN THIS DIST CHANNEL COMBO ISNTEAD OF REMOVING BY CODE
		load data from DATASOURCE.MDMC_ClusterDistributionChannels with arguments {"FlagActive": true, "Country" : DDLCDCountry.Value} in DDLCDDistribChannel 
		hide CustomerSearchResultGrid
		clear CustomerSearchResultGrid
		hide btnCreateVendor

	with triggers
		this.value changes

; ---------------------------------------------------------------------------- 

Entity DDLCDDistribChannel is DropDownList in frmSearch

	with defaults
		label LABELS.labDistribChannel
		load data from DATASOURCE.MDMC_ClusterDistributionChannels with arguments {Country: DDLCDCountry.Value, Company:DDLCDCompany.Value, SalesOrg:DDLCDSalesOrg.Value}

	with actions
		hide CustomerSearchResultGrid
		clear CustomerSearchResultGrid
		hide btnCreateVendor

	with triggers
		this.value changes
; ---------------------------------------------------------------------------- 

Entity DDLCDivision is DropDownList in frmSearch

	with defaults
		visible false
		label LABELS.labDivision
		load data from DATASOURCE.MDMC_Divisions with arguments {Country: DDLCDCountry.Value, CompanyCode : DDLCDCompany.Value, SalesOrg : DDLCDSalesOrg.Value, FlagActive : true }

	; TODO: WHEN DOES THIS CONTROL BECOME VISIBLE
	with rules
		DDLCDivision is visible and DDLCDivision is empty then
			DDLCDivision mandatory
		DDLCDivision.Count > 0 then
			this visible true
		DDLCDivision.Count <= 0 then
			this visible false
		
; ---------------------------------------------------------------------------- 

Entity btnSearch is Button in frmSearch

	with defaults
		label LABELS.btnSearch

	with actions
		; TODO: CHECK LATER ON
		
		load data from DATASOURCE.USER_HAS_PERMISSIONS with arguments { User : USER.USER_ID, Country : DDLCDCountry.Value, Company : DDLCDCompany.Value, SalesOrganization : DDLCDSalesOrg.Value} in MESSAGE_POPUP
		load data from WEBSERVICE.CUSTOMER_SEARCH_SERVICE with arguments {CustomerName:TBCustomerName.Value, CustomerCity:TBCustomerCity, CustomerNumber:TBCustomerNumber.Value, CustomerCountry:DDLVDCountry.Value,TaxCode1:TBCustomerVAT.Value,TaxCode4:TBCustomerIFA.Value, Country:DDLDCountry.Value, CompanyCode:DDLCDCompany.Value, SalesOrganization:DDLCDSalesOrg.Value, Division:DDLCDivision } in CustomerSearchResultGrid

		; this means the database has to be asked to see if current user has permissions for the selected combination
		; of COUNTRY + COMPANY + PURCHASE ORG. If the user has permission, then go ahead, but if not
		; show an error message or popup
		; maybe this has to be defined a bit better
		; would this be DATASOURCE or maybe WEBSERVICE call?
		; what properties should be passed to identify the user? or shall this be somehow managed or injected by environment?
		
	with rules

		TBCustomerIFA.value is not empty then DDLDCountry mandatory

		DDLDCountry is empty then
			set value MESSAGES.VALIDATIONS.SEARCH.FILL01 in MESSAGE_POPUP
		
		TBCustomerName is empty and TBCustomerCity is empty and TBCustomerIFA is empty then
			set value MESSAGES.VALIDATIONS.SEARCH.FILL01 in MESSAGE_POPUP
	
		TBCustomerName is empty and TBCustomerCity is empty and TBCustomerIFA is empty and DDLDCountry is empty and TBCustomerVAT is empty then
			set value MESSAGES.VALIDATIONS.SEARCH.FILL02 in MESSAGE_POPUP
		
		TBCustomerName is empty and TBCustomerCity is not empty and TBCustomerName is empty and TBCustomerIFA is empty and DDLDCountry is empty and TBCustomerVAT is empty then
			set value MESSAGES.VALIDATIONS.SEARCH.FILL01 in MESSAGE_POPUP
	
		DDLCDCountry is empty or DDLCDCompany is empty or DDLCDSalesOrg is empty then
			; message: Fill fields Country, Company and Sales Organization
			set value MESSAGES.VALIDATIONS.SEARCH.FILL03 in MESSAGE_POPUP
		
		TBCustomerName is not empty and DDLDCountry is empty then
			set value MESSAGES.VALIDATIONS.SEARCH.FILL01 in MESSAGE_POPUP

		DDLCDivision is visible and DDLCDivision is empty then
			; show this message : Fill the field of Division Country
			set value MESSAGES.VALIDATIONS.SEARCH.FILL01 in MESSAGE_POPUP

		; this Company is deactivated for the moment
		; DLCDCompany.Company is 563M and DDLCDCountry is empty or DDLCDCompany is empty then
		;	; show this message : Fill fields Country and Company
		;	set value MESSAGES.VALIDATIONS.SEARCH.FILL05 in MESSAGE_POPUP


	with triggers
		this on click	

; ---------------------------------------------------------------------------- 

Entity btnCreateCustomer is Button in frmSearch

	with defaults
		label LABELS.btnCreateCustomer

	with actions
		; transition to the main form
		; TODO : guess we will have to pass some arguments here and map things to the conceptual model
		; TODO: PROBABLY NOT NEEDED
		change form to frmMain with arguments {"A" : "B"}

	with rules
		; how to specify all that happens server side here?
		; shall be express something like change form?

	with triggers
		this click
; ---------------------------------------------------------------------------- 

Entity LBLSearchResultMessage is Label in frmSearch

	with defaults

; ---------------------------------------------------------------------------- 

Entity CustomerSearchResultGrid is Grid in frmSearch
	with defaults
		visible false

	; TODO: DEFINE CONVENTIONS FOR GRID BETTER

	; MISSING ACTIOSN ON GRID BUTTONS


; ----------------------------------------------------------------------------	
;     END OF SEARCH FORM DEFINITION
; ----------------------------------------------------------------------------	

; ----------------------------------------------------------------------------	
; BEGIN MAIN FORM CONTROL DEFINITION
; ----------------------------------------------------------------------------	

; ----------------------------------------------------------------------------
;  -- LIST OF ALL ENTITIES FOUND in MDMC main FORM
; ----------------------------------------------------------------------------


; TODO: PENDING STUFF LIKE THE COMPOSITE CONTROLS-... FOR EXAMPLE CONTACT PERSONS ETC.....
;		AND TELEPHONES, EMAIL, ETC


;	labOpInfoCustomer
;	labOpInfoCountry
;	labOpInfoCC
;	labOpInfoSO
;	labOpInfoDC
;	GD_Adr_Name
;	GD_Adr_Name2
;	GD_Adr_Name3
;	GD_Adr_Name4
;	GD_Adr_Search
;	GD_Com_Comment
;	GD_Adr_Street
;	GD_Adr_Street2
;	GD_Adr_Street3
;	GD_Adr_Street4
;	GD_Adr_Street5
;	GD_Adr_CountryGD
;	GD_Adr_Region
;	GD_Adr_City
;	GD_Adr_City2
;	GD_Adr_PostalCode
;	GD_Adr_POBox
;	GD_Adr_POBoxPostalCode
;	GD_Adr_POBoxLoc
;	GD_Com_LanguageCode
;	GD_Com_Telebox
;	GD_Com_DataLine
;	GD_Ctr_CustomerNumber
;	GD_Ctr_Industry
;	GD_Ctr_UnsubscribeCMD
;	GD_Ctr_GFORM
;	GD_Ctr_PIVA
;	GD_Ctr_CF
;	GD_Ctr_VendorNumber
;	GD_Ctr_IFANumber
;	GD_Ctr_TaxCode1
;	GD_Ctr_TaxCode2
;	GD_Ctr_VATRegistrationNumber
;	labGD_MainlyMilitary
;	labGD_MainlyCivilian
;	GD_Nuclear
;	labGD_FreeZone
;	labGD_Embassy
;	GD_Nat_NaturalPerson
;	GD_Nat_BirthDate
;	GD_Nat_PlaceOfBirth
;	GD_Nat_Profession
;	GD_Nat_Sex
;	CC_CO_ReconAccount
;	CC_PT_PaymentTerms
;	CC_PT_PaymentMethods
;	CC_PT_ClearingWithCustomer
;	CC_PT_IndividualPayment
;	CC_CO_AccountingClerk
;	CC_DD_DunningProcedure
;	CC_DD_DunningArea
;	CC_AR_PledgeIndicator
;	KNVV_BZIRK
;	SO_CustomerGroup
;	SO_SalesOffice
;	KNVV_EIKTO
;	KNVV_VKGRP
;	SO_SalesOrderCurrency
;	KNVV_KONDA
;	KNVV_PLTYP
;	SO_CustPricingProc
;	SO_CustomerStatsGroup
;	SO_CustomerShippingConditions
;	KNVV_VWERK
;	KNVV_AUTLF
;	KNVV_ANTLF
;	KNVV_LPRIO
;	KNVV_KZTLF
;	KNVV_PRFRE
;	SO_Incoterms
;	SO_IncotermsPart2
;	SO_TermsOfPaymentKey
;	KNVV_KTGRD
;	SO_TaxClassification
;	KNKK_SBGRP
;	KNVV_KVGR1
;	KNVV_KVGR2
;	KNVV_KVGR3
;	KNVV_KVGR4
;	KNVV_KVGR5
;	KNKK_KNKLI
;	KNKK_KLIMK
;	KNKK_CTLPC
;	KNKK_DTREV
;	KNKK_NXTRV
;	KNKK_KRAUS
;	KNKK_DBRTG
;	KNKK_REVDB
;	KNKK_DBEKR
;	btnBlockAll
;	btnUnblockAll
;	BLK_GD_Ctr_UnsubscribeCMD
;	labCentralPostingBlock
;	BLK_CentralPostingBlock
;	labPostBlockingForCompanyCode
;	BLK_PostingBlockForCC
;	BLK_CentralSalesOrderBlock
;	BLK_OrdersBlockAtSalesArea
;	BLK_CentralDeliveriesBlock
;	BLK_DeliveriesBlockAtSalesArea
;	BLK_CentralBillingBlock
;	BLK_BillingBlockAtSalesArea
;	labCentralSalesSupportBlock
;	BLK_CentralSalesSupportBlock
;	labCentralSalesSupportBlockAtThisSalesArea
;	BLK_CentralSalesSupportBlockAtSalesArea
;	labCentralDelMasterRecord
;	BLK_CentralDeletionFlagMasterRecord
;	labDelFlagMasterCompanyCode
;	BLK_DeletionFlagMasterRecordCC
;	labDelFlagAtThisSalesArea
;	BLK_DeletionFlagMasterRecordSA
;	labCentralDelBlockMaster
;	BLK_CentralDeletionBlockMasterRecord
;	labDelBlockMasterCompany
;	BLK_DeletionBlockMasterRecordCC
;	TS_IsUrgentRequest
;	CostCenter
;	DDLDCReqAction
;	GD_SAPNumber
;	labNextRole
;	labNextAction
;	DDLDCComment
;	btnSubmit
;	btnClose
;	MADAM_MESSAGE_POPUP
;	GD_Ctr_RiskClassification
;	GD_Adr_Country
;	GD_Ctr_CustomerClassification
;	CC_AM_BPClassification
;	GD_Damex
;	GD_Ctr_IsNaturalPerson
;	labGD_DamexNote
;	ATTACHMENT
;	AttachHistory
;	SAP_Message
;	CostCenter
;	DDLDCReqAction
;	GD_SAPNumber
;	labNextRole
;	labNextAction
;	DDLDCComment
;	btnSCClose
;	SCMessage
;	lbFMRelevantFor
;	lbOtherDependencies
;	HF_RelevantForSUS
;	HF_MandatoryAttachment
;	HF_MandatoryComment
;	HF_RelevantForCO
;	HF_RelevantForClusterRCO
;	txbNextRole
;	SR_Comments
;	btnBack2
;	btnSave
;	btnCloseFinal
;	SummaryMESSAGE_POPUP



; SOME HIDDEN FIELDS - CC_AM_SortKey, CC_AM_InterestIndic, CC_AM_CashManagementGroup, KNB1.XZVER, CC_CO_AuthorizationGroup
; TODO: THINK IF NEEDED IN REQUEST MODEL OR MAPPINGS....1277


; ----------------------------------------------------------------------------


Entity labOpInfoCustomer is Label in frmMain

	with defaults
		label LABELS.labOpInfoVendor
		enable false


; ---------------------------------------------------------------------------- 

Entity labOpInfoCountry is Label in frmMain

	with defaults
		label LABELS.labOpInfoCountry
		enable false

; ---------------------------------------------------------------------------- 

Entity labOpInfoCC is Label in frmMain

	with defaults
		label LABELS.labOpInfoCC
		enable false

; ---------------------------------------------------------------------------- 

Entity labOpInfoSO is Label in frmMain

	with defaults
		label LABELS.labOpInfoPO
		enable false

; ---------------------------------------------------------------------------- 

Entity labOpInfoDC is Label in frmMain

	with defaults
		label LABELS.labOPInfoDC
		enable false

; ---------------------------------------------------------------------------- 

Entity GD_Adr_Name is TextBox in frmMain

	with defaults
		label LABELS.labName
		mandatory true
		max length 35
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
		REQUEST.ACCOUNT_GROUP in {YCT1,YCT2} then
			max length 32
		REQUEST.ACCOUNT_GROUP is YCT3 then
			max length 28
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
		set value SUBSTRING(GD_Adr_Name,2) in GD_Adr_Search
		set value GD_Adr_Name in B_GD_VB_AccountHolder
	with triggers 
		this on change
; ---------------------------------------------------------------------------- 

Entity GD_Adr_Name2 is TextBox in frmMain

	with defaults
		max length 32

	with rules
		; mandatory for ROLES.ENQ and in 5150 (the only Greece CoCD)
		REQUEST.COMPANY_CODE is 5150 and REQUEST.CURRENT_ROLE is ROLES.ENQ then 
			GD_Adr_Name4 mandatory true
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
		REQUEST.ACCOUNT_GROUP in {YCT1,YCT2} then
			max length 32
		REQUEST.ACCOUNT_GROUP is YCT3 then
			max length 28
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change

; ---------------------------------------------------------------------------- 

Entity GD_Adr_Name3 is TextBox in frmMain

	with defaults
		max length 32

	with rules
		; mandatory for ROLES.ENQ and in 5150 (the only Greece CoCD)
		REQUEST.COMPANY_CODE is 5150 and REQUEST.CURRENT_ROLE is ROLES.ENQ then 
			GD_Adr_Name4 mandatory true
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity GD_Adr_Name4 is TextBox in frmMain

	with defaults
		max length 32
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity GD_Adr_Search is TextBox in frmMain

	with defaults
		label LABELS.Search
		max length 20
		; put here the first 20 characters of the name (which in creations comes from search screen)
		value GD_Adr_Name1
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
		REQUEST.ACCOUNT_GROUP in {YCT6, YCT9} then
			max length 5			
			
; ---------------------------------------------------------------------------- 

Entity GD_Com_Comment is TextBox in frmMain

	with defaults
		label LABELS.labComment
		max length 35
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity GD_Adr_Street is TextBox in frmMain

	with defaults
		label LABELS.labHouseNumber
		mandatory true
		max length 32
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
		REQUEST.ACCOUNT_GROUP in {YCT1,YCT2} then
			max length 32
		REQUEST.ACCOUNT_GROUP is YCT3 then
			max length 28
	with actions
		; ATTACHMENT mandatory  false
		_COMMENT_ mandatory  true  
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity GD_Adr_Street2 is TextBox in frmMain

	with defaults
		max length 32

	with rules
		REQUEST.COUNTRY is FR then GD_Adr_Street2 not visible
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
		REQUEST.ACCOUNT_GROUP in {YCT1,YCT2} then
			max length 32
		REQUEST.ACCOUNT_GROUP is YCT3 then
			max length 28
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity GD_Adr_Street3 is TextBox in frmMain

	with defaults
		max length 32

	with rules
		REQUEST.COUNTRY is FR then GD_Adr_Street3 not visible
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
		REQUEST.ACCOUNT_GROUP in {YCT1,YCT2} then
			max length 32
		REQUEST.ACCOUNT_GROUP is YCT3 then
			max length 28
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity GD_Adr_Street4 is TextBox in frmMain

	with defaults
		max length 32

	with rules
		REQUEST.COUNTRY is FR then GD_Adr_Street4 not visible
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
		REQUEST.ACCOUNT_GROUP in {YCT1,YCT2} then
			max length 32
		REQUEST.ACCOUNT_GROUP is YCT3 then
			max length 28
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity GD_Adr_Street5 is TextBox in frmMain

	with defaults
		max length 32

	with rules
		REQUEST.COUNTRY is FR then GD_Adr_Street5 not visible
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity GD_Adr_CountryGD is DropDownList in frmMain

	with defaults
		label LABELS.labCountry
		mandatory true
		enable false
		; TODO: PENDING FINAL MODEL DEFINITION FROM FD
		value REQUEST.CUSTOMER_COUNTRY
 

; ---------------------------------------------------------------------------- 

;1) In customer creation from scratch MADAM has to check in table in sheet “Mandatory Region List” 
;	if it is mandatory and MADAM has to show in DDL the values according to the customer country.
;2) If customer country  belongs to YCT6 or YCT9 -> Region mandatory and the control generate postback
;3) if customer country belongs to YCT1 -> region mandatory /if region = 01 -> language = NL/If region = 02 OR 03 -> language = FR
;4) If customer country belongs to YCT6/YCT9: if region selected = "2A" -> Postal code begins with 20/
;    if region selected = "2B" -> Postal code begins with 20 else Postal code begins with code region

; TODO: I THINK THERE ARE MORE RULES

Entity GD_Adr_Region is DropDownList in frmMain

	with defaults
		label LABELS.labRegion
		load data from DATASOURCE.MDM_Regions with arguments {"FlagActive" : true, "CountryCode" : REQUEST.VENDOR_COUNTRY }

	with rules
		REQUEST.ACCOUNT_GROUP in {YCT1, YCT6, YCT9} then
			GD_Adr_Region mandatory true

		REQUEST.ACCOUNT_GROUP is YCT1 and GD_Adr_Region.Value is 01 then
			set value NL in GD_Com_Language

		REQUEST.ACCOUNT_GROUP is YCT1 and GD_Adr_Region.Value in {02, 03} then
			set value FR in GD_Com_Language

		REQUEST.ACCOUNT_GROUP in {YCT6, YCT9} and GD_Adr_Region.Value is 2A then
			set value 20 in GD_Adr_PostalCode

		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false

		REQUEST.ACCOUNT_GROUP in {YCT6,YVT6,YCT9,YVT9} and REQUEST.Region_IsMandatory and REQUEST.TYPE is CC then
			this mandatory true

		REQUEST.COUNTRY is FR then
			this mandatory true
			
; ---------------------------------------------------------------------------- 

Entity GD_Adr_City is TextBox in frmMain

	with defaults
		label LABELS.labCity
		mandatory true
		max length 35

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity GD_Adr_City2 is TextBox in frmMain

	with defaults
		visible false
		label LABELS.labDistrict

	with rules
		REQUEST.VENDOR_COUNTRY is GR and REQUEST.COUNTRY is GR then
			GD_Adr_City2 visible true

		REQUEST.VENDOR_COUNTRY is GR and REQUEST.COUNTRY is not GR then
			GD_Adr_City2 mandatory true

		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
; ---------------------------------------------------------------------------- 

;	"25-07-2014(RG): 1)By default maxlength = 10
;	IF vendor country belongs to YVT1/YVT2 -> Maxlength = 4
;	IF vendor country belongs to YVT3/YVT5 -> Maxlength = 5
;	IF vendor country belongs to YVT4 -> Maxlength = 8
;	IF vendor country belongs to YVT6/YVT9 -> Maxlength = 5 and control generate postback
;	2) If vendor country belongs to YVT6/YVT9->region code = postal code firts digits (2)
;	3)VALIDATIONS
;	If vendor country belongs to YVT6/YVT9-> only numbers and fists digits must be equal with region
;	If vendor country Spain-> only numbers and must be < 53000
;	If vendor country Greece-> only numbers
;	If vendor country Italy-> only numbers
;	If vendor country Portugal-> format 9999-999
;	If vendor country Luxemburg-> only numbers
;	If vendor country Belgium-> only numbers and
;	region 01 -> must be >=1500 and <=3999 OR >=8000 and <=9999
;	region 02 -> must be >=1300 and <=1499 OR >=4000 and <=7999
;	region 03 -> must be >=1000 and <=1299"

; TODO: TERMINAR DE REVISAR TODAS LAS REGLAS EN CODIGO 

Entity GD_Adr_PostalCode is TextBox in frmMain

	with defaults
		label LABELS.labPostalCode
		mandatory true
		max length 5

	with rules

		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
		
		;	IF vendor country belongs to YVT1/YVT2 -> Maxlength = 4 (only numbers - Format: XXXX)
		REQUEST.ACCOUNT_GROUP in {YVT1, YVT2} then
			max length 4
			validation ^[0-9]{4}$

		REQUEST.ACCOUNT_GROUP in {YVT3, YVT5, YVT7} then
			max length 5
			validation ^[0-9]{5}$

		REQUEST.ACCOUNT_GROUP is YVT4 then
			max length 8
			validation ^[0-9]{4}-[0-9]{3}$

		REQUEST.VENDOR_COUNTRY in {IT, GR} then
			max length 5

		REQUEST.VENDOR_COUNTRY is ES then
			max length 5
			validation ^[0-5]{1}[1-2]{1}[0-9]{3}$

		; post code must be >=1500 and <=3999 OR >=8000 and <=9999
		; the regular expression covers the ranges
		REQUEST.VENDOR_COUNTRY is BE and GD_Adr_Region is 01 then
			max length 4
			validation ^(1[5-9][0-9]{2}){1}|((2|3)[0-9]{3}){1}|((8|9)[0-9]{3})$
		
		; post code must be >=1300 and <=1499 OR >=4000 and <=7999
		REQUEST.VENDOR_COUNTRY is BE and GD_Adr_Region is 02 then
			max length 4
			validation ^(1[3-4][0-9]{2}){1}|([4-7][0-9]{3})$

		; post code must be >=1000 and <=1299
		REQUEST.VENDOR_COUNTRY is BE and GD_Adr_Region is 03 then
			max length 4
			validation ^(1[0-2][0-9]{2})$

		REQUEST.VENDOR_COUNTRY in {FR, GF, GP, MC, MQ, NC, PF, PM, RE, WF, YT} then
			max length 5
			validation ^[0-9]{5}$
			set value substring(GD_Adr_PostalCode,2) in GD_Adr_Region

		REQUEST.ACCOUNT_GROUP in {YCT6,YCT9} then
			max length 5
			mandatory true 

	

; ---------------------------------------------------------------------------- 

;	1)If regional country = France -> maxlength = 10
;	2) IF vendor country belongs to (SAP country code FR GF GP MC MQ NC PF PM RE WF YT) and POBox is informed  -> POBoxPostalCode, POBox and POBox City mandatory
;	else if POBox empty or informed with ""."" -> POBoxPostalCode, POBox and POBox City NOT mandatory
;	3) If vendor country belongs to YVT7 -> maxlength = 5
;	4) If vendor country belongs to (SAP country code FR GF GP MC MQ NC PF PM RE WF YT)  -> maxlength = 10 and mandatory by default false and field do postback"

;	TODO: REVISAR CODIGO

Entity GD_Adr_POBox is TextBox in frmMain

	with defaults
		label LABELS.labPOBox
		max length 10

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
			
		REQUEST.VENDOR_COUNTRY in {FR,GF,GP,MC,MQ,NC,PF,PM,RE,WF,YT} and GD_Adr_POBox is not empty then
			GD_Adr_POBoxPostalCode mandatory true
			GD_Adr_POBoxLoc mandatory true

		REQUEST.VENDOR_COUNTRY in {FR,GF,GP,MC,MQ,NC,PF,PM,RE,WF,YT} and GD_Adr_POBox is empty then
			GD_Adr_POBoxPostalCode mandatory false
			GD_Adr_POBoxLoc mandatory false

		REQUEST.ACCOUNT_GROUP is YVT7 then
			max length 5

		REQUEST.ACCOUNT_GROUP in {YCT6,YCT9} and GD_Adr_POBoxLoc.Value is not empty then
			this mandatory true

		REQUEST.COUNTRY is FR then 
			max length 10


; ---------------------------------------------------------------------------- 

;	Maxlength by default 10
;	1)If regional country = France -> maxlength = 5
;	2)IF vendor country belongs to (SAP country code FR GF GP MC MQ NC PF PM RE WF YT) and POBox Postal code is informed -> PO Box city mandatory
;	3) If vendor country belongs to YVT7 -> maxlength = 5
;	4) has the same validations as postal code.
;	5) IF vendor country belongs to (SAP country code FR GF GP MC MQ NC PF PM RE WF YT) and POBox postal code is informed and PO box is empty-> set po box = "".""
;	6)If vendor country belongs to (SAP country code FR GF GP MC MQ NC PF PM RE WF YT)  -> maxlength = 5 and mandatory by default false and field do postback"

Entity GD_Adr_POBoxPostalCode is TextBox in frmMain

	with defaults
		label LABELS.labBoxPostalCode
		max length 10

	with rules
		VENDOR.COUNTRY is FR or REQUEST.ACCOUNT_GROUP is YCT7 then
			max length 5
		REQUEST.ACCOUNT_GROUP in {YCT6,YCT9} and GD_Adr_POBoxLoc.Value is not empty then
			this mandatory true
			max length 5

; ---------------------------------------------------------------------------- 

;	1) Maxlength 100
;	2) If regional country France -> Maxlength 40
;	3) If customer country belongs to (SAP country code FR GF GP MC MQ NC PF PM RE WF YT): if P.O.Box == empty/""."" -> If P.O.Box Postal code != empty -> mandatory
;	4) If customer country belongs to (SAP country code FR GF GP MC MQ NC PF PM RE WF YT): if P.O.Box == empty/""."" -> If P.O.Box other city != empty -> mandatory
;	5) If customer country belongs to(SAP country code FR GF GP MC MQ NC PF PM RE WF YT): if P.O.Box != empty -> mandatory"

Entity GD_Adr_POBoxLoc is TextBox in frmMain

	with defaults
		label LABELS.labPoBoxLoc
		max length 100

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
		REQUEST.COUNTRY is FR then
			max length 40
		REQUEST.COUNTRY is FR then 
			max length 40
		REQUEST.ACCOUNT_GROUP in {YCT6,YCT9} then
			max length 100
			
; ---------------------------------------------------------------------------- 

;	By default EN
;	1) mandatory
;	2) language = country of partner code
;	3) If  partner country belongs to YCT6/YCT9 (SAP country code FR GF GP MC MQ NC PF PM RE WF YT)-> FR
;	4) If vendor country belongs to YVT1 -> If region = 01-> NL /If region = 02 or 03 -> FR

Entity GD_Com_LanguageCode is DropDownList in frmMain

	with defaults
		label LABELS.labLanguages
		mandatory true
		load data from DATASOURCE.MDM_Languages	with arguments {"FlagActive" : true}	
		value EN		; default is English

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
		REQUEST.CUSTOMER_COUNTRY in {FR,GF,GP,MC,MQ,NC,PF,PM,RE,WF,YT} then
			set value FR in GD_Com_LanguageCode

		REQUEST.ACCOUNT_GROUP is YCT1 and GD_Adr_Region is 01 then
			set value NL in GD_Com_LanguageCode
	
		REQUEST.ACCOUNT_GROUP is YCT1 and GD_Adr_Region in {02, 03} then
			set value FR in GD_Com_LanguageCode

		; this should come from the MODEL (from the MDM_Countries table) where "country configuration" is set
		REQUEST.DefaultLanguage is not empty then
			set value REQUEST.DefaultLanguage in GD_Com_LanguageCode


; ---------------------------------------------------------------------------- 

;	1) by default PRT
;	2) PRT is the only value available when a creation from scratch is requested" ; current madam does not work like this....

Entity GD_Com_Telebox is DropDownList in frmMain

	with defaults
		label LABELS.labTelebox
		load data from DATASOURCE.MDMC_Telebox with arguments {"FlagActive" : true}
		mandatory true
		value PRT

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity GD_Com_DataLine is TextBox in frmMain
	with defaults
		label LABELS.labDataLine
		max length 14
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity P_GD_VT_Country is DropDownList in frmMain
	with defaults
		load data from DATASOURCE.MDMC_Countries
		value REQUEST.VENDOR_COUNTRY
		mandatory true
	
	with actions
		load data from DATASOURCE.MDM_CountryTelephonePrefixes with arguments {"COUNTRY" : P_GD_VT_Country.Value } in P_GD_VT_CountryCode
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY not in {BE,LU,PT} and GD_Adr_Country is not WF then
			P_GD_VT_Country mandatory true
			P_GD_VT_CountryCode mandatory true
			P_GD_VT_Number mandatory true
	with triggers
		this changes

; ----------------------------------------------------------------------------	

Entity P_GD_VT_CountryCode is TextBox in frmMain

	with defaults
		label LABELS.labGD_VT_CountryCode
		enable false
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity P_GD_VT_Number is TextBox in frmMain
	with defaults
		max length 30
		label LABELS.labGD_VT_Number
		mandatory true
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
; ----------------------------------------------------------------------------	

Entity P_GD_VT_Extension is TextBox in frmMain
	with defaults
		max length 10
		label LABELS.lablabGD_VT_Extension
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
; ----------------------------------------------------------------------------	

Entity P_GD_VT_Notes is TextBox in frmMain
	with defaults
		max length 50
		label LABELS.labGD_VT_Notes
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ----------------------------------------------------------------------------	

Entity P_GD_VT_ConsNumber is TextBox in frmMain

	with defaults
		visible false
		label LABELS.labGD_VT_ConsNumber
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity P_GD_VT_Default is TextBox in frmMain
	with defaults
		; by defaults appears checked and disabled
		value true
		label LABELS.labP_GD_VT_Default
		enabled false
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false		
; ----------------------------------------------------------------------------	

Entity P_GD_VT_btnInsert is Button in frmMain

	with defaults
		label LABELS.btnInsert
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
; ---------------------------------------------------------------------------- 

; --- TODO: TENTATIVE GRID DEFINITION AND CONVENTIONS

Entity P_GD_VT_Grid is Grid in frmMain
	with defaults
		; TODO: how to define or set the controls inside? the row definition?
		define column GRID_P_GD_VT_Country		with arguments {ControlType : DropDownList, DataField : GD_VT_Country, Header : LABELS.labCountry, DataSource: DATASOURCE.MDM_Countries, Visible : true}
		define column GRID_P_GD_VT_CountryCode	with arguments {ControlType : TextBox,		DataField : GD_VT_CountryCode, Header : LABELS.labPrefix, Enabled : false, Visible : true}
		define column GRID_P_GD_VT_Number		with arguments {ControlType : TextBox,		DataField : GD_VT_Number, Header : LABELS.labNumber, Constraints : Only_Numbers, Visible : true}
		define column GRID_P_GD_VT_Extension	with arguments {ControlType : TextBox,		DataField : GD_VT_Extension, Header : LABELS.labExtension, Constraints : Only_Numbers, Visible : true}
		define column GRID_P_GD_VT_Notes		with arguments {ControlType : TextBox,		DataField : GD_VT_Notes, Header : LABELS.labNotes, Visible : true}
		define column GRID_P_GD_VT_Default		with arguments {ControlType : CheckBox,		DataField : GD_VT_Default, Header : LABELS.labDefault, Constraints : Only_Numbers, Visible : true}
		define column GRID_P_GD_VT_ConsNumber	with arguments {ControlType : TextBox,		DataField : GD_VT_ConsNumber, Visible : false}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
		REQUEST.CURRENT_ROLE in {ROLES.UPM, ROLES.CPM, ROLES.RCO, ROLES.SUS, ROLES.CLERK} then
			load data from DATASOURCE.MDMC_Request_CustomerPhoneDetails with arguments {"RequestID" : REQUEST.REQUEST_ID}
		REQUEST.CURRENT_ROLE is ROLES.ENQ and REQUEST.REQUEST_TYPE is not VC then
			load data from DATASOURCE.MDMC_Request_CustomerPhoneDetailsSAP with arguments {"RequestID" : REQUEST.REQUEST_ID}


	with triggers
		on row inserted
		on row deleted
		on row updated

; ----------------------------------------------------------------------------	
Entity F_GD_VF_Country is DropDownList in frmMain
	with defaults
		load data from DATASOURCE.MDMC_Countries
		value REQUEST.VENDOR_COUNTRY

	with actions
		load data from DATASOURCE.MDM_CountryTelephonePrefixes with arguments {"COUNTRY" : F_GD_VF_Country.Value } in F_GD_VF_CountryCode

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	

	with triggers
		this changes

; ----------------------------------------------------------------------------	

Entity F_GD_VF_CountryCode is TextBox in frmMain

	with defaults
		label LABELS.labGD_VF_CountryCode
		enable false
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity F_GD_VF_Number is TextBox in frmMain
	with defaults
		max length 30
		label LABELS.labGD_VF_Number
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false			
; ----------------------------------------------------------------------------	

Entity F_GD_VF_Extension is TextBox in frmMain

	with defaults
		label LABELS.labGD_VF_Extension
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ----------------------------------------------------------------------------	

Entity F_GD_VF_Notes is TextBox in frmMain
	with defaults
		max length 50
		label LABELS.labGD_VF_Notes
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false			

; ----------------------------------------------------------------------------	

Entity F_GD_VF_Default is TextBox in frmMain
	with defaults
		value false
		label LABELS.labGD_VF_Default
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false			
; ----------------------------------------------------------------------------	

Entity F_GD_VF_ConsNumber is TextBox in frmMain

	with defaults
		visible false
		label LABELS.labGD_VF_ConsNumber
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity F_GD_VF_btnInsert is Button in frmMain

	with defaults
		label LABELS.btnInsert
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity F_GD_VF_Grid is Grid in frmMain
	with defaults
		; TODO: how to define or set the controls inside? the row definition?
		define column GRID_F_GD_VF_Country		with arguments {ControlType : DropDownList, DataField : GD_VF_Country, Header : LABELS.labCountry, DataSource: DATASOURCE.MDM_Countries, Visible : true}
		define column GRID_F_GD_VF_CountryCode	with arguments {ControlType : TextBox,		DataField : GD_VF_CountryCode, Header : LABELS.labPrefix, Enabled : false, Visible : true}
		define column GRID_F_GD_VF_Number		with arguments {ControlType : TextBox,		DataField : GD_VF_Number, Header : LABELS.labNumber, Constraints : Only_Numbers, Visible : true}
		define column GRID_F_GD_VF_Extension	with arguments {ControlType : TextBox,		DataField : GD_VF_Extension, Header : LABELS.labExtension, Constraints : Only_Numbers, Visible : true}
		define column GRID_F_GD_VF_Notes		with arguments {ControlType : TextBox,		DataField : GD_VF_Notes, Header : LABELS.labNotes, Visible : true}
		define column GRID_F_GD_VF_Default		with arguments {ControlType : CheckBox,		DataField : GD_VF_Default, Header : LABELS.labDefault, Constraints : Only_Numbers, Visible : true}
		define column GRID_F_GD_VF_ConsNumber	with arguments {ControlType : TextBox,		DataField : GD_VF_ConsNumber, Visible : false}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.CURRENT_ROLE in {ROLES.UPM, ROLES.CPM, ROLES.SUS, ROLES.RCO, ROLES.CLERK} then
			load data from DATASOURCE.MDMC_Request_CustomerFaxDetails with arguments {"RequestID" : REQUEST.REQUEST_ID}
		REQUEST.CURRENT_ROLE is ROLES.ENQ and REQUEST.REQUEST_TYPE is not VC then
			load data from DATASOURCE.MDMC_Request_CustomerFaxDetailsSAP with arguments {"RequestID" : REQUEST.REQUEST_ID}

	with triggers
		on row inserted
		on row deleted
		on row updated

; ----------------------------------------------------------------------------	
Entity E_GD_VE_SmtpAddr is TextBox in frmMain
	with defaults
		; move the tooltip text to the real dictionary
		tooltip "the email is used generally for all the automatic communication with the supplier - e.g. payment advice"
		label LABELS.labGD_VE_SmtpAddr
		max length 241
		mandatory true
		; IT'S ALMOST IMPOSSIBLE TO DO THE RIGHT REGEX FOR EMAIL, SO FOR THE MOMENT WE PUT NOTHING HERE -
	
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		; check this is true
		REQUEST.REQUEST_TYPE is "VC" then mandatory true
		
; ----------------------------------------------------------------------------	

Entity E_GD_VE_Notes is TextBox in frmMain
	with defaults
		max length 50
		label LABELS.labGD_VE_Notes
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ----------------------------------------------------------------------------	

Entity E_GD_VE_Default is TextBox in frmMain
	with defaults
		value false
		label LABELS.labGD_VE_Default
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false			
; ----------------------------------------------------------------------------	

Entity E_GD_VE_ConsNumber is TextBox in frmMain

	with defaults
		visible false
		label LABELS.labGD_VE_ConsNumber
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity E_GD_VE_btnInsert is Button in frmMain
	with defaults
		label LABELS.labIinsert
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this visible false		
; ---------------------------------------------------------------------------- 

Entity E_GD_VE_Grid is Grid in frmMain
	with defaults
		; TODO: how to define or set the controls inside? the row definition?
		define column GRID_E_GD_VE_SmtpAddr		with arguments {ControlType : TextBox,		DataField : GD_VE_SmtpAddr, Header : LABELS.labNumber, Constraints : Only_Numbers, Visible : true}
		define column GRID_E_GD_VE_Notes		with arguments {ControlType : TextBox,		DataField : GD_VE_Notes, Header : LABELS.labNotes, Visible : true}
		define column GRID_E_GD_VE_Default		with arguments {ControlType : CheckBox,		DataField : GD_VE_Default, Header : LABELS.labDefault, Constraints : Only_Numbers, Visible : true}
		define column GRID_E_GD_VE_ConsNumber	with arguments {ControlType : TextBox,		DataField : GD_VE_ConsNumber, Visible : false}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.CURRENT_ROLE in {ROLES.UPM, ROLES.CPM, ROLES.SUS,  ROLES.RCO, ROLES.CLERK} then
			load data from DATASOURCE.MDMC_Request_CustomerEmailDetails with arguments {"RequestID" : REQUEST.REQUEST_ID}
		REQUEST.CURRENT_ROLE is ROLES.ENQ and REQUEST.REQUEST_TYPE is not VC then
			load data from DATASOURCE.MDMC_Request_CustomerEmailDetailsSAP with arguments {"RequestID" : REQUEST.REQUEST_ID}

	with triggers
		on row inserted
		on row deleted
		on row updated

; ----------------------------------------------------------------------------	

;	TODO: PENDING

Entity GD_Ctr_CustomerNumber is TextBox in frmMain
	with defaults
		visible false
		label LABELS.labCustomerNumber

; ---------------------------------------------------------------------------- 


;	field visible for all roles.
;	2) field mandatory for  MD clerk in case account group YCT6. 
;		(See APE list in sheet ""Other documents"" to display DDL to select the legal activity and translate from ISIC code in SAP). 
;	3) for account group YCT5, use DDL the excel file attached called ""ISIC italian convertion"". 
;		the DDL shown to the ROLES.ENQ is the collumn C and should then insert specific data in field KNA1-BRSCH and KNA1-BRAN1

;	TODO: PENDING

Entity GD_Ctr_Industry is DropDownList in frmMain
	with defaults
		mandatory true
		visible true
		label LABELS.labIndustries
		; if there are no specific data for this specific country, data for "EN" should be loaded
		load data from DATASOURCE.MDM_Industries with arguments {"FlagActive": true, "Country" : REQUEST.VENDOR_COUNTRY}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.ACCOUNT_GROUP in {"YCT6", "YVT6"} then
			load data from DATASOURCE.MDM_Industries with arguments {"FlagActive": true, "Country" : "FR"}
			; this equals to this line in original code
			; this.m_mdmSessionInfo.IndustryCountry = Business.Constants.Countries.France;
			set value "FR" in REQUEST.INDUSTRY_COUNTRY

		REQUEST.ACCOUNT_GROUP in {"YCT9", "YVT9"} then
			load data from DATASOURCE.MDM_Industries with arguments {"FlagActive": true, "Country" : "EN"}
			; this.m_mdmSessionInfo.IndustryCountry = Business.Constants.Countries.France;
			set value "EN" in REQUEST.INDUSTRY_COUNTRY
			mandatory false

; ---------------------------------------------------------------------------- 

Entity GD_Ctr_UnsubscribeCMD is DropDownList in frmMain

	with defaults
		label LABELS.labUnsubscribeCMD

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

		
Entity V_Country is DropDownList in frmMain

	with defaults
		label LABELS.labCountry

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity V_VATNumber is TextBox in frmMain
	with defaults
		label LABELS.labNumber
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ----------------------------------------------------------------------------	

Entity V_btnInsert is Button in frmMain
	with defaults
		label LABELS.labInsert
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this visible false	
; ----------------------------------------------------------------------------	

Entity V_Grid is Grid in frmMain
	with defaults
		define column GRID_V_Country		with arguments {ControlType : DropDownList, DataField : Country, Header : LABELS.labCountry, DataSource: DATASOURCE.MDM_Countries, Visible : true}
		define column GRID_V_VATNumber		with arguments {ControlType : TextBox,		DataField : VATNumber, Header : LABELS.labVATNumber, Visible : true}
		
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.CURRENT_ROLE in {ROLES.UPM, ROLES.CPM, ROLES.SUS, ROLES.RCO, ROLES.CLERK} then
			load data from DATASOURCE.MDMC_Request_CustomerVAT with arguments {"RequestID" : REQUEST.REQUEST_ID}
		REQUEST.CURRENT_ROLE is ROLES.ENQ and REQUEST.REQUEST_TYPE is not VC then
			load data from DATASOURCE.MDMC_Request_CustomerVATSAP with arguments {"RequestID" : REQUEST.REQUEST_ID}

	with triggers
		on row inserted
		on row deleted
		on row updated

; ----------------------------------------------------------------------------	


Entity B_GD_VB_Country is DropDownList in frmMain

	with defaults
		label LABELS.labCountry
		load data from DATASOURCE.MDMC_Countries

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity B_GD_VB_BankKey is TextBox in frmMain

	with defaults
		label LABELS.labGD_VD_BankKey
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.ACCOUNT_GROUP in {YCT6,YCT9,YVT6,YVT9} then
			max length 10
		else
			max length 15
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity B_GD_VB_BankAccount is TextBox in frmMain

	with defaults
		label LABELS.labGD_VD_BankAccount

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.ACCOUNT_GROUP in {YCT6,YCT9,YVT6,YVT9} then
			max length 11
		else
			max length 18
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity B_GD_VB_BankControlKey is TextBox in frmMain

	with defaults
		max length 2
		label LABELS.labGD_VD_BankControlKey
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
			
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change	
; ---------------------------------------------------------------------------- 

Entity B_GD_VB_IBAN is TextBox in frmMain

	with defaults
		label LABELS.labGD_VD_IBAN
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.ACCOUNT_GROUP in {YCT6,YCT9,YVT6,YVT9} then
			max length 27
		else
			max length 35
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity B_GD_VB_PartBankType is TextBox in frmMain

	with defaults
		label LABELS.labGD_VB_PartBankType
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.ACCOUNT_GROUP not in {YCT6,YCT9,YVT6,YVT9} then
			max length 4
; ---------------------------------------------------------------------------- 

Entity B_GD_VB_BankReferDetails is TextBox in frmMain

	with defaults
		label LABELS.labGD_VB_BankReferDetails
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
		REQUEST.ACCOUNT_GROUP not in {YCT6,YCT9,YVT6,YVT9} then
			max length 20	
; ---------------------------------------------------------------------------- 

Entity B_GD_VB_SWIFT is TextBox in frmMain

	with defaults
		label LABELS.labGD_VD_SWIFT
		visible false

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	

		REQUEST.REQUEST_TYPE is CC then
			this visible true

		CC_PT_PaymentMethods.Value is 2 then
			this visible true

; ---------------------------------------------------------------------------- 

; TODO: Actually this is not in frmMain itself but inside a composite control, then how to actually refer to these controls?
Entity B_GD_VB_AccountHolder is TextBox in frmMain
	with defaults
		label LABELS.labGD_VD_AccountHolder
		; default value but can be changed...
		value GD_Adr_Name.Value
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity B_GD_VB_BankCity is TextBox in frmMain

	with defaults
		label LABELS.labGD_VD_BankCity
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity B_GD_VB_btnInsert is Button in frmMain
	with defaults
		label LABELS.labInsert
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this visible false	
; ----------------------------------------------------------------------------	

Entity B_GD_VB_Grid is Grid in frmMain
	with defaults
		define column GRID_B_GD_VB_Country		with arguments {ControlType : DropDownList, DataField : Country, Header : LABELS.labCountry, DataSource: DATASOURCE.MDM_Countries, Visible : true}
		define column GRID_B_GD_VB_BankKey		with arguments {ControlType : TextBox,		DataField : GD_VB_BankKey, Header : LABELS.labBankKey, Visible : true}
		define column GRID_B_GD_VB_BankAccount	with arguments {ControlType : TextBox,	DataField : GD_VB_BankAccount, Header : LABELS.labBankAccount, Visible : true}
		define column GRID_B_GD_VB_BankControlKey	with arguments {ControlType : TextBox,	DataField : GD_VB_BankControlKey, Header : LABELS.labBankControlKey, Visible : true}
		define column GRID_B_GD_VB_IBAN			with arguments {ControlType : TextBox,	DataField : GD_VB_IBAN, Header : LABELS.labIBAN, Visible : true}
		define column GRID_B_GD_VB_SWIFT		with arguments {ControlType : TextBox,	DataField : GD_VB_SWIFT, Header : LABELS.labSWIFT, Visible : false}
		define column GRID_B_GD_VB_NameOfBank	with arguments {ControlType : TextBox,	DataField : GD_VB_NameOfBank, Header : LABELS.labNameOfBank, Visible: false}
		define column GRID_B_GD_VB_AccountHolder	with arguments {ControlType : TextBox,	DataField : GD_VB_AccountHolder, Header : LABELS.labAccountHolder, Visible : true}
		define column GRID_B_GD_VB_BankCity	with arguments {ControlType : TextBox,	DataField : GD_VB_BankCity, Header : LABELS.labBankCity, Visible : false}
		define column GRID_B_GD_VB_PartBankType	with arguments {ControlType : TextBox,	DataField : GD_VB_PartBankType, Header : LABELS.labPartBankType, Visible : false}
		define column GRID_B_GD_VB_BankReferDetails	with arguments {ControlType : TextBox,	DataField : GD_VB_BankReferDetails, Header : LABELS.labBankReferDetails, Visible: false}
		define column GRID_RelevantFlag	with arguments {ControlType : CheckBox,	DataField : RelevantFlag, Visible : false}

		
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.CURRENT_ROLE in {ROLES.UPM, ROLES.CPM, ROLES.SUS, ROLES.RCO, ROLES.CLERK} then
			load data from DATASOURCE.MDMC_Request_CustomerBankDetails with arguments {"RequestID" : REQUEST.REQUEST_ID}
		REQUEST.CURRENT_ROLE is ROLES.ENQ and REQUEST.REQUEST_TYPE is not VC then
			load data from DATASOURCE.MDMC_Request_CustomerBankDetailsSAP with arguments {"RequestID" : REQUEST.REQUEST_ID}

	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false

	with triggers
		on row inserted
		on row deleted
		on row updated

; ----------------------------------------------------------------------------	

;	TODO: PENDING

;	1) ) By default no visible
;	2) If customer country belongs to YCT6(FR,GF,GP,RE,MQ,,YT)/YCT9(NC,PF,PM,WF,MC) -> visible and mandatory for role clerk
;	3) when legal form is selected: load values from table
;	MDMC_LegalForms for informing fields isnaturalperson and customerclassification and set dunning procedure with this data
;	4) this field is not retrieved from SAP
;	5) this field is sent to SAP
;	6) this field is used to set values in creations from scratch, regional country France, in XKNKK.GRUPP, XKNKK.CTLPC and XKNKK.DBRTG with table MDMC_CreditLimitTemplate
;	7) see attachment.

Entity GD_Ctr_GFORM is DropDownList in frmMain
	with defaults
		label LABELS.labLegalForm
		visible false
		; data source is same for vendors and customers
		load data from DATASOURCE.MDMC_LegalForms with arguments {"FlagActive" : true }

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.ACCOUNT_GROUP in {YCT6, YVT6} then
			visible true

		REQUEST.ACCOUNT_GROUP in {YCT6, YVT6, YCT7, YCT9} and REQUEST.ROLE is ROLES.CLERK then
			mandatory true

		REQUEST.ACCOUNT_GROUP in {YCT7, YCT9} then
			; TODO: check if this name is correct - it's the tab for CREDIT LIMIT
			tab_CL visible true
		REQUEST.ACCOUNT_GROUP not in {YCT7, YCT9} then
			; TODO: check if this name is correct - it's the tab for CREDIT LIMIT
			tab_CL visible true

		REQUEST.CUSTOMER_COUNTRY in {FR, GF, GP, RE, MQ, YT} then
			this visible true
; ---------------------------------------------------------------------------- 

Entity GD_Ctr_PIVA is TextBox in frmMain

	with defaults
		label LABELS.labPIVA
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.REQUEST_TYPE is CC then
			this enable true
		REQUEST.COUNTRY is FR then
			this enable true
		REQUEST.COUNTRY is IT and REQUEST.REQUEST_TYPE is CC then
			this visible true
		REQUEST.ACCOUNT_GROUP in {YCT1,YCT2} then
			max length 10
		REQUEST.ACCOUNT_GROUP in {YCT3,YCT4} is YCT3 then
			max length 9
		REQUEST.ACCOUNT_GROUP in YCT5 is YCT3 then
			max length 11
		REQUEST.ACCOUNT_GROUP is YCT6 and REQUEST.REQUEST_TYPE is CC and GD_Ctr_IsNaturalPerson.Value is false then
			this mandatory true
		REQUEST.ACCOUNT_GROUP is YCT6 and REQUEST.CURRENT_ROLE in {ROLES.CLERK, ROLES.ENQ} then
			this enable true
		REQUEST.ACCOUNT_GROUP is YCT9 then 
			max length 5
			this mandatory false
		GD_Adr_Country.Value is GR and REQUEST.REQUEST_TYPE is CC then
			this mandatory false

; ---------------------------------------------------------------------------- 

Entity GD_Ctr_CF is TextBox in frmMain

	with defaults
		label LABELS.labCF
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR and REQUEST.REQUEST_TYPE is CC then
			this enable true
			this visible true
; ---------------------------------------------------------------------------- 

;	1) before send data to SAP to create/modify supplier ->search if vendor exists with the same taxcode (STCD1), 
;	       if exists get the number to send to SAP in KNA1.LIFNR. If it appears more than one code, 
;	       select the first one and send a warning message to GSS Master Data stating that ""there are multiple partners"" if there are more than one code 
;	1) Enabled =True
;	2) not visible in case of creation from scratch
;	4) Max length 10 digits

;	TODO: PONER EN CONDICIONES

Entity GD_Ctr_VendorNumber is TextBox in frmMain

	with defaults
		label LABELS.labVendorNumber
		enable false
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity GD_Ctr_IFANumber is TextBox in frmMain

	with defaults
		label LABELS.labIFANumber
		enable false
		max length 20
		enabled false

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.REQUEST_TYPE is CC then
			GD_Ctr_IFANumber enabled false

		REQUEST.REQUEST_TYPE is VM then
			this visible true

; ---------------------------------------------------------------------------- 

Entity GD_Ctr_TaxCode1 is TextBox in frmMain

	with defaults
		label LABELS.labTaxCode1
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is IT then
			this enable false
		REQUEST.ACCOUNT_GROUP is YCT6 then
			max length 16
		REQUEST.ACCOUNT_GROUP is YCT9 then
			max length 16
		REQUEST.ACCOUNT_GROUP is YCT6 and REQUEST.REQUEST_TYPE is not CC then
			this enable false
		REQUEST.ACCOUNT_GROUP is YCT9 and REQUEST.REQUEST_TYPE is not CC then
			this enable false
		REQUEST.ACCOUNT_GROUP is YCT6 and REQUEST.REQUEST_TYPE is CC and GD_Ctr_IsNaturalPerson.Value is false then
			this mandatory true
		REQUEST.ACCOUNT_GROUP is YCT9 then
			mandatory false
		
		REQUEST.ACCOUNT_GROUP in {YVT6, YCT6, YVT9, YCT9} and REQUEST.REQUEST_TYPE is CC and REQUEST.TaxCode1_IsMandatory then
			this mandatory true

		REQUEST.COUNTRY in {BE,LU} and REQUEST.CURRENT_ROLE is ROLES.CLERK then
			this mandatory false
			GD_Ctr_VATRegistrationNumber mandatory false
		
		GD_Adr_Country.Value is GR and REQUEST.REQUEST_TYPE is CC then
			this mandatory false
			; ---------------------------------------------------------------------------- 

Entity GD_Ctr_TaxCode2 is TextBox in frmMain

	with defaults
		label LABELS.labTaxCode2
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is IT then
			this enable false
		REQUEST.ACCOUNT_GROUP is YCT5 then
			max length 11
			validation ^[0-9]{11}$
		REQUEST.ACCOUNT_GROUP is YCT6 and REQUEST.REQUEST_TYPE is not CC then
			this enable false
		REQUEST.ACCOUNT_GROUP is YCT6 and REQUEST.REQUEST_TYPE is CC and GD_Ctr_IsNaturalPerson.Value is false then
			this mandatory true
		REQUEST.ACCOUNT_GROUP is YCT6 then
			max length 9
		REQUEST.ACCOUNT_GROUP is YCT6 and REQUEST.CURRENT_ROLE then
			this enable true
		REQUEST.ACCOUNT_GROUP is YCT9 then
			max length 9
		REQUEST.ACCOUNT_GROUP is YCT9 then
			mandatory false
		REQUEST.ACCOUNT_GROUP is YCT9 and REQUEST.REQUEST_TYPE is not CC then
			this enable false
		REQUEST.ACCOUNT_GROUP in {YVT6, YCT6, YVT9, YCT9} and REQUEST.REQUEST_TYPE is CC and REQUEST.TaxCode2_IsMandatory then
			this mandatory true
		GD_Adr_Country.Value is GR and REQUEST.REQUEST_TYPE is CC then
			this mandatory true
; ---------------------------------------------------------------------------- 

Entity GD_Ctr_VATRegistrationNumber is TextBox in frmMain

	with defaults
		label LABELS.labVATRegistrationNumber
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is IT then
			this enable false
		REQUEST.COUNTRY is ES then
			this enable false
		REQUEST.COUNTRY is IT and REQUEST.CURRENT_ROLE is ROLES.CLERK and REQUEST.REQUEST_TYPE is CC then
			this enable true
		REQUEST.ACCOUNT_GROUP is YCT6 and REQUEST.REQUEST_TYPE is CC and GD_Ctr_IsNaturalPerson.Value is false then
			this mandatory true
		REQUEST.ACCOUNT_GROUP in {YVT6, YCT6, YVT9, YCT9} and REQUEST.REQUEST_TYPE is CC and REQUEST.VAT_IsMandatory then
			this mandatory true
		GD_Adr_Country.Value is GR and REQUEST.REQUEST_TYPE is CC then
			this mandatory true
		REQUEST.VAT_IsMandatory and REQUEST.REQUEST_TYPE is CC then
			this mandatory true
; ---------------------------------------------------------------------------- 


; TODO : SEVERAL THINGS PENDING HERE ... HOW TO REFER TO THE MODEL DATA, BOTH EXISTING SAP DATA AND THE NEW REQUEST
; TODO : ALSO CHECK HOW TO SPECIFY OPERATIONS LIKE SUBSTRING....

Entity GD_Com_TransportZone is TextBox in frmMain
	with defaults
		visible false

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.CUSTOMER_COUNTRY is ES and GD_Com_TransportZone.Value is empty then
			set value substring(GD_Adr_PostalCode,2) in GD_Com_TransportZone.Value 
		

; ---------------------------------------------------------------------------- 

Entity GD_MainlyMilitary is RadioButton in frmMain

	with defaults
		label LABELS.labGD_MainlyMilitary

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.REQUEST_TYPE is CC then
			mandatory true

; ---------------------------------------------------------------------------- 

Entity GD_MainlyCivilian is RadioButton in frmMain

	with defaults
		label LABELS.labGD_MainlyCivilian

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.REQUEST_TYPE is CC then
			mandatory true

; ---------------------------------------------------------------------------- 

Entity GD_Nuclear is CheckBox in frmMain

	with defaults
		label LABELS.labGD_Nuclear
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity labGD_FreeZone is Label in frmMain

	with defaults
		label LABELS.labGD_FreeZone
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity labGD_Embassy is Label in frmMain

	with defaults
		label LABELS.labGD_Embassy
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity GD_Nat_NaturalPerson is DropDownList in frmMain

	with defaults
		label LABELS.labNaturalPerson
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity GD_Nat_BirthDate is Calendar in frmMain

	with defaults
		label LABELS.calBirthDate
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity GD_Nat_PlaceOfBirth is TextBox in frmMain

	with defaults
		label LABELS.labPlaceOfBirth
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity GD_Nat_Profession is TextBox in frmMain

	with defaults
		label LABELS.labProfession
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity GD_Nat_Sex is DropDownList in frmMain

	with defaults
		label LABELS.labSex
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity CC_CO_ReconAccount is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labCC_CO_ReconAccount
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
		GD_Adr_Country is GR and GD_Ctr_CustomerClassification.Value is G and GD_Ctr_IsNaturalPerson.Value is false then
			this mandatory true	
; ---------------------------------------------------------------------------- 

;	"2.6.14(MI) GSS, please, check and provide the business rule. For RC Greece... I don't undertand the meaning of ""if customer is na ICC""
;	19-06-2014(RG)
;	1) Default values for all type of requests (all types of creation, changes), independently if value from SAP is empty but enquirer can change:
;	1.1) If company code 5140 and customer country ISO  (FR, GF, GP, RE, MQ, YT, NC, PF, PM, WF, MC) -> 6115
;	1.2) If company code 5140 and customer country != ISO  (FR, GF, GP, RE, MQ, YT, NC, PF, PM, WF, MC) -> 6000
;	1.3) if company code luxembourg -> 1113
;	1.4) if company code Spain-> 3E60
;	1.5) if company code Belgium and Luxembourg-> 1109
;	1.6) if company code Portugal: If company code Portugal (5240) -> not visible
;	1.7) if company code 5240 and customer country PT -> 4216
;	1.8) if  company code 5240 and !=customer country PT -> 4116
;	1,9) if company code greece (5150) and Italy (5180, 596G) value default blank

Entity CC_PT_PaymentTerms is DropDownList in frmMain

	with defaults
		label LABELS.labPTPaymentTerms
		mandatory true
		load data from DATASOURCE.MDMC_PaymentTerms with arguments {"FlagActive" : true, "Country": REQUEST.COUNTRY}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	

		REQUEST.COUNTRY is PT and REQUEST.REQUEST_TYPE in {VC, VC_CC} then
			hide this
			CC_PT_PaymentTerms mandatory false
	
		REQUEST.COUNTRY in {BE,LU} and REQUEST.REQUEST_TYPE in {VC, VC_CC} then
			set value 1109 in CC_PT_PaymentTerms

		REQUEST.COUNTRY is ES and REQUEST.REQUEST_TYPE in {VC, VC_CC} then
			set value 3M60 in CC_PT_PaymentTerms

		REQUEST.COUNTRY is LU and REQUEST.REQUEST_TYPE in {VC, VC_CC} then
			set value 1113 in CC_PT_PaymentTerms
			set value 1113 in SO_TermsOfPaymentKey

		REQUEST.COMPANY_CODE is 5140 and REQUEST.REQUEST_TYPE in {VC, VC_CC} and REQUEST.CUSTOMER_COUNTRY in {FR, GF, GP, RE, MQ, YT, NC, PF, PM, WF, MC} then
			set value 6115 in CC_PT_PaymentTerms
			set value 6115 in SO_TermsOfPaymentKey
		
		REQUEST.COMPANY_CODE is 5140 and REQUEST.REQUEST_TYPE in {VC, VC_CC} and REQUEST.CUSTOMER_COUNTRY not in {FR, GF, GP, RE, MQ, YT, NC, PF, PM, WF, MC} then
			set value 6000 in CC_PT_PaymentTerms
			set value 6000 in SO_TermsOfPaymentKey

		REQUEST.COMPANY_CODE in {5150,5180,596G} and REQUEST.REQUEST_TYPE in {VC, VC_CC} then
			set value '' in CC_PT_PaymentTerms

		REQUEST.COUNTRY is FR then
			this mandatory true
; ---------------------------------------------------------------------------- 

;	"2.6.14(MI) GSS, please, check and provide the business rule. Additionally, CR ""IA_SEPA_payment methods"" ispending on clarification in your side yet
;	19-06-2014(RG): 1) Field visible for all company codes and enquirer can choose
;	1) If company code Spain (All), France (5140) -> mandatory
;	2) if company code Italy (5180,596G) and ROLES.ENQ chooses Payment Methods ""L"", then field ""Bank Key/National sort code"" in payment transactions becomes mandatory
;	3) if company code Portugal (5240) and ROLES.ENQ chooses Payment Methods ""P"" or ""M"", then field ""Bank Key/National sort code"" in payment transactions becomes mandatory
;	4) if company code France (5140) and ROLES.ENQ chooses Payment Methods ""M"" or ""A"", then field ""Bank Key/National sort code"" in payment transactions becomes mandatory

Entity CC_PT_PaymentMethods is DropDownList in frmMain

	with defaults
		label LABELS.labPTPaymentMethods
		load data from DATASOURCE.MDMC_PaymentMethods

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	

		REQUEST.COUNTRY in {ES, FR} then
			this mandatory true

		REQUEST.COUNTRY is PT then
			this mandatory false

		REQUEST.COUNTRY is IT and CC_PT_PaymentMethods.Value is L then
			B_GD_VB_BankKey mandatory true

		REQUEST.COUNTRY is PT and CC_PT_PaymentMethods.Value in {P, M} then
			B_GD_VB_BankKey mandatory true
			
		REQUEST.COUNTRY is FR and CC_PT_PaymentMethods.Value in {M, A} then
			B_GD_VB_BankKey mandatory true

		REQUEST.CURRENT_ROLE is ENQ and REQUEST.REQUEST_TYPE not in {CM, CM_BLK} and REQUEST.COUNTRY is ES and REQUEST.VENDOR_COUNTRY is ES then
			set value G in CC_PT_PaymentMethods

		REQUEST.CURRENT_ROLE is ENQ and REQUEST.REQUEST_TYPE not in {CM, CM_BLK} and REQUEST.COUNTRY is ES and REQUEST.VENDOR_COUNTRY is not ES then
			set value Y in CC_PT_PaymentMethods

		REQUEST.CURRENT_ROLE is ENQ and REQUEST.REQUEST_TYPE not in {CM, CM_BLK} and REQUEST.COUNTRY is FR and REQUEST.VENDOR_COUNTRY is FR then
			set value G in CC_PT_PaymentMethods

		REQUEST.CURRENT_ROLE is ENQ and REQUEST.REQUEST_TYPE not in {CM, CM_BLK} and REQUEST.COUNTRY is FR and REQUEST.VENDOR_COUNTRY is not FR then
			set value Y in CC_PT_PaymentMethods

; ---------------------------------------------------------------------------- 

Entity CC_PT_ClearingWithCustomer is CheckBox in frmMain

	with defaults
		label LABELS.labCC_PT_ClearingWithCustomer
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity CC_PT_IndividualPayment is CheckBox in frmMain

	with defaults
		label LABELS.labSinglePayment

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COMPANY_CODE in {5101, 5109} then
			set value true in CC_PT_IndividualPayment

; ---------------------------------------------------------------------------- 

;"2.6.14(MI) Pending on CR 101707213 MADAM:Credit Responsible Group
;04-07-2014 (FM): 
;1) field visible for all company code 
;2) if company code France -> mandatory only for MDClerk
;3)Default values for creations from scratch and company code:
;   if company code Spain, Portugal and Belux-> see file: Sales areas _accounting clerks BE_PTand ES in sheet ""other documents""
;4) if company code IT and GR -> not mandatory 

Entity CC_CO_AccountingClerk is DropDownList in frmMain

	with defaults
		label LABELS.labCC_CO_AccountingClerk
		load data from DATASOURCE.MDMC_AccountingClerks with arguments {"FlagActive" : true, "CompanyCode" : REQUEST.COMPANY_CODE}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR and REQUEST.CURRENT_ROLE is ROLES.CLERK then
			this mandatory true

		REQUEST.COUNTRY in {IT, GR} then
			this mandatory false

		; TODO: PENDING THIS ----> if company code Spain, Portugal and Belux-> see file: Sales areas _accounting clerks BE_PT and ES in sheet ""other documents""

		
		REQUEST.COUNTRY is FR then
			this mandatory true

		REQUEST.REQUEST_TYPE in {CC, CC_CC} and REQUEST.COUNTRY is ES then
			set value 81 in CC_CO_AccountingClerk
			set value 81 in CC_CO_AccountingClerk.OldDisplayValue

		REQUEST.REQUEST_TYPE in {CC, CC_CC} and REQUEST.COMPANY_CODE is 5109 then
			set value MM in CC_CO_AccountingClerk
			set value MM in CC_CO_AccountingClerk.OldDisplayValue

		REQUEST.REQUEST_TYPE in {CC, CC_CC} and REQUEST.SALES_ORGANIZATION is 1E0E then
			set value 95 in CC_CO_AccountingClerk
			set value 95 in CC_CO_AccountingClerk.OldDisplayValue

		REQUEST.REQUEST_TYPE in {CC, CC_CC} and REQUEST.SALES_ORGANIZATION in {10L0,10Q1} then
			set value 87 in CC_CO_AccountingClerk
			set value 87 in CC_CO_AccountingClerk.OldDisplayValue

		REQUEST.REQUEST_TYPE in {CC, CC_CC} and REQUEST.SALES_ORGANIZATION in {10A0, 10A1, 10B0} then
			set value 93 in CC_CO_AccountingClerk
			set value 93 in CC_CO_AccountingClerk.OldDisplayValue

		REQUEST.REQUEST_TYPE in {CC, CC_CC} and REQUEST.SALES_ORGANIZATION in {10F0, 10F1, 10F2, 10F3, 10G0, 10G1, 10H0, 10I0, 10P0, 10Z0} then
			set value 92 in CC_CO_AccountingClerk
			set value 92 in CC_CO_AccountingClerk.OldDisplayValue

		REQUEST.REQUEST_TYPE in {CC, CC_CC} and REQUEST.COMPANY_CODE is 563M then
			set value 20 in CC_CO_AccountingClerk
			set value 20 in CC_CO_AccountingClerk.OldDisplayValue

; ---------------------------------------------------------------------------- 

;"For creation from scratch and company code -> hidden except RC France.
;For remaining actions -> visible for all RCs
; If creation from scratch/company code:
;  if regional country Spain-> Y302
;  if regional country Italy-> Y502 (only value available)
;  if regional country Portugal-> Y400
;  if regional country Belgium ->if customer classification NG->Y104 else ->Y102
;  if regional country Luxemburg->Y203
;  if regional country Greece -> Y704


Entity CC_DD_DunningProcedure is DropDownList in frmMain
	with defaults
		label LABELS.labDDDunningprocedure

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.REQUEST_TYPE in {CC,CC_CC} and REQUEST.COUNTRY is not FR then
			this visible false
		REQUEST.COUNTRY is FR then
			this mandatory trye

		REQUEST.COUNTRY is ES then
			set value Y302 in CC_DD_DunningProcedure

		REQUEST.COUNTRY is IT then
			set value Y502 in CC_DD_DunningProcedure

		REQUEST.COUNTRY is PT then
			set value Y400 in CC_DD_DunningProcedure

		REQUEST.COUNTRY is BE and GD_Ctr_CustomerClassification.Value is NG then
			set value Y104 in CC_DD_DunningProcedure
		REQUEST.COUNTRY is BE and GD_Ctr_CustomerClassification.Value is G then
			set value Y102 in CC_DD_DunningProcedure

		REQUEST.COUNTRY is LU then
			set value Y203 in CC_DD_DunningProcedure

		REQUEST.VENDOR_COUNTRY is GR then
			set value Y704 in CC_DD_DunningProcedure

		; TODO: ;5)specific rules for company 5140 see attachemnt RulesDunningArea5140 and sheet ""Dunning Procedure"" in sheet “Other documents”


; ---------------------------------------------------------------------------- 

Entity CC_DD_DunningArea is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labDunningArea
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

;	For RC Italy (company codes (5180, 596G)) values WA and WC should NOT be showed in DDL of Madam

Entity CC_AR_PledgeIndicator is DropDownList in frmMain

	with defaults
		label LABELS.labARPledgeIndicator
		load data from DATASOURCE.MDMC_ARPledgeIndicators with arguments {"FlagActive" : true, "CompanyCode" : REQUEST.COMPANY_CODE}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COMPANY_CODE in { 5109, 4297, 461D, 596G, 596G } then
			this visible false

		; TODO: EVALUATION ORDER IS IMPORTANT IN A CASE LIKE THIS...

		REQUEST.REQUEST_TYPE in {CC, CC_CC} then
			set value 'WE' in CC_AR_PledgeIndicator

		REQUEST.COUNTRY in {ES,FR,GR} then
			set value '' in CC_AR_PledgeIndicator

		REQUEST.COMPANY_CODE is 5101 then
			set value '' in CC_AR_PledgeIndicator

	with actions
		; ATTACHMENT mandatory  false
		_COMMENT_ mandatory  true  
	with triggers 
		on change

; ---------------------------------------------------------------------------- 

; --- BEGIN SALES ORDER PART ---

Entity KNVV_BZIRK is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labBZIRK

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			KNVV_BZIRK visible true
			set value '' in KNVV_BZIRK
			mandatory false

		REQUEST.ACCOUNT_GROUP in {YCT6, YCT9, YVT6, YVT9} then
			this mandatory true

		REQUEST.COUNTRY is FR then
			this visible true

; ---------------------------------------------------------------------------- 

;	TODO:  if Sales Area 10L0 country Belgium value ""LA, LB, LC,LD, LE, LF, LG, LH, LI, LJ,LK, LO, LM, LN, LO, LZ""; 

Entity SO_CustomerGroup is DropDownList in frmMain

	with defaults
		label LABELS.labCustomerGroups
		mandatory true
		; by default no value is selected
		value ''

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR and REQUEST.REQUEST_TYPE in {CC, CC_CC, CC_SO} then
			set value 01 in SO_CustomerGroup
	
		REQUEST.COUNTRY in {IT, LU} and REQUEST.REQUEST_TYPE in {CC, CC_CC, CC_SO} then
			set value 12 in SO_CustomerGroup

		REQUEST.COUNTRY is FR then
			set value 01 in SO_CustomerGroup

			
; ---------------------------------------------------------------------------- 


Entity SO_SalesOffice is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labSO_SalesOffice
		mandatory true
		load data from DATASOURCE.MDMC_SalesOffice with arguments { "POCode" : REQUEST.SALES_ORGANIZATION, "CompanyCode" : REQUEST.COMPANY_CODE, "DistChannel" : REQUEST.DISTRIBUTION_CHANNEL, "FlagActive" : true}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		; only show the control if there are data loaded from the 'load data from' instruction
		this.Items.Count > 0 then
			SO_SalesOffice visible true


; ---------------------------------------------------------------------------- 

Entity KNVV_EIKTO is TextBox in frmMain

	with defaults
		visible false
		label LABELS.labEIKTO
		mandatory true

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			KNVV_EIKTO visible true

; ---------------------------------------------------------------------------- 


; TODO: WE HAVE TO IMITATE THIS QUERY, SUGGEST CREATING A SPECIFIC STORED PROC OR SIMILAR
; SO THAT WE AVOID HAVING TO SPECIFY THE JOIN HERE
;
;		IQueryable query = from sosg in this.mdmc_lookup.MDMC_SalesOfficeSalesGroup
;		                        join sg in this.mdmc_lookup.MDMC_SalesGroup on sosg.CodeSalesGroup equals sg.Code
;		                        where sosg.CodeSalesOffice == selectedsalesoffice
;		                        select new { sg.Code, sg.DisplayName };


Entity KNVV_VKGRP is DropDownList in frmMain


	with defaults
		visible false
		label LABELS.labVKGRP
		load data from DATASOURCE.MDMC_SalesOfficeSalesGroup with arguments {"CodeSalesOffice" : REQUEST.SALES_ORGANIZATION}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			this visible true
			this mandatory false

; ---------------------------------------------------------------------------- 

; TODO: This datasource has to be a bit special, since the ordering of items has to be 
; EUR
; GBP
; USD
; so maybe the datasource should be configured to return data in that order.

Entity SO_SalesOrderCurrency is DropDownList in frmMain
	with defaults
		label LABELS.labSaleOrderCurrency
		mandatory true
		load data from DATASOURCE.MDM_Currencies with arguments {"FlagActive" : true}
		value EUR

; ---------------------------------------------------------------------------- 

Entity KNVV_KONDA is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labkONDA
		load data from DATASOURCE.MDMC_PriceGroup with arguments {"FlagActive" : true}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			this visible true
			this mandatory false

; ---------------------------------------------------------------------------- 

Entity KNVV_PLTYP is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labPLTYP
		load data from DATASOURCE.MDMC_PriceListType with arguments {"FlagActive" : true}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY in {BE, FR} then
			KNVV_PLTYP visible true
			this mandatory false


; ---------------------------------------------------------------------------- 

Entity SO_CustPricingProc is DropDownList in frmMain

	with defaults
		label LABELS.labCustPricProc
		mandatory true
		load data from DATASOURCE.MDMC_CustomerPricingProcedure with arguments {"FlagActive" : true}
		value ''
	
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			set value 1 in SO_CustPricingProc

		REQUEST.COUNTRY in {PT, BE, LU, GR} then
			this enabled false
			set value 1 in SO_CustPricingProc

		REQUEST.COMPANY_CODE in {5180, 5116} then
			this enabled false
			set value 1 in SO_CustPricingProc

; ---------------------------------------------------------------------------- 

Entity SO_CustomerStatsGroup is DropDownList in frmMain

	with defaults
		label LABELS.labStatusGroup
		mandatory true
		load data from DATASOURCE.MDMC_CustomerStatsGroup with arguments {"FlagActive" : true}
		value ''

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			set value 01 in SO_CustPricingProc

		REQUEST.COUNTRY in {PT, BE, LU, GR} then
			this enabled false
			set value 1 in SO_CustPricingProc

		REQUEST.COMPANY_CODE in {5180, 5116} then
			this enabled false
			set value 1 in SO_CustPricingProc


; ---------------------------------------------------------------------------- 

; TODO: what is REQUEST.CLUSTER_COUNTRY_CODE exactly?

Entity SO_CustomerShippingConditions is DropDownList in frmMain

	with defaults
		label LABELS.labShippingCond
		mandatory true
		load data from DATASOURCE.MDMC_CustomerShippingCondition with arguments {"FlagActive" : true, "ClusterCountryCode" : REQUEST.CLUSTER_COUNTRY_CODE}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			set value 01 in SO_CustomerShippingConditions

		REQUEST.COUNTRY is GR then
			set value 01 in SO_CustomerShippingConditions

		REQUEST.COUNTRY is PT then
			set value 31 in SO_CustomerShippingConditions

		REQUEST.COUNTRY is BE then
			this enabled false
			set value 11 in SO_CustomerShippingConditions

		REQUEST.COUNTRY is GR then
			set value 01 in SO_CustomerShippingConditions

		REQUEST.COUNTRY is IT then
			set value 31 in SO_CustomerShippingConditions

		REQUEST.COUNTRY is GR then
			set value 21 in SO_CustomerShippingConditions

		REQUEST.COUNTRY is ES and REQUEST.VENDOR_COUNTRY is ES then
			set value 31 in SO_CustomerShippingConditions

		REQUEST.COUNTRY is ES and REQUEST.VENDOR_COUNTRY is not ES then
			set value 33 in SO_CustomerShippingConditions

; ---------------------------------------------------------------------------- 

Entity KNVV_VWERK is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labVWERK
		load data from DATASOURCE.MDMC_DeliveryPlant with arguments {"DistributionChannel" : REQUEST.DISTRIBUTION_CHANNEL}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.REQUEST_TYPE in {CC, CC_CC, CC_SO} and REQUEST.COMPANY_CODE is 5140 and REQUEST.DISTRIBUTION_CHANNEL is 11 then
			KNVV_VWERK visible true
			set value 6010 in KNVV_VWERK

		REQUEST.REQUEST_TYPE in {CC, CC_CC, CC_SO} and REQUEST.COMPANY_CODE is 5140 and REQUEST.DISTRIBUTION_CHANNEL is 12 then
			KNVV_VWERK visible true
			set value 6020 in KNVV_VWERK

		REQUEST.COUNTRY is FR then
			this visible true
			this mandatory false

; ---------------------------------------------------------------------------- 

Entity KNVV_AUTLF is CheckBox in frmMain

	with defaults
		label LABELS.labAUTLF

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			set value true in KNVV_AUTLF

		KNVV_AUTLF.Value is true then
			set value 0 in KNVV_ANTLF.Value

		KNVV_AUTLF.Value is false then
			set value '' in KNVV_ANTLF.Value

; ---------------------------------------------------------------------------- 

Entity KNVV_ANTLF is DropDownList in frmMain

	with defaults
		label LABELS.labANTLF
		visible false

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			visible true
			set value 9 in KNVV_ANTLF

		REQUEST.COUNTRY is {IT, BE, GR} and REQUEST.REQUEST_TYPE in {CC, CC_CC, CC_SO} then
			set value 0 in KNVV_ANTLF

; ---------------------------------------------------------------------------- 


Entity KNVV_LPRIO is DropDownList in frmMain

	with defaults
		label LABELS.labLPRIO
		load data from DATASOURCE.MDMC_DeliverPriority with arguments {"FlagActive" : true}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY in {ES, IT, BE, LU, FR, GR, PT} then
			set value 02 in KNVV_LPRIO

; ---------------------------------------------------------------------------- 

;	TODO:
;	if KNVV_AUTLF is visible and flagged:
;	if KNVV_KZTLF is visible and KNVV_KZTLF is empty or value is D-> message:In Sales Area Data view the field Part.dlv./item should be informed with a valid value when Complete delivery is checked
;	if KNVV_KZTLF is visible and KNVV_KZTLF value is A/B/C and KNVV_ANTLF value > 1 -> message: In Sales Area Data view the field Number of partial deliveries, may not be larger than 1 else
;	if KNVV_AUTLF is visible but not flagged:
;	if KNVV_KZTLF is visible and value is A/B and KNVV_ANTLF value > 1-> message:In Sales Area Data view the field Number of partial deliveries, may not be larger than 1

Entity KNVV_KZTLF is DropDownList in frmMain

	with defaults
		label LABELS.labKZTLF
		load data from DATASOURCE.MDMC_PartDeliveryItem
		value 9
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity KNVV_PRFRE is CheckBox in frmMain

	with defaults
		label LABELS.labPRFRE

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			KNVV_PRFRE mandatory false

; ---------------------------------------------------------------------------- 

;   TODO: this query has to be combined in a single datasource

;   if (this.m_mdmSessionInfo.RegionalCountry == "FR")
;      /* MADAM II Ana A. 20120927: Issue 92, values for France. */
;       this.SO_Incoterms.DataSource = this.mdmc_lookup.MDM_Incoterms.Where(x => x.FlagActive == true && (x.Code.Equals("EXW") || x.Code.Equals("FAS") || x.Code.Equals("DAT")
;                                                                               || x.Code.Equals("FCA") || x.Code.Equals("FOB") || x.Code.Equals("CFR") || x.Code.Equals("CIF")
;                                                                               || x.Code.Equals("CIP") || x.Code.Equals("CPT") || x.Code.Equals("DDP") || x.Code.Equals("DAP"))).OrderBy(x => x.DisplayName);
;   else
;       this.SO_Incoterms.DataSource = this.mdmc_lookup.MDM_Incoterms.Where(x => x.FlagActive == true).OrderBy(x => x.DisplayName);
            

Entity SO_Incoterms is DropDownList in frmMain

	with defaults
		label LABELS.labIncoterms
		mandatory true

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			set value DAP in SO_Incoterms

		REQUEST.COUNTRY is PT then
			set value '' in SO_Incoterms

		REQUEST.COUNTRY is ES then
			set value Y30 in SO_Incoterms

		REQUEST.COUNTRY is IT then
			set value FH in SO_Incoterms

		REQUEST.COUNTRY is BE then
			this enabled false
			set value DDP in SO_Incoterms

		REQUEST.COUNTRY is LU then
			set value DDP in SO_Incoterms

		REQUEST.COUNTRY is GR then
			set value '' in SO_Incoterms

; ---------------------------------------------------------------------------- 

;	1) visible field
;	2) default value:
;	if company code France -> France metropolitaine
;	if company code Portugal  ->blank  and enquirer can choose
;	if company code spain -> Y30  - carriage  paid
;	if company code Italy -> Franco domicilio
;	if company code Belgium and Luxembuorg -> Destination
;	if comapany code Greece -> Blank and ROLES.ENQ must choose"

Entity SO_IncotermsPart2 is TextBox in frmMain
	with defaults
		label LABELS.labIncotermsPart2
		mandatory true
	
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			set value 'France Metropolitaine' in SO_Incoterms

		REQUEST.COUNTRY is PT then
			set value '' in SO_Incoterms

		REQUEST.COUNTRY is ES then
			set value 'Y30  - carriage  paid' in SO_Incoterms

		REQUEST.COUNTRY is IT then
			set value 'Franco domicilio' in SO_Incoterms

		REQUEST.COUNTRY is GR then
			set value '' in SO_Incoterms

		REQUEST.COUNTRY in {BE,LU} then
			this enabled false
			set value 'DESTINATION' in SO_Incoterms


; ---------------------------------------------------------------------------- 
			
; TODO: REVISAR CONSTANTS.CS
			
; ---------------------------------------------------------------------------- 

;   TODO: THIS IS CONTRADICTORY
;	1,9) if company code greece (5150) and Italy (5180, 596G) value default blank
;	1,10) if company code GR -> default value 7090

Entity SO_TermsOfPaymentKey is DropDownList in frmMain

	with defaults
		label LABELS.labTermsOfPaymentKey
		mandatory true
		load data from DATASOURCE.MDMC_PaymentTerms with arguments {"FlagActive" : true, "ClusterCountryCode" : REQUEST.COUNTRY}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR and REQUEST.CUSTOMER_COUNTRY in {FR, GF, GP, RE, MQ, YT, NC, PF, PM, WF, MC} then
			set value 6115 in SO_TermsOfPaymentKey

		REQUEST.COUNTRY is FR and REQUEST.CUSTOMER_COUNTRY not in {FR, GF, GP, RE, MQ, YT, NC, PF, PM, WF, MC} then
			set value 6000 in SO_TermsOfPaymentKey

		REQUEST.COUNTRY is LU then
			set value 1113 in SO_TermsOfPaymentKey
			
		REQUEST.COUNTRY is ES then
			set value 3E60 in SO_TermsOfPaymentKey

		REQUEST.COUNTRY in {BE, LU} then
			set value 1109 in SO_TermsOfPaymentKey

		REQUEST.COUNTRY is PT then
			SO_TermsOfPaymentKey visible false

		REQUEST.COUNTRY is PT and REQUEST.CUSTOMER_COUNTRY is PT then
			set value 4216 in SO_TermsOfPaymentKey

		REQUEST.COUNTRY is PT and REQUEST.CUSTOMER_COUNTRY is PT then
			set value 4116 in SO_TermsOfPaymentKey

		REQUEST.COUNTRY is IT then
			set value 5001 in SO_TermsOfPaymentKey

		REQUEST.COUNTRY is GR then
			set value 7090 in SO_TermsOfPaymentKey

;		REQUEST.COUNTRY in {IT, GR} then
;			set value '' in SO_TermsOfPaymentKey


; ---------------------------------------------------------------------------- 

Entity KNVV_KTGRD is DropDownList in frmMain
	with defaults
		visible false
		label LABELS.labAccountAssimgnGroup
		mandatory false

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is REQUEST.CUSTOMER_COUNTRY then
			set value 01 in KNVV_KTGRD

		REQUEST.COUNTRY is not REQUEST.CUSTOMER_COUNTRY then
			set value 02 in KNVV_KTGRD

; ---------------------------------------------------------------------------- 

Entity SO_TaxClassification is DropDownList in frmMain

	with defaults
		label LABELS.labTaxClassification
		mandatory true
		load data from DATASOURCE.MDMC_TaxClassification

	with rules
		
		SO_TaxClassification.Value is empty then
			set value 1 in SO_TaxClassification

		REQUEST.REQUEST_TYPE is not CM_BLK and REQUEST.COUNTRY is PT and REQUEST.VENDOR_COUNTRY is PT then
			set value 1 in SO_TaxClassification

		REQUEST.REQUEST_TYPE is not CM_BLK and REQUEST.COUNTRY is PT and REQUEST.VENDOR_COUNTRY is not PT REQUEST.IsEU is true then
			set value B in SO_TaxClassification

		REQUEST.REQUEST_TYPE is not CM_BLK and REQUEST.COUNTRY is PT and REQUEST.VENDOR_COUNTRY is not PT and REQUEST.IsEU is false then
			set value A in SO_TaxClassification

		REQUEST.COUNTRY is FR then
			this mandatory true
			set value 01 in SO_TaxClassification
			this enable false

		REQUEST.COUNTRY is ES then
			set value 1 in SO_TaxClassification


; ---------------------------------------------------------------------------- 

;	"04-08-2014(RG): 1)By default not visible except company code italy and france
;	2)Default values per request creation from scratch and company code:
;	3) If french company code, -> get credit control by filter company/country/region from file ""FR- SBGRP-Region Code"" in sheet “Other documents”. In modifications or creations of sales ares this rule should not applied as the ROLES.ENQ can choose other values
;	4) for belux company codes there is a file  “Sales Org and Accounting Clerk
;	“ in sheet “Other documents” with default values
;	 5) for portuguese company codes there is a file  “Sales Org and Accounting Clerk
;	“ in sheet “Other documents” with default values
;	6) for spanish company codes there is a file  “Sales Org and Accounting Clerk
;	“ in sheet “Other documents” with default values
;	7) for italian company code 5180, please use the sheet ""credit limit for italy 5180 regional company""


Entity KNKK_SBGRP is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labCreditControlGroups
		load data from DATASOURCE.MDMC_CreditControlGroups with arguments { "FlagActive" : true, "CompanyCode" : REQUEST.COMPANY_CODE}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false
		
		REQUEST.COMPANY_CODE in {5180, 596G,5140,491E} then
			this visible true

		REQUEST.COUNTRY is FR then
			this mandatory false	
			this visible true

		REQUEST.COMPANY_CODE in {5140,491E} then
			this mandatory false	
			
; ---------------------------------------------------------------------------- 

Entity KNVV_KVGR1 is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labKVGR1
		load data from DATASOURCE.MDMC_AdditionalCustomerData with arguments {"Group" : GR1}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			KNVV_KVGR1 visible true
			this mandatory false

; ---------------------------------------------------------------------------- 

Entity KNVV_KVGR2 is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labKVGR2
		load data from DATASOURCE.MDMC_AdditionalCustomerData with arguments {"Group" : GR2}

	with rules
		REQUEST.COUNTRY is FR then
			KNVV_KVGR2 visible true
			this mandatory false

; ---------------------------------------------------------------------------- 

Entity KNVV_KVGR3 is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labKVGR3
		load data from DATASOURCE.MDMC_AdditionalCustomerData with arguments {"Group" : GR3}
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			KNVV_KVGR3 visible true
			this mandatory false

; ---------------------------------------------------------------------------- 

Entity KNVV_KVGR4 is DropDownList in frmMain

	with defaults
		visible false
		label LABELS.labKVGR4
		load data from DATASOURCE.MDMC_AdditionalCustomerData with arguments {"Group" : GR4}

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is FR then
			KNVV_KVGR4 visible true
			this mandatory false

; ---------------------------------------------------------------------------- 

Entity KNVV_KVGR5 is DropDownList in frmMain

	with defaults
		label LABELS.labKVGR5

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.SALES_ORGANIZATION in {40E0, 31E0, 60E0, 50E0, 70E0, 10E0, 22E0} then
			KNVV_KVGR5 mandatory true
			load data from DATASOURCE.MDMC_AdditionalCustomerData with arguments {"Group" : GR4, "Filter" : true}
			
		REQUEST.SALES_ORGANIZATION not in {40E0, 31E0, 60E0, 50E0, 70E0, 10E0, 22E0} then
			KNVV_KVGR5 mandatory false
			load data from DATASOURCE.MDMC_AdditionalCustomerData with arguments {"Group" : GR4}
			
		REQUEST.COUNTRY is FR then
			KNVV_KVGR4 visible true
			this mandatory false
; ---------------------------------------------------------------------------- 

; TODO:  MISSING ALL THE PARTNER FUNCTION STUFF

; ---------------------------------------------------------------------------- 


;   TODO: REVIEW THIS WITH THE EXCEL FILES
;	1) Read only field
;	2) see attached email ""credit control area (legal form) for all french companies in sheet “other documents”
;	3) For spanish, portuguese company codes creations from scratch and company code, by default 0
;	4) For belgium and luxembourg company codes creations from scratch and company code, by default 5.000
;	5) for italian company 5180, Based in Credit rep. Group, MADAM has to find into the sheet ""credit limit for italy 5180 regional company"" attached in sheet “other documents” the values the values for the fields KNKK-KLIMK & KNKK-NXTRV
;	   please follow the instructions in the sheet ""credit limit for italy 5180 regional company"" attached in sheet “other documents”


Entity KNKK_KNKLI is TextBox in frmMain

	with defaults
		label LABELS.labCreditAccount
		enabled false
	
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	

; ---------------------------------------------------------------------------- 

;	1) TODO:
;	2) see attached email ""credit control area (legal form) for all french companies in sheet “other documents”
;	5) for italian company 5180, Based in Credit rep. Group, MADAM has to find into the sheet ""credit limit for italy 5180 regional company"" attached in sheet “other documents” the values the values for the fields KNKK-KLIMK & KNKK-NXTRV

Entity KNKK_KLIMK is TextBox in frmMain

	with defaults
		label LABELS.labCreditLimit
		enabled false

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY in {ES, PT} and REQUEST.COMPANY_CODE in {CC, CC_CC} then
			set value 0 in KNKK_KLIMK

		REQUEST.COUNTRY in {BE, LU} and REQUEST.COMPANY_CODE in {CC, CC_CC} then
			set value 5000 in KNKK_KLIMK

; ---------------------------------------------------------------------------- 

;	"17-07-2014(RG): 1)Read only field
;	2)in case of french company codes, See default values in excel attached CamposCreditLimit.xls
;	3) only used in spanish company codes creations from scratch and company code, by default blank (Required in 101896228 (TTT_079307))
;	4) only used in portuguese company codes creations from scratch and company code, by default 44X
;	5)only used in italian company codes creations from scratch and company code, if KNA1-KUKLA=NG, by default ""523"", if KNA1-KUKLA =G, by default ""5EP"""

; TODO: FIELDMAPPING SAYS THIS IS A DROPDOWNLIST BUT THIS IS ACTUALLY A TEXTBOX --- PENDING CLARIFICATION... // REVIEW REST OF RULES

Entity KNKK_CTLPC is TextBox in frmMain

	with defaults
		label LABELS.labGD_Ctr_RiskClassification
		enabled false

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.COUNTRY is ES and REQUEST.COMPANY_CODE in {CC, CC_CC} then
			set value '' in KNKK_CTLPC

		REQUEST.COUNTRY is PT and REQUEST.COMPANY_CODE in {CC, CC_CC} then
			set value 44X in KNKK_CTLPC
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

; TODO: in case of french company codes See default values in excel attached CamposCreditLimit.xls"

Entity KNKK_DTREV is TextBox in frmMain

	with defaults
		label LABELS.labInternalReview
		enabled false

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	

; ---------------------------------------------------------------------------- 

; TODO: in case of french company codes See default values in excel attached CamposCreditLimit.xls"

Entity KNKK_NXTRV is TextBox in frmMain

	with defaults
		enabled false
		label LABELS.labNextInternalReview
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

; TODO: in case of french company codes See default values in excel attached CamposCreditLimit.xls"
Entity KNKK_KRAUS is TextBox in frmMain

	with defaults
		label LABELS.labCLimInfNumber
		enabled false
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity KNKK_DBRTG is TextBox in frmMain

	with defaults
		label LABELS.labRating
		enabled false
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity KNKK_REVDB is TextBox in frmMain

	with defaults
		label LABELS.labLastReviewExt
		enabled false
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

; TODO: in case of french company codes See default values in excel attached CamposCreditLimit.xls"

Entity KNKK_DBEKR is TextBox in frmMain

	with defaults
		label LABELS.labRecClimit
		enabled false
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity btnBlockAll is Button in frmMain

	with defaults
		label LABELS.labBlockAll
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity btnUnblockAll is Button in frmMain

	with defaults
		label LABELS.labUnblockAll
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity BLK_GD_Ctr_UnsubscribeCMD is DropDownList in frmMain

	with defaults
		label LABELS.labUnsubscribeCMD
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		; _COMMENT_ mandatory  false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity labCentralPostingBlock is Label in frmMain

	with defaults
		label LABELS.labCentralPostingBlock
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity BLK_CentralPostingBlock is CheckBox in frmMain

	with defaults
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		_COMMENT_ mandatory  true  
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity labPostBlockingForCompanyCode is Label in frmMain

	with defaults
		label LABELS.labPostBlockingForCompanyCode
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity BLK_PostingBlockForCC is CheckBox in frmMain

	with defaults
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		_COMMENT_ mandatory  true  
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity BLK_CentralSalesOrderBlock is DropDownList in frmMain

	with defaults
		label LABELS.labCentralSalesOrdersBlock
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		_COMMENT_ mandatory  true  
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity BLK_OrdersBlockAtSalesArea is DropDownList in frmMain

	with defaults
		label LABELS.labOrdersBlockAtThisSalesArea
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		_COMMENT_ mandatory  true  
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity BLK_CentralDeliveriesBlock is DropDownList in frmMain

	with defaults
		label LABELS.labCentralDeliveriesBlock
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		_COMMENT_ mandatory  true  
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity BLK_DeliveriesBlockAtSalesArea is DropDownList in frmMain

	with defaults
		label LABELS.labDeliveriesBlockAtThisSalesArea
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		_COMMENT_ mandatory  true  
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity BLK_CentralBillingBlock is DropDownList in frmMain

	with defaults
		label LABELS.labCentralBillingBlock
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity BLK_BillingBlockAtSalesArea is DropDownList in frmMain

	with defaults
		label LABELS.labBillingBlockAtThisSalesArea
	with actions
		; ATTACHMENT mandatory  false
		_COMMENT_ mandatory  true  
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity labCentralSalesSupportBlock is Label in frmMain

	with defaults
		label LABELS.labCentralSalesSupportBlock
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity BLK_CentralSalesSupportBlock is CheckBox in frmMain

	with defaults
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity labCentralSalesSupportBlockAtThisSalesArea is Label in frmMain

	with defaults
		label LABELS.labCentralSalesSupportBlockAtThisSalesArea
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity BLK_CentralSalesSupportBlockAtSalesArea is CheckBox in frmMain

	with defaults
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity labCentralDelMasterRecord is Label in frmMain

	with defaults
		label LABELS.labCentralDelMasterRecord
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity BLK_CentralDeletionFlagMasterRecord is CheckBox in frmMain

	with defaults
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		_COMMENT_ mandatory  true  
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity labDelFlagMasterCompanyCode is Label in frmMain

	with defaults
		label LABELS.labDelFlagMasterCompanyCode
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity BLK_DeletionFlagMasterRecordCC is CheckBox in frmMain

	with defaults
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		_COMMENT_ mandatory  true  
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity labDelFlagAtThisSalesArea is Label in frmMain

	with defaults
		label LABELS.labDelFlagAtThisSalesArea
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity BLK_DeletionFlagMasterRecordSA is CheckBox in frmMain

	with defaults
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity labCentralDelBlockMaster is Label in frmMain

	with defaults
		label LABELS.labCentralDelBlockMaster
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity BLK_CentralDeletionBlockMasterRecord is CheckBox in frmMain

	with defaults
	with actions
		; ATTACHMENT mandatory  false
		_COMMENT_ mandatory  true
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity labDelBlockMasterCompany is Label in frmMain

	with defaults
		label LABELS.labDelBlockMasterCompany
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
; ---------------------------------------------------------------------------- 

Entity BLK_DeletionBlockMasterRecordCC is CheckBox in frmMain

	with defaults

	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
	with actions
		; ATTACHMENT mandatory  false
		_COMMENT_ mandatory  true  
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity TS_IsUrgentRequest is CheckBox in frmMain

	with defaults
		label LABELS.labUrgentRequest
	with rules
		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false
		REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
			this visible false
; ---------------------------------------------------------------------------- 

Entity CostCenter is TextBox in frmMain

	with defaults
		label LABELS.labCostCenter

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity DDLDCReqAction is DropDownList in frmMain

	with defaults
		label LABELS.labSR_Action
		mandatory true

	with rules

		
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false

		REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
			this visible false
; ---------------------------------------------------------------------------- 


Entity labNextRole is DropDownList in frmMain

	with defaults
		label LABELS.NextRole
		enable false

; ---------------------------------------------------------------------------- 

Entity labNextAction is DropDownList in frmMain

	with defaults
		enable false


; ---------------------------------------------------------------------------- 

Entity btnSubmit is Button in frmMain

	with defaults
		label LABELS.btnSubmit

	with actions
		set value toupper(GD_Adr_Name.Value) in GD_Adr_Name
		set value toupper(GD_Adr_Name.Value) in    GD_Adr_Name
		set value toupper(GD_Adr_Name2.Value) in   GD_Adr_Name2
		set value toupper(GD_Adr_Name3.Value) in   GD_Adr_Name3
		set value toupper(GD_Adr_Name4.Value) in   GD_Adr_Name4
		set value toupper(GD_Adr_Street.Value) in  GD_Adr_Street
		set value toupper(GD_Adr_Street2.Value) in GD_Adr_Street2
		set value toupper(GD_Adr_Street3.Value) in GD_Adr_Street3
		set value toupper(GD_Adr_Street4.Value) in GD_Adr_Street4
		set value toupper(GD_Adr_Street5.Value) in GD_Adr_Street5
		set value toupper(GD_Adr_City.Value) 	in   GD_Adr_City




	with rules
		REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
			this visible false

		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false

		REQUEST.CURRENT_ROLE is ROLES.ENQ and REQUEST.REQUEST_TYPE is not VC and DDLDCComment.Value is empty then
			set value ERRsubmitRequestComment in MESSAGE_POPUP

		DDLDCComment.Value is not empty and DDLDCComment.Length > 2000 then 
			set value ERRcommentLenght in MESSAGE_POPUP

		GD_Adr_Country.Value is GR and GD_Adr_City2.Value is empty and GD_Adr_City2 is mandatory then
			set value ERRsubmitRequestGDFieldDistrict in MESSAGE_POPUP

		; TODO: ValidateBankDetails

		; TODO: CalculateExternalNumber

	with triggers

		this on click

; ---------------------------------------------------------------------------- 

Entity btnClose is Button in frmMain

	with defaults
		label LABELS.btnClose


; ---------------------------------------------------------------------------- 

; TODO: WHAT TO DO WITH "MESSAGES"

;Entity MADAM_MESSAGE_POPUP is Message in frmMain
;
;	with defaults

; ---------------------------------------------------------------------------- 

Entity GD_Ctr_RiskClassification is DropDownList in frmMain

	with defaults
		enabled true
		visible true
		value "00"
		; only two values, 00 and 09
		load data from DATASOURCE.MDM_RiskClassifications
		label LABELS.labGD_Ctr_RiskClassification
		mandatory true
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	

		REQUEST.REQUEST_TYPE in {CM, CM_BLK} then
			this mandatory false

		REQUEST.STATE in {STATES.CLOSED, STATES.LOCKED} then
			this enable false

		REQUEST.CURRENT_ROLE not in {ROLES.ENQ,ROLES.CLERK} then enabled false

		REQUEST.CURRENT_ROLE in {ROLES.ENQ, ROLES.RCO, ROLES.CLERK} then enabled true

		REQUEST.CURRENT_ROLE is ROLES.RCO and REQUEST.COUNTRY in {IT, GR} then
			this enabled 

		GD_Ctr_RiskClassification.Value is '' then
			GD_Ctr_RiskClassification enabled true

		REQUEST.STATUS is REQUEST.CLOSED then
			enabled false

		GD_Ctr_RiskClassification.Value is empty and GD_Ctr_RiskClassification.Enabled is false then
			GD_Ctr_RiskClassification enabled true
			
		 

	with triggers
		; TODO FIND A BETTER WAY TO EXPRESS THIS....
		; BANK_INSERTED EVALUATE -----


; ---------------------------------------------------------------------------- 

Entity GD_Adr_Country is DropDownList in frmMain
	with defaults
		visible true
		enabled false					; this control is always disabled
		value USER.COUNTRY				; -- depends on country selected in search form, so this data has to be passed
		load data from DATASOURCE.MDMC_Countries
		mandatory true
		label LABELS.labGD_GD_Adr_Country

	with rules
		GD_Adr_Country.Value is ES and GD_Ctr_VendorClassification is not G and GD_Ctr_TaxCode1.Value starts with {P,Q,S,U} and REQUEST.CURRENT_ROLE is ROLES.ENQ  and REQUEST.REQUEST_TYPE is CC then
			set value G in GD_Ctr_VendorClassification

		GD_Adr_Country.Value is ES and GD_Ctr_VendorClassification is not G and GD_Ctr_TaxCode1.Value starts with {P,Q,S,U} and REQUEST.CURRENT_ROLE is ROLES.ENQ  and REQUEST.REQUEST_TYPE is not CC and GD_Ctr_CustomerClassification.OldDisplayValue is not empty then
			set value G in GD_Ctr_VendorClassification

; ---------------------------------------------------------------------------- 

Entity GD_Ctr_CustomerClassification is DropDownList in frmMain

	with defaults
		label LABELS.labGD_Ctr_VendorClassification
		mandatory true
		visible true
		enabled true
		value "NG"
		; values G  and NG
		load data from DATASOURCE.VENDOR_CLASSIFICATIONS

	with rules
		REQUEST.STATE in {STATES.LOCKED, STATES.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK then
			this enable false	
		REQUEST.CURRENT_ROLE is ROLES.SUS then enabled false
		REQUEST.CUSTOMER_COUNTRY is ES and GD_Ctr_TaxCode1.Text starts with {"P","Q","S"} then set value "G" in GD_Ctr_CustomerClassification
		REQUEST.CUSTOMER_COUNTRY is ES and GD_Ctr_TaxCode1.Text starts with "X" then set value "NG" in GD_Ctr_CustomerClassification

		; TODO: RULE FOR FR
		; For customer country France the value is set due to legal form selection, see sheet "Legal form(France)"  meaning what??????
		
		REQUEST.CURRENT_ROLE is ROLES.RCO and REQUEST.COUNTRY in {IT, GR} then
			this enabled 
	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity CC_AM_BPClassification is DropDownList in frmMain

	with defaults
		visible true
		enabled true
		value "NORM"
		load data from DATASOURCE.BP_CLASSIFICATIONS
		mandatory true
		label LABELS.labCC_AM_BPClassification
	
	with rules
		
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		
		REQUEST.REQUEST_TYPE is CM_BLK then
			this mandatory false
		
		REQUEST.CURRENT_ROLE not in {ROLES.ENQ,ROLES.CLERK} then enabled false

		REQUEST.CURRENT_ROLE in {ROLES.ENQ, ROLES.RCO, ROLES.CLERK} then enabled true

		CC_AM_BPClassification.Value in {BPHR, BPMR} then ATTACHMENT mandatory 
		
		REQUEST.CURRENT_ROLE is ROLES.RCO and REQUEST.COUNTRY in {IT, GR} then
			this enabled 

		REQUEST.COUNTRY in {BE,IT, PT} then
			this mandatory false
	with actions
		; ATTACHMENT mandatory  false
		; _COMMENT_ mandatory  false
	
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity GD_Damex is DropDownList in frmMain

	with defaults
		label LABELS.labGD_Damex
		value ''
		load data from DATASOURCE.YES_NO
		mandatory true
	
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.FLOWTYPE not in {CC, CC_CC} then 
			GD_Damex not mandatory
			GD_Damex not visible

		REQUEST.COUNTRY is FR then
			mandatory false

; ---------------------------------------------------------------------------- 

Entity GD_Ctr_IsNaturalPerson is CheckBox in frmMain

	with defaults
		label LABELS.labGD_Ctr_IsNaturalPerson

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		; ALL FIELDS IN	DIV_ADDITIONAL_INFO_NATURAL_PERSON mandatory
		REQUEST.COUNTRY is ES and GD_Ctr_TaxCode1.Value starts with {P, Q, S} then 
			set value false in GD_Ctr_IsNaturalPerson
			set value G in GD_Ctr_CustomerClassification

		REQUEST.COUNTRY is ES and GD_Ctr_TaxCode1.Value starts with {X,1,2,3,4,5,6,7,8,9} then 
			set value true in GD_Ctr_IsNaturalPerson 
			set value NG in GD_Ctr_CustomerClassification
			
		REQUEST.CURRENT_ROLE is ROLES.RCO then
			GD_Ctr_IsNaturalPerson enabled true

		REQUEST.CURRENT_ROLE not in {ROLES.ENQ,ROLES.CLERK} then enabled false

		REQUEST.CURRENT_ROLE in {ROLES.ENQ, ROLES.RCO, ROLES.CLERK} then enabled true

	with actions
		ATTACHMENT mandatory  true  
		; _COMMENT_ mandatory  false
	with triggers 
		on change
; ---------------------------------------------------------------------------- 

Entity labGD_DamexNote is Label in frmMain

	with defaults
		label LABELS.labGD_DamexNote
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity ATTACHMENT is AttachmentManager in frmMain

	with defaults
		mandatory true
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 


Entity SAP_Message is TextBox in frmMain

	with defaults
		label LABELS.labSAP_Message

	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 


Entity GD_SAPNumber is TextBox in frmMain

	with defaults
		visible false
		label LABELS.labSAPNumber
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity DDLDCComment is TextBox in frmMain

	with defaults
		label LABELS.labComments
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.USER_PERMISSION is ACCESSRIGHTS.READER then
			this enable false
			this visible false
; ---------------------------------------------------------------------------- 

Entity btnSCClose is Button in frmMain

	with defaults
		label LABELS.btnClose

	with rules
		REQUEST.REQUEST_STATE is not CLOSED and btnSubmit.Visible is true then
			this visible true

		btnClose.Visible is true then
			this visible false
		else
			this visible true

; ---------------------------------------------------------------------------- 

; SEEMS NOT USED
; Entity SCMessage is Label in frmMain
; 
; 	with defaults
; 		enable false

; ---------------------------------------------------------------------------- 

Entity lbFMRelevantFor is Label in frmMain

	with defaults
		label LABELS.labFMRelevantFor

; ---------------------------------------------------------------------------- 

Entity lbOtherDependencies is Label in frmMain

	with defaults
		label LABELS.labOtherDependecies

; ---------------------------------------------------------------------------- 

Entity HF_RelevantForSUS is CheckBox in frmMain

	with defaults
		label LABELS.labHF_RelevantForSUS
		enable false

; ---------------------------------------------------------------------------- 

Entity HF_MandatoryAttachment is CheckBox in frmMain

	with defaults
		label LABELS.labHF_MandatoryAttachment
		enable false

; ---------------------------------------------------------------------------- 

Entity HF_MandatoryComment is CheckBox in frmMain

	with defaults
		label LABELS.labHF_MandatoryComment
		enable false

; ---------------------------------------------------------------------------- 

Entity HF_RelevantForCO is CheckBox in frmMain

	with defaults
		label LABELS.labHF_RelevantForCO
		enable false

; ---------------------------------------------------------------------------- 

Entity HF_RelevantForClusterRCO is CheckBox in frmMain

	with defaults
		visible false
		label LABELS.labHF_RelevantForCL_RCO
		enable false

; ---------------------------------------------------------------------------- 

Entity txbNextRole is TextBox in frmMain

	with defaults
		label LABELS.NextRole
		enable false

; ---------------------------------------------------------------------------- 

Entity SR_Comments is TextBox in frmMain

	with defaults
		label LABELS.labSR_Comments
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.STATE not in {STATE.LOCKED, STATE.CLOSED} and REQUEST.CURRENT_ROLE in {ROLES.ENQ, ROLES.CLERK} then
			this enable true	


; ---------------------------------------------------------------------------- 

Entity btnBack2 is Button in frmMain

	with defaults
		label LABELS.btnBack

	with rules
		REQUEST.REQUEST_STATE is CLOSED then
			this visible false

; ---------------------------------------------------------------------------- 

Entity btnSave is Button in frmMain

	with defaults
		label LABELS.btnSave
	
	with actions
		this enable false
	
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	

	with triggers
		this on click
; ---------------------------------------------------------------------------- 

Entity btnCloseFinal is Button in frmMain

	with defaults
		label LABELS.btnClose

	with rules
		REQUEST.CURRENT_ROLE is ROLES.CLERK then
			this visible true
		else
			this visible false

; ---------------------------------------------------------------------------- 

; TODO: WHAT TO DO WITH "MESSAGES"
; Entity SummaryMESSAGE_POPUP is Message in frmMain
; 
; 	with defaults

; ---------------------------------------------------------------------------- 

Entity PF_PartnerFunction is DropDownList in frmMain

	with defaults
		label LABELS.labPartnerFunction
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity PF_Number is TextBox in frmMain

	with defaults
		label LABELS.labPFNumber
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity PF_btnInsert is Button in frmMain

	with defaults
		label LABELS.btnInsert
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this visible false	
; ---------------------------------------------------------------------------- 

Entity PF_Grid is Grid in frmMain
	with defaults
		define column GRID_PF_PartnerFunction	with arguments {ControlType : DropDownList, DataField : PartnerFunction, Header : LABELS.labSurname, Visible : true}
		define column GRID_PF_Number			with arguments {ControlType : Label, DataField : Number, Header : LABELS.labNumber, Visible : true, MaxLength : 15}
		define column GRID_PF_Default			with arguments {ControlType : CheckBox,	DataField : IsDefault, Visible : true}
		
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
		REQUEST.CURRENT_ROLE in {ROLES.UPM, ROLES.CPM, ROLES.SUS, ROLES.RCO, ROLES.CLERK} then
			load data from DATASOURCE.MDMC_Request_CustomerPartnerFunction with arguments {"RequestID" : REQUEST.REQUEST_ID}
		REQUEST.CURRENT_ROLE is ROLES.ENQ and REQUEST.REQUEST_TYPE is not VC then
			load data from DATASOURCE.MDMC_Request_CustomerPartnerFunctionSAP with arguments {"RequestID" : REQUEST.REQUEST_ID}

	with triggers
		on row inserted
		on row deleted
		on row updated

; ----------------------------------------------------------------------------	

; --- CONTACT PERSONS --------------------------------------------------------

Entity CP_btnClearAll is Button in frmMain

	with defaults
		label LABELS.btnClearAll

	with actions
		clear CP_Grid
		
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	

; ---------------------------------------------------------------------------- 

Entity CP_Surname is TextBox in frmMain

	with defaults
		label LABELS.labCP_Surname
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity CP_Name is TextBox in frmMain

	with defaults
		label LABELS.labCP_Name
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity CP_Department is DropDownList in frmMain

	with defaults
		label LABELS.labCP_Department
		load data from DATASOURCE.MDMC_Department with arguments {COLUMN.FlagActive : true, OrderBy : DisplayName}
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity CP_Telephone is TextBox in frmMain

	with defaults
		label LABELS.labCP_Phone
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity CP_Fax is TextBox in frmMain

	with defaults
		label LABELS.labCP_Fax
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity CP_Email is TextBox in frmMain

	with defaults
		label LABELS.labCP_Email
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity CP_ConsNumber is TextBox in frmMain

	with defaults
		visible false
		label LABELS.labCP_ConsNumber
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity CP_Default is CheckBox in frmMain

	with defaults
		label LABELS.labCP_Default
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ---------------------------------------------------------------------------- 

Entity CP_btnInsert is Button in frmMain

	with defaults
		label LABELS.btnInsert
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this visible false	
; ---------------------------------------------------------------------------- 

Entity CP_Grid is Grid in frmMain
	with defaults
		define column GRID_CP_Name				with arguments {ControlType : TextBox, DataField : Name, Header : LABELS.labName, MaxLength : 100, Visible : true}
		define column GRID_CP_Surname			with arguments {ControlType : TextBox, DataField : Surname, Header : LABELS.labSurname, MaxLength : 100, Visible : true}
		define column GRID_CP_Department		with arguments {ControlType : TextBox, DataField : Deparment, Header : LABELS.labDepartment, Visible : true}
		define column GRID_CP_Telephone			with arguments {ControlType : TextBox, DataField : Telephone, Header : LABELS.labBankControlKey, Visible : true}
		define column GRID_CP_Fax				with arguments {ControlType : TextBox, DataField : Fax, Header : LABELS.labFax, Visible : true}
		define column GRID_CP_Email				with arguments {ControlType : TextBox, DataField : Email, Header : LABELS.labEmail, Visible : true}
		define column GRID_CP_KNVK_NAME1		with arguments {ControlType : TextBox, DataField : KNVK_NAME1, Visible : false}
		define column GRID_CP_Default			with arguments {ControlType : CheckBox,	DataField : Default, Visible : true}
		
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false			REQUEST.CURRENT_ROLE in {ROLES.UPM, CPM, ROLES.SUS, ROLES.RCO, ROLES.CLERK} then
			load data from DATASOURCE.MDMC_Request_ContactPersons with arguments {"RequestID" : REQUEST.REQUEST_ID}
		REQUEST.CURRENT_ROLE is ROLES.ENQ and REQUEST.REQUEST_TYPE is not VC then
			load data from DATASOURCE.MDMC_Request_ContactPersonsSAP with arguments {"RequestID" : REQUEST.REQUEST_ID}

	with triggers
		on row inserted
		on row deleted
		on row updated

; ----------------------------------------------------------------------------	

; --- LIST OF PURCHASE ORGANIZATION SELECTION IN THE PURCHASE ORG TAB --------

Entity SO_lbxSODSalesOrganization1 is ListBox in frmMain
	with defaults
		; this means load all purchase organizations for the company code except the current purchase organization
		; which is already loaded
		load data from DATASOURCE.MDM_ClusterPurchaseOrganizations with arguments {"CompanyCode" : REQUEST.COMPANY_CODE, "ExcludePurchaseOrganization" : REQUEST.PURCHASE_ORGANIZATION}

; ----------------------------------------------------------------------------	

Entity SO_lbxSODSalesOrganization2 is ListBox in frmMain
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ----------------------------------------------------------------------------	

Entity SO_btnSODAll is Button in frmMain
	with defaults
		label LABELS.lab_____		; this label is actually this -->    >>
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ----------------------------------------------------------------------------	

Entity SO_btnSODSelect is Button in frmMain
	with defaults
		label LABELS.lab_____		; this label is actually this -->    >
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ----------------------------------------------------------------------------	

Entity SO_btnSODRemove is Button in frmMain
	with defaults
		label LABELS.lab_____		; this label is actually this -->    <
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ----------------------------------------------------------------------------	

Entity btnSOClear is Button in frmMain
	with defaults
		label LABELS.lab_____		; this label is actually this -->    <<
	with rules
		REQUEST.STATE in {STATE.LOCKED, STATE.CLOSED} or REQUEST.REQUEST_TYPE is CM_BLK or REQUEST.CURRENT_ROLE in {ROLES.SUS, ROLES.RCO} then
			this enable false	
; ----------------------------------------------------------------------------	